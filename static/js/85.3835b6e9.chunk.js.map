{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js","../node_modules/@arcgis/core/layers/graphics/sources/geojson/GeoJSONSourceWorker.js"],"names":["s","u","c","r","e","n","forEach","push","i","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","type","features","f","coordinates","o","geometryType","objectIdFieldName","next","value","done","l","geometry","properties","a","id","y","p","d","t","length","S","g","m","h","j","F","w","G","b","P","M","lengths","coords","hasZ","x","I","data","crs","name","RegExp","test","N","Set","Number","NEGATIVE_INFINITY","fields","maxObjectId","Math","max","objectIdFieldType","unknownFields","Object","keys","filter","has","delete","add","alias","T","R","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","D","this","_queryEngine","destroy","_requiredFields","_fieldsIndex","_createDefaultAttributes","_checkProjection","spatialReference","url","responseType","E","q","objectIdField","timeInfo","message","details","some","editable","nullable","unshift","field","jsonValues","indexOf","startTimeField","get","endTimeField","trackIdField","O","warnings","featureErrors","layerDefinition","drawingInfo","templates","extent","_","hasM","featureStore","cacheSpatialQueries","_nextObjectId","_loadInitialFeatures","Promise","all","adds","updates","_applyEdits","executeQuery","signal","executeQueryForCount","executeQueryForIds","executeQueryForExtent","executeQueryForSnapping","attributes","_assignObjectId","objectId","addMany","fullExtent","timeExtent","start","end","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","uid","getFeature","isFinite"],"mappings":"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","file":"static/js/85.3835b6e9.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import n from\"../../OptimizedFeature.js\";import t from\"../../OptimizedGeometry.js\";function o(e){const n=[];for(;;){const{value:t,done:o}=e.next();if(o)return n;n.push(t)}}function r(e){const n=[];return e.forEach((e=>n.push(e))),n}const i={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function*s(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const n of e.features)n&&(yield n)}}function*u(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const n of e.coordinates)yield*n;break;case\"MultiPolygon\":for(const n of e.coordinates)for(const e of n)yield*e}}function*c(e,o={}){const{geometryType:r,objectIdFieldName:s}=o;for(;;){const{value:u,done:c}=e.next();if(c)return;const{geometry:l,properties:f,id:a}=u;if(l&&i[l.type]!==r)continue;const y=f||{};s&&null!=a&&!y[s]&&(y[s]=a);const p=new n(l?d(new t,l,o):null,y);yield p}}function l(e){for(;;){const{value:n,done:t}=e.next();if(t)return!1;if(n.length>2)return!0}}function f(e){return!y(e)}function a(e){return y(e)}function y(e){let n=0;for(let t=0;t<e.length;t++){const o=e[t],r=e[(t+1)%e.length];n+=o[0]*r[1]-r[0]*o[1]}return n<=0}function p(e){const n=e[0],t=e[e.length-1];return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]||e.push(n),e}function d(e,n,t){switch(n.type){case\"LineString\":return g(e,n,t);case\"MultiLineString\":return m(e,n,t);case\"MultiPoint\":return h(e,n,t);case\"MultiPolygon\":return w(e,n,t);case\"Point\":return b(e,n,t);case\"Polygon\":return P(e,n,t)}}function g(e,n,t){return S(e,n.coordinates,t),e}function m(e,n,t){for(const o of n.coordinates)S(e,o,t);return e}function h(e,n,t){return S(e,n.coordinates,t),e}function w(e,n,t){for(const o of n.coordinates){j(e,o[0],t);for(let n=1;n<o.length;n++)F(e,o[n],t)}return e}function b(e,n,t){return G(e,n.coordinates,t),e}function P(e,n,t){const o=n.coordinates;j(e,o[0],t);for(let r=1;r<o.length;r++)F(e,o[r],t);return e}function j(e,n,t){const o=p(n);f(o)?M(e,o,t):S(e,o,t)}function F(e,n,t){const o=p(n);a(o)?M(e,o,t):S(e,o,t)}function S(e,n,t){for(const o of n)G(e,o,t);e.lengths.push(n.length)}function M(e,n,t){for(let o=n.length-1;o>=0;o--)G(e,n[o],t);e.lengths.push(n.length)}function G(e,n,t){const[o,r,i]=n;e.coords.push(o,r),t.hasZ&&e.coords.push(i||0)}function x(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function I(n){if(!n)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==n.type&&\"FeatureCollection\"!==n.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:n});const{crs:t}=n;if(!t)return;const o=\"string\"==typeof t?t:\"name\"===t.type?t.properties.name:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:t})}function N(e,n={}){const t=s(e),o=[],c=new Set,f=new Set;let a,y=!1,p=Number.NEGATIVE_INFINITY,d=null,g=!1,{geometryType:m=null}=n,h=!1;for(;;){const{value:e,done:n}=t.next();if(n){const e=d&&1===d.length&&d[0]||null;if(e)for(const n of o)n.name===e&&(n.type=\"esriFieldTypeOID\");return{fields:o,geometryType:m,hasZ:y,maxObjectId:Math.max(0,p),objectIdFieldName:e,objectIdFieldType:a,unknownFields:r(f)}}const{geometry:s,properties:w,id:b}=e;if(!s||(m||(m=i[s.type]),i[s.type]===m)){if(!y){y=l(u(s))}if(g||(g=null!=b,g&&(a=typeof b,\"number\"===a&&(d=Object.keys(w).filter((e=>w[e]===b))))),g&&\"number\"===a&&null!=b&&(p=Math.max(p,b),d.length>1?d=d.filter((e=>w[e]===b)):1===d.length&&(d=w[d[0]]===b?d:[])),!h&&w){let e=!0;for(const n in w){if(c.has(n))continue;const t=w[n];if(null==t){e=!1,f.add(n);continue}const r=x(t);\"unknown\"!==r?(f.delete(n),c.add(n),o.push({name:n,alias:n,type:r})):f.add(n)}h=e}}}}function T(e,n){return o(c(s(e),n))}export{T as createOptimizedFeatures,N as inferLayerProperties,I as validateGeoJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{WGS84 as t,equals as i}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{getJsonType as s}from\"../../../../geometry/support/jsonUtils.js\";import{getFieldDefaultValue as r}from\"../../../support/fieldUtils.js\";import n from\"../../../../request.js\";import{kebabDict as o}from\"../../../support/fieldType.js\";import{convertFromGeometry as a,convertToGeometry as l,convertFromFeatures as d,convertToFeature as u,convertFromFeature as p}from\"../../featureConversionUtils.js\";import y from\"../../../support/FieldsIndex.js\";import{validateGeoJSON as f,inferLayerProperties as m,createOptimizedFeatures as c}from\"./geojson.js\";import{createDrawingInfo as h,createDefaultTemplate as g,createDefaultAttributesFunction as I}from\"../support/clientSideDefaults.js\";import{project as F,checkProjectionSupport as b}from\"../../data/projectionSupport.js\";import j from\"../../data/FeatureStore.js\";import _ from\"../../data/QueryEngine.js\";import{loadGeometryEngineForSimplify as E,mixAttributes as T,createFeatureEditSuccessResult as q,createFeatureEditErrorResult as x,simplify as w}from\"../support/sourceUtils.js\";const R={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class D{constructor(){this._queryEngine=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null}async load(s){const d=[];await this._checkProjection(s.spatialReference);let u=null;if(s.url){u=(await n(s.url,{responseType:\"json\"})).data,await f(u)}const p=m(u,{geometryType:s.geometryType}),b=s.fields||p.fields||[],E=null!=s.hasZ?s.hasZ:p.hasZ,T=p.geometryType,q=s.objectIdField||(\"number\"===p.objectIdFieldType?p.objectIdFieldName:\"OBJECTID\")||\"OBJECTID\",x=s.spatialReference||t;let w=s.timeInfo;if(!T)throw new e(\"geojson-layer:missing-property\",\"geometryType not set and couldn't be inferred from the provided features\");if(\"string\"===p.objectIdFieldType&&d.push({name:\"geojson-layer:unsupported-id-type\",message:\"Feature ids are of type string and can't be honored.\"}),b===p.fields&&p.unknownFields.length>0&&d.push({name:\"geojson-layer:unknown-field-types\",message:\"Some fields types couldn't be inferred from the features and were dropped\",details:{unknownFields:p.unknownFields}}),q){let e=null;b.some((t=>t.name===q&&(e=t,!0)))?(e.type=\"esriFieldTypeOID\",e.editable=!1,e.nullable=!1):b.unshift({alias:q,name:q,type:\"esriFieldTypeOID\",editable:!1,nullable:!1})}for(const t of b){if(null==t.name&&(t.name=t.alias),null==t.alias&&(t.alias=t.name),!t.name)throw new e(\"geojson-layer:invalid-field-name\",\"field name is missing\",{field:t});if(t.name===q&&(t.type=\"esriFieldTypeOID\"),-1===o.jsonValues.indexOf(t.type))throw new e(\"geojson-layer:invalid-field-type\",`invalid type for field \"${t.name}\"`,{field:t})}const D={};this._requiredFields=[];for(const e of b)if(\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type){e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable;const t=r(e);e.nullable||void 0!==t?D[e.name]=t:this._requiredFields.push(e)}if(this._fieldsIndex=new y(b),w){if(w.startTimeField){const e=this._fieldsIndex.get(w.startTimeField);e?(w.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):w.startTimeField=null}if(w.endTimeField){const e=this._fieldsIndex.get(w.endTimeField);e?(w.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):w.endTimeField=null}if(w.trackIdField){const e=this._fieldsIndex.get(w.trackIdField);e?w.trackIdField=e.name:(w.trackIdField=null,d.push({name:\"geojson-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:w}}))}w.startTimeField||w.endTimeField||(d.push({name:\"geojson-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing\",details:{timeInfo:w}}),w=null)}const O={warnings:d,featureErrors:[],layerDefinition:{...R,drawingInfo:h(T),templates:g(D),extent:null,geometryType:T,objectIdField:q,fields:b,hasZ:!!E,timeInfo:w}};this._queryEngine=new _({fields:b,geometryType:T,hasM:!1,hasZ:E,objectIdField:q,spatialReference:x,timeInfo:w,featureStore:new j({geometryType:T,hasM:!1,hasZ:E}),cacheSpatialQueries:!0}),this._createDefaultAttributes=I(D,q),this._nextObjectId=p.maxObjectId+1;const S=c(u,{geometryType:T,hasZ:E,objectIdFieldName:\"number\"===p.objectIdFieldType?q:null});if(!i(x,t))for(const e of S)e.geometry&&(e.geometry=a(F(l(e.geometry,T,E,!1),t,x)));return this._loadInitialFeatures(O,S),O}async applyEdits(e){const{spatialReference:t,geometryType:i}=this._queryEngine;return await Promise.all([E(t,i),b(e.adds,t),b(e.updates,t)]),this._applyEdits(e)}queryFeatures(e={},t={}){return this._queryEngine.executeQuery(e,t.signal)}queryFeatureCount(e={},t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}queryObjectIds(e={},t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}queryExtent(e={},t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}querySnapping(e,t={}){return this._queryEngine.executeQueryForSnapping(e,t.signal)}_loadInitialFeatures(e,t){const{featureStore:i,objectIdField:s}=this._queryEngine,r=[];for(const n of t){const t=this._createDefaultAttributes(),i=T(this._fieldsIndex,this._requiredFields,t,n.attributes,!0,e.warnings);i?e.featureErrors.push(i):(this._assignObjectId(t,n.attributes,!0),n.attributes=t,n.objectId=t[s],r.push(n))}if(i.addMany(r),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){const{start:t,end:i}=this._queryEngine.timeExtent;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e}_applyEdits(e){const{adds:t,updates:i,deletes:s}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(r,t),i&&i.length&&this._applyUpdateEdits(r,i),s&&s.length){for(const e of s)r.deleteResults.push(q(e));this._queryEngine.featureStore.removeManyById(s)}return{fullExtent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:r}}_applyAddEdits(e,t){const{addResults:i}=e,{geometryType:r,hasM:n,hasZ:o,objectIdField:a,spatialReference:l,featureStore:u}=this._queryEngine,p=[];for(const d of t){if(d.geometry&&r!==s(d.geometry)){i.push(x(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),n=T(this._fieldsIndex,this._requiredFields,t,d.attributes);if(n)i.push(n);else{if(this._assignObjectId(t,d.attributes),d.attributes=t,null!=d.uid){const t=d.attributes[a];e.uidToObjectId[d.uid]=t}d.geometry&&(d.geometry=F(w(d.geometry,l),d.geometry.spatialReference,l)),p.push(d),i.push(q(d.attributes[a]))}}u.addMany(d([],p,r,o,n,a))}_applyUpdateEdits({updateResults:e},t){const{geometryType:i,hasM:r,hasZ:n,objectIdField:o,spatialReference:a,featureStore:l}=this._queryEngine;for(const d of t){const{attributes:t,geometry:y}=d,f=t&&t[o];if(null==f){e.push(x(`Identifier field ${o} missing`));continue}if(!l.has(f)){e.push(x(`Feature with object id ${f} missing`));continue}const m=u(l.getFeature(f),i,n,r);if(y){if(i!==s(y)){e.push(x(\"Incorrect geometry type.\"));continue}m.geometry=F(w(y,a),y.spatialReference,a)}if(t){const i=T(this._fieldsIndex,this._requiredFields,m.attributes,t);if(i){e.push(i);continue}}l.add(p(m,i,n,r,o)),e.push(q(f))}}_assignObjectId(e,t,i=!1){const s=this._queryEngine.objectIdField;i&&isFinite(t[s])?e[s]=t[s]:e[s]=this._nextObjectId++}async _checkProjection(i){try{await b(t,i)}catch{throw new e(\"geojson-layer\",\"Projection not supported\")}}}export default D;\n"],"sourceRoot":""}