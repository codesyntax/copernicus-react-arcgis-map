{"version":3,"sources":["../node_modules/@arcgis/core/geometry/support/quantizationUtils.js","../node_modules/@arcgis/core/symbols/cim/Rasterizer.js","../node_modules/@arcgis/core/symbols/cim/TextRasterizer.js","../node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js","../node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js"],"names":["o","n","t","r","l","a","m","originPosition","scale","tolerance","translate","extent","xmin","ymax","s","Math","round","f","x","u","i","e","length","push","p","y","z","Array","T","G","points","I","L","O","g","rings","S","N","paths","d","ymin","xmax","zmin","zmax","mmin","mmax","U","E","k","q","b","v","P","this","_rasterizationCanvas","document","createElement","type","rasterizeSimpleFill","style","size","image","Uint32Array","buffer","sdf","simplePattern","anchorX","anchorY","rasterizeSimpleLine","cap","fromSimpleMarker","fromCIMHatchFill","frame","markerPlacement","fromCIMInsidePolygon","rasterize","c","h","width","height","getContext","ImageData","putImageData","setAttribute","drawImage","getImageData","Uint8Array","data","oldColor","newColor","Uint8ClampedArray","_textRasterizationCanvas","setFontProperties","parameters","textLines","split","lineHeight","computeLineHeight","computeTextWidth","renderedLineHeight","pixelRatio","renderedHaloSize","halo","renderedWidth","renderedHeight","fillStyle","slice","toString","color","haloStyle","textAlign","renderHalo","globalCompositeOperation","fillText","premultiplyColors","_haloRasterizationCanvas","clearRect","strokeStyle","lineJoin","renderHaloEmulated","renderHaloNative","globalAlpha","lineWidth","strokeText","font","weight","family","textBaseline","horizontalAlignment","max","measureText","cos","PI","sin","Legend","Preview","targetSize","referenceSize","scaleFactor","M","fill","legend","geometry","canvasPaths","preview","stroke","Object","keys","map","name","alias","symbol","materialHash","cim","materialOverrides","analyzedCIM","hash","_spatialReference","_avoidSDF","_resourceCache","Map","_rasterizer","_textRasterizer","_pictureMarkerCache","centroid","analyzeCIMSymbol","attributes","rasterizeCIMSymbol","geometryType","spatialReference","fields","fetchPictureMarkerResource","text","indexOf","textCase","Promise","all","get","url","responseType","signal","set","_getRasterizedResource","offsetX","offsetY","rotation","rotateClockwise","angle","verticalAlignment","rotateClockWise","rasterizedResource","getSymbolImage","C","min","createImageData","rasterizedImage","_imageDataToCanvas","save","rotate","restore","imageData","anchorPosition","_imageDataCanvas","_getPictureResource","_rasterizePictureResource","_embedCIMLayerInVectorMarker","JSON","stringify","rasterizeJSONResource","_rasterizeTextResource","anchorPoint","preserveOutlineWidth","has","window","devicePixelRatio","fontName","decoration","outlineColor","outlineSize","rasterizeText","abs","createPattern","setTransform","m11","m12","m21","m22","m41","m42","beginPath","moveTo","lineTo","closePath","apply","_imageTo32Array","markerGraphics","symbolLayers","maxSize","node","opacity","cimOptions","feature","fieldMap","clone","rasterizeCIMSymbolAsync","w","D","ceil","Image","src","toDataURL","appendChild"],"mappings":"qZAI+J,IAAMA,EAAE,SAACC,EAAEC,EAAEC,GAAL,MAAS,CAACD,EAAEC,IAAGC,EAAE,SAACH,EAAEC,EAAEC,GAAL,MAAS,CAACD,EAAEC,EAAEF,EAAE,KAAII,EAAE,SAACJ,EAAEC,EAAEC,GAAL,MAAS,CAACD,EAAEC,EAAEF,EAAE,GAAGA,EAAE,KAAI,SAASK,EAAEL,GAAG,OAAIA,EAAoB,CAACM,eAAe,eAAeN,EAAEM,eAAe,YAAY,eAAeN,EAAEM,eAAe,YAAYN,EAAEM,eAAeC,MAAMP,EAAEQ,UAAU,CAACR,EAAEQ,UAAUR,EAAEQ,WAAW,CAAC,EAAE,GAAGC,UAAUT,EAAEU,OAAO,CAACV,EAAEU,OAAOC,KAAKX,EAAEU,OAAOE,MAAM,CAAC,EAAE,IAA1O,KAAsjB,SAASC,EAAT,EAAiCX,GAAE,IAAjBF,EAAiB,EAAvBO,MAAkBN,EAAK,EAAfQ,UAAgB,OAAOK,KAAKC,OAAOb,EAAED,EAAE,IAAID,EAAE,IAAI,SAASgB,EAAT,EAAiCd,GAAE,IAAjBF,EAAiB,EAAvBO,MAAkBN,EAAK,EAAfQ,UAAgB,OAAOK,KAAKC,OAAOd,EAAE,GAAGC,GAAGF,EAAE,IAAI,SAASiB,EAAEjB,EAAEC,EAAEC,GAA0B,IAAvB,IAAegB,EAAEC,EAAEpB,EAAEI,EAAfiB,EAAE,GAAuBhB,EAAE,EAAEA,EAAEF,EAAEmB,OAAOjB,IAAI,CAAC,IAAMC,EAAEH,EAAEE,GAAGA,EAAE,GAAGL,EAAEc,EAAEb,EAAEK,EAAE,IAAIF,EAAEa,EAAEhB,EAAEK,EAAE,IAAIN,IAAImB,GAAGf,IAAIgB,IAAIC,EAAEE,KAAKrB,EAAEI,EAAEN,EAAEmB,EAAEf,EAAEgB,IAAID,EAAEnB,EAAEoB,EAAEhB,KAAKe,EAAEL,EAAEb,EAAEK,EAAE,IAAIc,EAAEH,EAAEhB,EAAEK,EAAE,IAAIe,EAAEE,KAAKrB,EAAEI,EAAEa,EAAEC,KAAK,OAAOC,EAAEC,OAAO,EAAED,EAAE,KAA4a,SAASG,EAAT,EAAiCrB,GAAE,IAAjBF,EAAiB,EAAvBO,MAAkBN,EAAK,EAAfQ,UAAgB,OAAOP,EAAEF,EAAE,GAAGC,EAAE,GAAG,SAASuB,EAAT,EAAiCtB,GAAE,IAAjBF,EAAiB,EAAvBO,MAAwB,OAAD,EAAfE,UAAyB,GAAGP,EAAEF,EAAE,GAAG,SAASyB,EAAEzB,EAAEC,EAAEC,GAAG,IAAMkB,EAAE,IAAIM,MAAMxB,EAAEmB,QAAQ,IAAInB,EAAEmB,OAAO,OAAOD,EAAE,kBAAWpB,EAAEO,MAAb,GAAMW,EAAN,KAAQC,EAAR,KAAuBpB,EAAEwB,EAAEvB,EAAEE,EAAE,GAAG,IAAIC,EAAEqB,EAAExB,EAAEE,EAAE,GAAG,IAAIkB,EAAE,GAAGnB,EAAEC,EAAE,GAAGH,EAAEI,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAEF,EAAEmB,OAAOjB,IAAI,CAAC,IAAMJ,EAAEE,EAAEE,GAAGL,GAAGC,EAAE,GAAGkB,EAAEf,GAAGH,EAAE,GAAGmB,EAAEC,EAAEhB,GAAGH,EAAED,EAAED,EAAEI,GAAG,OAAOiB,EAAE,SAASO,EAAE3B,EAAEC,EAAEC,GAA+B,IAA5B,IAAMkB,EAAE,IAAIM,MAAMxB,EAAEmB,QAAgBH,EAAE,EAAEA,EAAEhB,EAAEmB,OAAOH,IAAIE,EAAEF,GAAGO,EAAEzB,EAAEC,EAAEC,EAAEgB,IAAI,OAAOE,EAAgmC,SAASQ,EAAE5B,EAAEC,EAAEC,EAAEkB,EAAEF,GAAG,OAAOjB,EAAE4B,OAA53D,SAAW7B,EAAEC,EAAEC,EAAEkB,GAAG,OAAOH,EAAEjB,EAAEE,EAAEkB,EAAEhB,EAAED,EAAEiB,EAAEjB,EAAEJ,EAAEE,GAAs1D6B,CAAE9B,EAAEE,EAAE2B,OAAOT,EAAEF,GAAGjB,EAAE,SAAS8B,EAAE/B,EAAEC,EAAEC,EAAEkB,EAAEF,GAAG,OAAOjB,EAAEgB,EAAEJ,EAAEb,EAAEE,EAAEe,GAAGhB,EAAEuB,EAAER,EAAEhB,EAAEE,EAAEsB,GAAGvB,IAAIC,IAAIkB,IAAInB,EAAEwB,EAAEvB,EAAEuB,GAAGP,IAAIjB,EAAEI,EAAEH,EAAEG,IAAIJ,EAAE,SAAS+B,EAAEhC,EAAEC,EAAEC,EAAEkB,EAAEF,GAAG,IAAMC,EAA/9D,SAAWnB,EAAEC,EAAEC,EAAEkB,GAA8B,IAA3B,IAAMF,EAAE,GAAGC,EAAEjB,EAAEkB,EAAEhB,EAAED,EAAEiB,EAAEjB,EAAEJ,EAAUA,EAAE,EAAEA,EAAEE,EAAEoB,OAAOtB,IAAI,CAAC,IAAMG,EAAEe,EAAEjB,EAAEmB,EAAElB,EAAEF,IAAIG,GAAGA,EAAEmB,QAAQ,GAAGH,EAAEI,KAAKpB,GAAG,OAAOgB,EAAEG,OAAOH,EAAE,KAAs1De,CAAEjC,EAAEE,EAAEgC,MAAMd,EAAEF,GAAG,OAAOC,GAAGlB,EAAEiC,MAAMf,EAAElB,GAAG,KAAK,SAASkC,EAAEnC,EAAEC,EAAEC,EAAEkB,EAAEF,GAAG,IAAMC,EAA15D,SAAWnB,EAAEC,EAAEC,EAAEkB,GAA8B,IAA3B,IAAMF,EAAE,GAAGC,EAAEjB,EAAEkB,EAAEhB,EAAED,EAAEiB,EAAEjB,EAAEJ,EAAUA,EAAE,EAAEA,EAAEE,EAAEoB,OAAOtB,IAAI,CAAC,IAAMG,EAAEe,EAAEjB,EAAEmB,EAAElB,EAAEF,IAAIG,GAAGA,EAAEmB,QAAQ,GAAGH,EAAEI,KAAKpB,GAAG,OAAOgB,EAAEG,OAAOH,EAAE,KAAixDkB,CAAEpC,EAAEE,EAAEmC,MAAMjB,EAAEF,GAAG,OAAOC,GAAGlB,EAAEoC,MAAMlB,EAAElB,GAAG,KAAK,SAASqC,EAAEnB,EAAEpB,GAAG,OAAOoB,GAAGpB,EAAEC,YAAED,GAAGgC,EAAEZ,EAAE,GAAGpB,GAAE,GAAG,GAAIE,YAAEF,GAAGoC,EAAEhB,EAAE,GAAGpB,GAAE,GAAG,GAAIG,YAAEH,GAAGiC,EAAEb,EAAE,GAAGpB,GAAE,GAAG,GAAIqB,YAAErB,GAAG6B,EAAET,EAAE,GAAGpB,GAAE,GAAG,GAAImB,YAAEnB,IAAnkBqB,GAA+kB,EAA7kBF,GAAglB,GAAtlBjB,EAA8kB,IAA5jBU,KAAKE,EAAzBb,EAA8kBmB,GAA1kBjB,EAA+kBH,GAApjBY,MAAMV,EAAEsC,KAAKvB,EAAEhB,EAAEE,EAAEqC,MAAMtC,EAAEuC,KAAK3B,EAAEb,EAAEE,EAAEsC,MAAMvC,EAAEW,KAAKI,EAAEhB,EAAEE,EAAEU,MAAMX,IAAIC,IAAIkB,IAAInB,EAAEwC,KAAKvC,EAAEuC,KAAKxC,EAAEyC,KAAKxC,EAAEwC,MAAMxB,IAAIjB,EAAE0C,KAAKzC,EAAEyC,KAAK1C,EAAE2C,KAAK1C,EAAE0C,OAAO3C,GAAmb,KAAK,KAA5mB,IAAWD,EAAEC,EAAEC,EAAEkB,EAAEF,EAAoxB,SAAS2B,EAAE7C,EAAEC,EAAEC,EAAEkB,EAAEF,GAAG,OAAOjB,EAAE4B,OAAzmD,SAAW7B,EAAEC,EAAEC,EAAEkB,GAAG,OAAOK,EAAEzB,EAAEE,EAAEkB,EAAEhB,EAAED,EAAEiB,EAAEjB,EAAEJ,EAAEE,GAAmkD6C,CAAE9C,EAAEE,EAAE2B,OAAOT,EAAEF,GAAGjB,EAAE,SAAS8C,EAAE/C,EAAEC,EAAEC,EAAEkB,EAAEF,GAAG,OAAOjB,EAAEgB,EAAEM,EAAEvB,EAAEE,EAAEe,GAAGhB,EAAEuB,EAAEA,EAAExB,EAAEE,EAAEsB,GAAGvB,IAAIC,IAAIkB,IAAInB,EAAEwB,EAAEvB,EAAEuB,GAAGP,IAAIjB,EAAEI,EAAEH,EAAEG,IAAIJ,EAAE,SAAS+C,EAAEhD,EAAEC,EAAEC,EAAEkB,EAAEF,GAAG,OAAOjB,EAAEiC,MAA/pD,SAAWlC,EAAEC,EAAEC,EAAEkB,GAAG,OAAOO,EAAE3B,EAAEE,EAAEkB,EAAEhB,EAAED,EAAEiB,EAAEjB,EAAEJ,EAAEE,GAAwnDgD,CAAEjD,EAAEE,EAAEgC,MAAMd,EAAEF,GAAGjB,EAAE,SAASiD,EAAElD,EAAEC,EAAEC,EAAEkB,EAAEF,GAAG,OAAOjB,EAAEoC,MAAvwD,SAAWrC,EAAEC,EAAEC,EAAEkB,GAAG,OAAOO,EAAE3B,EAAEE,EAAEkB,EAAEhB,EAAED,EAAEiB,EAAEjB,EAAEJ,EAAEE,GAAguDkD,CAAEnD,EAAEE,EAAEmC,MAAMjB,EAAEF,GAAGjB,I,sGCAjvHF,E,uFAAE,WAAUqD,KAAKC,qBAAqB,O,mCAAK,SAAsBjC,EAAEP,EAAEd,GAAG,GAAGqD,KAAKC,uBAAuBD,KAAKC,qBAAqBC,SAASC,cAAc,WAAW,gBAAgBnC,EAAEoC,MAAM,YAAYpC,EAAEoC,KAAK,CAAC,MAAavD,IAAEwD,oBAAoBL,KAAKC,qBAAqBjC,EAAEsC,MAAM7C,GAArE,mBAAMX,EAAN,KAAwE,MAAM,CAACyD,KAAK,CAApF,WAA0FC,MAAM,IAAIC,YAAY3D,EAAE4D,QAAQC,KAAI,EAAGC,eAAc,EAAGC,QAAQ,EAAEC,QAAQ,GAAG,GAAG,gBAAgB9C,EAAEoC,MAAM,YAAYpC,EAAEoC,KAAK,CAAC,MAAavD,IAAEkE,oBAAoB/C,EAAEsC,MAAMtC,EAAEgD,KAA7C,mBAAMlE,EAAN,KAAkD,MAAM,CAACyD,KAAK,CAA9D,WAAoEC,MAAM,IAAIC,YAAY3D,EAAE4D,QAAQC,KAAI,EAAGC,eAAc,EAAGC,QAAQ,EAAEC,QAAQ,GAAG,IAAI7D,EAAEF,EAAEa,EAAE,GAAG,kBAAkBI,EAAEoC,MAAM,YAAYpC,EAAEoC,MAAM,gBAAgBpC,EAAEoC,MAAMnD,EAAED,IAAEiE,iBAAiBjD,GAAGJ,EAAEhB,YAAEK,IAAI,iBAAiBe,EAAEoC,MAAMnD,EAAED,IAAEkE,iBAAiBlD,GAAGjB,EAAE,IAAID,IAAEG,EAAEkE,MAAM5D,MAAMN,EAAEkE,MAAM3D,KAAKP,EAAEkE,MAAM/B,KAAKnC,EAAEkE,MAAM5D,KAAKN,EAAEkE,MAAM3D,KAAKP,EAAEkE,MAAMhC,OAAOnB,EAAEoD,iBAAiB,oCAAoCpD,EAAEoD,gBAAgBhB,MAAMnD,EAAED,IAAEqE,qBAAqBrD,GAAGjB,EAAE,IAAID,IAAEG,EAAEkE,MAAM5D,MAAMN,EAAEkE,MAAM3D,KAAKP,EAAEkE,MAAM/B,KAAKnC,EAAEkE,MAAM5D,KAAKN,EAAEkE,MAAM3D,KAAKP,EAAEkE,MAAMhC,QAAQlC,EAAEe,EAAEJ,EAAEhB,YAAEK,IAAIW,IAAIjB,EAAE,CAAC,MAAaoB,YAAEH,GAAf,mBAAMI,EAAN,KAAQlB,EAAR,KAAUD,EAAV,KAAkB,OAAOmB,EAAE,CAACuC,KAAK,CAACzD,EAAED,GAAG2D,MAAM,IAAIC,YAAYzC,EAAE0C,QAAQC,KAAI,EAAGC,eAAc,EAAGC,QAAQ,EAAEC,QAAQ,GAAG,KAAK,MAAiB9D,IAAEsE,UAAUtB,KAAKC,qBAAqBhD,EAAEF,GAAGJ,GAA5D,mBAAM4E,EAAN,KAAQC,EAAR,KAAUrD,EAAV,KAAYC,EAAZ,KAAcN,EAAd,KAA+D,OAAOyD,EAAE,CAAChB,KAAK,CAACiB,EAAErD,GAAGqC,MAAM,IAAIC,YAAYc,EAAEb,QAAQC,KAAI,EAAGC,eAAc,EAAGC,QAAQzC,EAAE0C,QAAQhD,GAAG,O,oCAAK,SAAuBhB,EAAED,EAAEG,EAAEJ,GAAGoD,KAAKC,uBAAuBD,KAAKC,qBAAqBC,SAASC,cAAc,WAAWH,KAAKC,qBAAqBwB,MAAM3E,EAAEkD,KAAKC,qBAAqByB,OAAO7E,EAAE,IAAMkB,EAAEiC,KAAKC,qBAAqB0B,WAAW,MAAM3E,aAAa4E,UAAU7D,EAAE8D,aAAa7E,EAAE,EAAE,IAAIA,EAAE8E,aAAa,QAAf,UAA0BhF,EAA1B,OAAiCE,EAAE8E,aAAa,SAAf,UAA2BjF,EAA3B,OAAkCkB,EAAEgE,UAAU/E,EAAE,EAAE,EAAEF,EAAED,IAAI,IAAmWE,EAA7VJ,EAAEoB,EAAEiE,aAAa,EAAE,EAAElF,EAAED,GAAGI,EAAE,IAAIgF,WAAWtF,EAAEuF,MAAM,GAAGtF,EAAH,qBAAoBA,GAApB,IAAK,gCAAUoB,EAAV,QAAiB,GAAGA,GAAGA,EAAEmE,UAAU,IAAInE,EAAEmE,SAASlE,QAAQD,EAAEoE,UAAU,IAAIpE,EAAEoE,SAASnE,OAAO,CAAC,kBAAeD,EAAEmE,SAAjB,GAAMrF,EAAN,KAAQD,EAAR,KAAUG,EAAV,KAAYJ,EAAZ,mBAAoCoB,EAAEoE,SAAtC,GAA2BrE,EAA3B,KAA6BN,EAA7B,KAA+Bd,EAA/B,KAAiCI,EAAjC,KAA+C,GAAGD,IAAIiB,GAAGlB,IAAIY,GAAGT,IAAIL,GAAGC,IAAIG,EAAE,SAAS,IAAI,IAAIiB,EAAE,EAAEA,EAAEf,EAAEgB,OAAOD,GAAG,EAAElB,IAAIG,EAAEe,IAAInB,IAAII,EAAEe,EAAE,IAAIhB,IAAIC,EAAEe,EAAE,IAAIpB,IAAIK,EAAEe,EAAE,KAAKf,EAAEe,GAAGD,EAAEd,EAAEe,EAAE,GAAGP,EAAER,EAAEe,EAAE,GAAGrB,EAAEM,EAAEe,EAAE,GAAGjB,KAAnS,+BAA4S,IAAI,IAAIiB,EAAE,EAAEA,EAAEf,EAAEgB,OAAOD,GAAG,EAAEjB,EAAEE,EAAEe,EAAE,GAAG,IAAIf,EAAEe,GAAGf,EAAEe,GAAGjB,EAAEE,EAAEe,EAAE,GAAGf,EAAEe,EAAE,GAAGjB,EAAEE,EAAEe,EAAE,GAAGf,EAAEe,EAAE,GAAGjB,EAAE,IAAIa,EAAEX,EAAEsE,EAAEzE,EAAE0E,EAAE3E,EAAQsB,EAA7nE,IAAioE,GAAGoD,GAAGpD,GAAGqD,GAAGrD,EAAE,CAAC,IAAMnB,EAAEuE,EAAEC,EAAExE,EAAE,GAAGuE,EAAEpD,EAAEqD,EAAE9D,KAAKC,MAAMQ,EAAEnB,KAAKwE,EAAErD,EAAEoD,EAAE7D,KAAKC,MAAMQ,EAAEnB,IAAIY,EAAE,IAAIqE,WAAW,EAAEV,EAAEC,GAAG,IAAM5E,EAAE,IAAIyF,kBAAkBzE,EAAE8C,QAAQ1C,YAAEf,EAAEH,EAAED,EAAED,EAAE2E,EAAEC,GAAE,GAAI,MAAM,CAACjB,KAAK,CAACzD,EAAED,GAAG2D,MAAM,IAAIC,YAAY7C,EAAE8C,QAAQC,KAAI,EAAGC,eAAc,EAAGC,QAAQ,EAAEC,QAAQ,O,KAAmBnE,O,2OCAr7EG,E,WAAE,aAAa,oB,iDAAE,SAAcD,EAAEC,GAAGkD,KAAKsC,2BAA2BtC,KAAKsC,yBAAyBpC,SAASC,cAAc,WAAW,IAAMxD,EAAEqD,KAAKsC,yBAAyB1F,EAAED,EAAEgF,WAAW,MAAM3B,KAAKuC,kBAAkB3F,EAAEE,GAAGkD,KAAKwC,WAAW1F,EAAEkD,KAAKyC,UAAU5F,EAAE6F,MAAM,SAAS1C,KAAK2C,WAAW3C,KAAK4C,oBAAoB,IAAM5F,EAAEgD,KAAK6C,iBAAiBjG,EAAEE,GAAG0E,EAAExB,KAAK2C,WAAW3C,KAAKyC,UAAUxE,OAAOtB,EAAE8E,MAAMzE,EAAEL,EAAE+E,OAAOF,EAAExB,KAAK8C,mBAAmBpF,KAAKC,MAAMqC,KAAK2C,WAAW7F,EAAEiG,YAAY/C,KAAKgD,iBAAiBlG,EAAEmG,KAAK1C,KAAKzD,EAAEiG,WAAW/C,KAAKkD,cAAclG,EAAEF,EAAEiG,WAAW/C,KAAKmD,eAAe3B,EAAE1E,EAAEiG,WAAW/C,KAAKoD,UAArpB,SAAWvG,GAAG,qBAAcA,EAAEwG,MAAM,EAAE,GAAGC,WAA3B,YAAyCzG,EAAE,GAA3C,KAAipBkB,CAAEjB,EAAEyG,OAAOvD,KAAKwD,UAAruB,SAAW3G,GAAG,oBAAaA,EAAEwG,MAAM,EAAE,GAAGC,WAA1B,KAAiuBtF,CAAElB,EAAEmG,KAAKM,OAAO,IAAMxG,EAAEiD,KAAK8C,mBAAmB5D,EAAEc,KAAKgD,iBAAiBhD,KAAKuC,kBAAkB3F,EAAEE,GAAG,IAAMyE,EAAm2E,SAAW1E,EAAEmB,GAAG,MAAM,WAAWnB,EAAE,GAAGmB,EAAE,UAAUnB,EAAEmB,EAAE,EAAv5EP,CAAEb,EAAE6G,UAAUzD,KAAKkD,eAAehE,EAAEL,EAAEK,EAAMtB,EAAE,EAAEO,EAAE,EAAEe,EAAE,GAAGc,KAAK0D,WAAW9G,EAAE2E,EAAE1C,EAAEjB,EAAEO,EAAErB,GAAGqB,GAAGU,EAAEjB,GAAG2D,EAA3xB,oBAA4yBvB,KAAKyC,WAAjzB,IAA6xB,gCAAUzE,EAAV,QAA8BpB,EAAE+G,yBAAyB,kBAAkB/G,EAAEwG,UAAU,eAAexG,EAAEgH,SAAS5F,EAAEJ,EAAEO,GAAGvB,EAAE+G,yBAAyB,cAAc/G,EAAEwG,UAAUpD,KAAKoD,UAAUxG,EAAEgH,SAAS5F,EAAEJ,EAAEO,GAAGA,GAAGpB,GAA9+B,8BAAg/B,IAAMe,EAAElB,EAAEoF,aAAa,EAAE,EAAEhC,KAAKkD,cAAclD,KAAKmD,gBAAgBtF,EAAE,IAAIoE,WAAWnE,EAAEoE,MAAM,GAAGpF,EAAE+G,kBAAyB,IAAN,IAAIhH,EAAUmB,EAAE,EAAEA,EAAEH,EAAEI,OAAOD,GAAG,EAAEnB,EAAEgB,EAAEG,EAAE,GAAG,IAAIH,EAAEG,GAAGH,EAAEG,GAAGnB,EAAEgB,EAAEG,EAAE,GAAGH,EAAEG,EAAE,GAAGnB,EAAEgB,EAAEG,EAAE,GAAGH,EAAEG,EAAE,GAAGnB,EAAE,MAAM,CAAC0D,KAAK,CAACP,KAAKkD,cAAclD,KAAKmD,gBAAgB3C,MAAM,IAAIC,YAAY5C,EAAE6C,QAAQC,KAAI,EAAGC,eAAc,EAAGC,QAAQ,EAAEC,QAAQ,K,wBAAG,SAAWjE,EAAEmB,EAAED,EAAEjB,EAAEW,EAAEd,GAAG,IAAMC,EAAEoD,KAAKkD,cAAclG,EAAEgD,KAAKmD,eAAenD,KAAK8D,2BAA2B9D,KAAK8D,yBAAyB5D,SAASC,cAAc,WAAWH,KAAK8D,yBAAyBrC,MAAM7E,EAAEoD,KAAK8D,yBAAyBpC,OAAO1E,EAAE,IAAMwE,EAAExB,KAAK8D,yBAAyB/G,EAAEyE,EAAEG,WAAW,MAAM5E,EAAEgH,UAAU,EAAE,EAAEnH,EAAEI,GAAGgD,KAAKuC,kBAAkBxF,EAAEJ,GAAGI,EAAEqG,UAAUpD,KAAKwD,UAAUzG,EAAEiH,YAAYhE,KAAKwD,UAAU,IAAMtE,EAAEc,KAAKgD,iBAAiB,EAAEjG,EAAEkH,SAAS/E,EAAE,QAAQ,QAAQA,EAAEc,KAAKkE,mBAAmBnH,EAAEiB,EAAED,GAAGiC,KAAKmE,iBAAiBpH,EAAEiB,EAAED,GAAGlB,EAAEuH,YAAYpE,KAAKwC,WAAWS,KAAKM,MAAM,GAAG1G,EAAEkF,UAAUP,EAAE,EAAE,EAAE5E,EAAEI,EAAEF,EAAEW,EAAEb,EAAEI,GAAGH,EAAEuH,YAAY,I,gCAAE,SAAmBvH,EAAEmB,EAAED,GAAG,IAAD,EAAOjB,EAAEkD,KAAK8C,mBAAmBrF,EAAEuC,KAAKgD,iBAAxC,cAAwEhD,KAAKyC,WAA7E,IAAyD,2BAA8B,OAApB7F,EAAoB,sBAAkBD,GAAlB,IAAC,yDAAUG,EAAV,KAAYE,EAAZ,KAAmBH,EAAE+G,SAAShH,EAAEoB,EAAEP,EAAEX,EAAEiB,EAAEN,EAAET,IAA3C,8BAA8Ce,GAAGjB,GAAxI,iC,8BAA2I,SAAiBD,EAAEmB,EAAED,GAAG,IAAD,EAAOjB,EAAEkD,KAAK8C,mBAAmBrF,EAAEuC,KAAKgD,iBAAxC,cAAwEhD,KAAKyC,WAA7E,IAAyD,2BAA8B,CAAsB,IAAtB,IAApB9F,EAAoB,QAAOC,EAAE,EAAEa,EAAmBX,EAAE,EAAEA,EAAnB,EAAuBA,IAAI,CAAC,IAAMW,EAAE,GAAhC,GAA0CX,EAAID,EAAEwH,UAAU5G,EAAEb,EAAEC,EAAEyH,WAAW3H,EAAEqB,EAAED,GAAGA,GAAGjB,GAA/L,iC,+BAAkM,SAAkBkB,EAAED,GAAG,IAAkGpB,EAA5FG,EAAEiB,EAAEwG,KAAK9G,EAAC,UAAIX,EAAEwD,MAAN,YAAexD,EAAE0H,OAAjB,YAA2B3H,YAAEkB,EAAEwC,KAAKxC,EAAEgF,YAAtC,cAAuDjG,EAAE2H,OAAzD,gBAAoF,OAAOzG,EAAEuG,KAAK9G,EAAEO,EAAE0G,aAAa,MAAM3G,EAAE4G,qBAAqB,IAAI,OAAOhI,EAAE,OAAO,MAAM,IAAI,QAAQA,EAAE,QAAQ,MAAM,IAAI,SAASA,EAAE,SAAS,MAAM,QAAQA,EAAE,OAAOqB,EAAEyF,UAAU9G,I,8BAAE,SAAiBE,EAAEmB,GAAG,IAAD,EAAKD,EAAE,EAAP,cAAwBiC,KAAKyC,WAA7B,IAAS,gCAAUhF,EAAV,QAA8BM,EAAEL,KAAKkH,IAAI7G,EAAElB,EAAEgI,YAAYpH,GAAGgE,QAArE,8BAA4E,IAAM3E,EAAEkB,EAAEuG,KAAK,OAAO,WAAWzH,EAAEwD,OAAO,YAAYxD,EAAEwD,OAAO,iBAAiBxD,EAAE0H,SAAS,SAAS1H,EAAE0H,QAAQ,WAAW1H,EAAE0H,SAAS,iBAAiB1H,EAAE0H,QAAQ1H,EAAE0H,OAAO,OAAOzG,GAAG,GAAGlB,EAAEgI,YAAY,KAAKpD,OAAO1D,GAAG,EAAEiC,KAAKwC,WAAWS,KAAK1C,KAAK7C,KAAKC,MAAMI,K,+BAAG,WAAoB,IAAMlB,EAAE,MAAMmD,KAAKwC,WAAWjC,KAAK,OAAO7C,KAAKC,MAAMd,EAAE,EAAEmD,KAAKwC,WAAWS,KAAK1C,U,KAAsF,IAAvB,IAAM5D,EAAE,GAAuBqB,EAAE,EAAEA,EAAE,IAAIA,GAAG,KAAMrB,EAAEuB,KAAK,CAACR,KAAKoH,IAAIpH,KAAKqH,GAAG/G,EAAE,KAAKN,KAAKsH,IAAItH,KAAKqH,GAAG/G,EAAE,OAAsBlB,ICA/vFqB,EAAYH,KAA0CG,IAAIA,EAAE,KAA3C8G,OAAO,SAASjH,EAAEkH,QAAQ,UAAsB,IAAMhG,EAAE,SAAClB,EAAEnB,EAAEC,GAAK,GAAGkB,GAAGA,EAAEmH,WAAW,CAAC,IAAInI,EAAE,GAAGF,EAAE,CAAC,IAAMD,EAAEa,KAAKkH,IAAI9H,EAAEqE,MAAM/B,KAAKtC,EAAEqE,MAAM5D,KAAKT,EAAEqE,MAAM3D,KAAKV,EAAEqE,MAAMhC,MAAMnC,EAAEgB,EAAEmH,WAAW1H,YAAEZ,QAAQG,EAAEgB,EAAEmH,WAAWtI,EAAEuI,cAAc,OAAOpI,EAAE,OAAOgB,GAAGA,EAAEqH,YAAYrH,EAAEqH,YAAY,GAAGC,EAAE,CAACC,KAAK,CAACC,OAAO,CAACrE,MAAM,CAAC/B,KAAK,GAAG7B,KAAK,EAAEC,KAAK,GAAG2B,KAAK,GAAGsG,SAAS,CAAC3G,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,OAAO4G,YAAY,CAAC5G,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,IAAI,CAAC,EAAE,QAAQ6G,QAAQ,CAACxE,MAAM,CAAC/B,KAAK,IAAI7B,KAAK,EAAEC,KAAK,IAAI2B,KAAK,GAAGsG,SAAS,CAAC3G,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,IAAI,KAAK,CAAC,IAAI,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,QAAQ4G,YAAY,CAAC5G,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,KAAK,CAAC,EAAE,UAAU8G,OAAO,CAACJ,OAAO,CAACrE,MAAM,CAAC/B,KAAK,GAAG7B,KAAK,EAAEC,MAAM,EAAE2B,KAAK,GAAGsG,SAAS,CAACxG,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,MAAMyG,YAAY,CAACzG,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,OAAO0G,QAAQ,CAACxE,MAAM,CAAC/B,KAAK,IAAI7B,KAAK,EAAEC,MAAM,EAAE2B,KAAK,GAAGsG,SAAS,CAACxG,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,MAAMyG,YAAY,CAACzG,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,SAAs/P,SAASP,EAAEV,GAAG,OAAOA,EAAE6H,OAAOC,KAAK9H,GAAG,IAAI+H,KAAK,SAAAlJ,GAAC,MAAG,CAACmJ,KAAKnJ,EAAEoJ,MAAMpJ,EAAEuD,KAAK,iBAAiBpC,EAAEnB,GAAG,sBAAsB,0BAA0B,SAASwB,EAAEL,GAAG,KAAKA,GAAGA,EAAEkE,MAAMlE,EAAEkE,KAAKgE,QAAQ,OAAO,KAAK,OAAOlI,EAAEkE,KAAKgE,OAAO9F,MAAM,IAAI,iBAAiB,IAAI,gBAAgB,MAAM,oBAAoB,IAAI,gBAAgB,MAAM,uBAAuB,IAAI,mBAAmB,MAAM,sBAAsB,QAAQ,OAAO,MAAM,SAASL,EAAE/B,EAAEnB,EAAEC,EAAEE,GAAG,IAAIe,EAAEN,EAAiI,MAA5H,mBAAmBO,EAAEmI,cAAcpI,GAAE,EAAGC,EAAEmI,cAActJ,EAAEC,EAAEE,GAAGS,EAAEoB,YAAEb,EAAEoI,IAAIpI,EAAEqI,qBAAwBtI,EAAEC,EAAEmI,aAAa1I,EAAEO,EAAEoI,KAAU,CAACE,YAAY7I,EAAE8I,KAAKxI,GCAt7T,IAAMA,EAAE,I,WDAs3C,WAAYC,EAAEnB,GAAE,oBAACmD,KAAKwG,kBAAkBxI,EAAEgC,KAAKyG,UAAU5J,EAAEmD,KAAK0G,eAAe,IAAIC,IAAI3G,KAAK4G,YAAY,IAAIxI,IAAE4B,KAAK6G,gBAAgB,IAAI/I,EAAEkC,KAAK8G,oBAAoB,IAAIH,I,kGAAI,WAA8B3I,EAAEnB,EAAEG,EAAEe,EAAEN,EAAEd,EAAEC,EAAE2E,GAA5C,eAAAvE,EAAA,6DAA+Ce,EAAEA,IAAIlB,EAAE,MAAMA,EAAEkK,SAAS,sBAAsBjK,YAAED,EAAE4I,UAAU,OAAOpH,EAAEL,GAArH,SAAsIgC,KAAKgH,iBAAiBhJ,EAAEnB,EAAE6B,EAAE7B,EAAEoK,YAAY,KAAKjK,EAAEe,EAAEwD,GAAzL,cAA8HxE,EAA9H,yBAAmMiD,KAAKkH,mBAAmBnK,EAAEF,EAAEkB,EAAEN,EAAEd,EAAEC,IAArO,gD,0IAAwO,WAAuBoB,EAAElB,EAAEE,EAAEe,EAAEN,GAA/B,yBAAAT,EAAA,6DAAwCL,EAAE,GAAGC,EAAEE,EAAE,CAACqK,aAAapJ,EAAEqJ,iBAAiBpH,KAAKwG,kBAAkBa,OAAOvK,GAAG,KAAnH,SAAoIc,YAAEI,EAAEkE,KAAKtF,EAAED,EAAEqD,KAAKyG,WAAtJ,OAAsK,IAAL5J,YAAEY,GAAG,MAAed,EAAf,eAAiB,sBAAPE,EAAV,MAAwCuJ,IAAIhG,MAAM,mBAAmBvD,EAAEuJ,IAAIhG,MAAM,qBAAqBvD,EAAEuJ,IAAIhG,OAAOrD,IAAIA,EAAE,IAAIA,EAAEmB,KAAK8B,KAAKsH,2BAA2BzK,EAAEY,KAAKT,GAAG,SAASH,EAAEuD,MAAM,iBAAiBvD,EAAE0K,MAAM1K,EAAE0K,KAAKC,QAAQ,MAAM,IAAI3K,EAAE0K,KAAKhG,YAAEvE,EAAEH,EAAE0K,KAAK1K,EAAEuJ,IAAIqB,WAA/a,QAAic1K,GAAjc,qCAA0c2K,QAAQC,IAAI5K,GAAtd,gCAAydJ,GAAzd,iD,8IAA2d,WAAiCqB,EAAEnB,GAAnC,iBAAAG,EAAA,yDAA4CF,EAAEkB,EAAEmI,aAAiBnG,KAAK8G,oBAAoBc,IAAI9K,GAA9F,gCAAiHF,kBAAEoB,EAAEoI,IAAIyB,IAAI,CAACC,aAAa,QAAQC,OAAOlL,GAAGA,EAAEkL,SAA/J,OAAwG/K,EAAxG,OAAyKkF,KAAKlC,KAAK8G,oBAAoBkB,IAAIlL,EAAEE,GAA7M,gD,yFAAiN,SAAmBgB,EAAEnB,EAAEC,EAAEE,EAAEe,EAAEN,GAAG,IAAD,EAAOd,EAAE,GAAT,cAA2BqB,GAA3B,IAAY,2BAAiB,KAAPpB,EAAO,QAACI,GAAG,mBAAmBA,EAAEqI,cAAcrI,EAAEqI,YAAYrI,EAAEqI,YAAYxI,EAAEkB,EAAEN,IAAI,IAAMO,EAAEgC,KAAKiI,uBAAuBrL,EAAEC,EAAEC,EAAEE,EAAEe,EAAEN,GAAG,GAAIO,EAAJ,CAAe,IAAIuD,EAAE,EAAEtE,EAAEe,EAAE6C,SAAS,EAAEW,EAAExD,EAAE8C,SAAS,EAAElD,GAAE,EAAGiB,EAAE,EAAET,EAAE,EAAE,GAAG,sBAAsBtB,EAAE,CAAC,IAAMkB,EAAEkB,EAAElC,EAAEJ,EAAE,MAAM,GAAGiC,EAAE9B,YAAEH,EAAEsL,QAAQrL,EAAEkB,EAAEN,GAAGO,GAAG,EAAEI,EAAErB,YAAEH,EAAEuL,QAAQtL,EAAEkB,EAAEN,GAAGO,GAAG,EAAE,WAAWpB,EAAEwD,KAAKmB,EAAExE,YAAEH,EAAEwL,SAASvL,EAAEkB,EAAEN,IAAI,EAAEG,IAAIhB,EAAEyL,iBAAiBzL,EAAEyL,qBAAqB,GAAG,SAASzL,EAAEwD,KAAK,CAAC,GAAGmB,EAAExE,YAAEH,EAAE0L,MAAMzL,EAAEkB,EAAEN,IAAI,OAAE,IAASb,EAAE+H,oBAAoB,OAAO/H,EAAE+H,qBAAqB,IAAI,OAAO1H,GAAG,GAAG,MAAM,IAAI,QAAQA,EAAE,GAAG,MAAM,QAAQA,EAAE,EAAE,QAAG,IAASL,EAAE2L,kBAAkB,OAAO3L,EAAE2L,mBAAmB,IAAI,MAAM/G,EAAE,GAAG,MAAM,IAAI,SAASA,GAAG,GAAG,MAAM,IAAI,WAAWA,GAAG,IAAI,MAAM,QAAQA,EAAE,IAAI,MAAMxD,GAAGrB,EAAEuB,KAAK,CAACoK,MAAM/G,EAAEiH,gBAAgB5K,EAAEiD,QAAQ5D,EAAE6D,QAAQU,EAAE0G,QAAQrJ,EAAEsJ,QAAQ/J,EAAEqK,mBAAmBzK,MAAzzB,8BAA6zB,OAAOgC,KAAK0I,eAAe/L,K,4BAAG,SAAeqB,GAAgG,IAA7F,IAAMnB,EAAEqD,SAASC,cAAc,UAAUrD,EAAED,EAAE8E,WAAW,MAAU3E,EAAE,EAAEe,EAAE,EAAEnB,EAAE,EAAE2E,EAAE,EAAQxE,EAAE,GAAWJ,EAAE,EAAEA,EAAEqB,EAAEC,OAAOtB,IAAI,CAAC,IAAME,EAAEmB,EAAErB,GAAGM,EAAEJ,EAAE4L,mBAAmB,GAAIxL,EAAJ,CAAe,IAAMuE,EAAEvE,EAAEsD,KAAK3C,EAAEf,EAAEqL,QAAQrJ,EAAEhC,EAAEsL,QAAQ/J,EAAEvB,EAAEgE,QAAQ/C,EAAEjB,EAAEiE,QAAQ3C,EAAEtB,EAAE2L,kBAAiB,EAAOtJ,EAAErC,EAAEyL,MAAMhD,EAAE7H,YAAEG,GAAG4D,EAAE,IAAI,GAAGpD,GAAGuK,EAAElL,YAAEoB,GAAG2C,EAAE,IAAI,GAAG1D,GAAGY,EAAE4G,EAAE9D,EAAE,GAAGnD,EAAEsK,EAAEnH,EAAE,GAAG,GAAGtC,EAAE,CAACf,IAAIe,GAAGA,GAAG,IAAMlB,EAAEN,KAAKsH,IAAI9F,EAAExB,KAAKqH,GAAG,KAAKlI,EAAEa,KAAKoH,IAAI5F,EAAExB,KAAKqH,GAAG,KAAKjI,EAAEwI,EAAEzI,EAAE8L,EAAE3K,EAAEhB,EAAEsI,EAAEtH,EAAE2K,EAAE9L,EAAEkB,EAAEuH,EAAEzI,EAAEwB,EAAEL,EAAEP,EAAE6H,EAAEtH,EAAEK,EAAExB,EAAEF,EAAE+B,EAAE7B,EAAEwB,EAAEL,EAAEpB,EAAE8B,EAAEV,EAAEK,EAAExB,EAAE0E,EAAE7C,EAAE7B,EAAE8L,EAAE3K,EAAEjB,EAAE2B,EAAEV,EAAE2K,EAAE9L,EAAEyI,EAAE5H,KAAKkL,IAAI9L,EAAEiB,EAAEpB,EAAE4E,GAAGoH,EAAEjL,KAAKkL,IAAI5L,EAAES,EAAEb,EAAEG,GAAG2B,EAAEhB,KAAKkH,IAAI9H,EAAEiB,EAAEpB,EAAE4E,GAAGlD,EAAEX,KAAKkH,IAAI5H,EAAES,EAAEb,EAAEG,GAAGC,EAAEsI,EAAEtI,EAAEsI,EAAEtI,EAAEe,EAAE4K,EAAE5K,EAAE4K,EAAE5K,EAAEnB,EAAE8B,EAAE9B,EAAE8B,EAAE9B,EAAE2E,EAAElD,EAAEkD,EAAElD,EAAEkD,EAAE,IAAMxB,EAAEjD,EAAE+L,gBAAgB5L,EAAEsD,KAAK,GAAGtD,EAAEsD,KAAK,IAAIR,EAAEmC,KAAK8F,IAAI,IAAI3F,kBAAkBpF,EAAEuD,MAAME,SAAS,IAAM7C,EAAE,CAACqK,QAAQtK,EAAEuK,QAAQtJ,EAAEwJ,gBAAgBlK,EAAEmK,MAAMpJ,EAAE4J,gBAAgB/I,EAAEc,QAAQzC,EAAE0C,QAAQhD,GAAGf,EAAEmB,KAAKL,IAAGhB,EAAE4E,MAAM7E,EAAEI,EAAEH,EAAE6E,OAAOH,EAAExD,EAAiB,IAAf,IAAMd,GAAGD,EAAEwE,EAAED,EAAU5E,EAAE,EAAEA,EAAEI,EAAEkB,OAAOtB,IAAI,CAAC,IAAMqB,EAAEjB,EAAEJ,GAAGE,EAAEmD,KAAK+I,mBAAmB/K,EAAE8K,iBAAiB9L,EAAEgB,EAAE8K,gBAAgBrH,MAAM1D,EAAEC,EAAE8K,gBAAgBpH,OAAO9E,EAAEK,EAAED,GAAG,GAAGgB,EAAE6C,SAASU,EAAEC,EAAEzD,GAAG,GAAGC,EAAE8C,SAAS,GAAG9C,EAAEsK,MAAM,CAAC,IAAMtL,GAAG,IAAIgB,EAAEsK,OAAO5K,KAAKqH,GAAG,IAAIjI,EAAEkM,OAAOlM,EAAEO,UAAUI,YAAEO,EAAEkK,UAAUzK,YAAEO,EAAEmK,UAAUrL,EAAEO,UAAUJ,EAAEuE,GAAG1E,EAAEmM,OAAOjM,GAAGF,EAAEO,WAAWJ,GAAGuE,GAAG1E,EAAEiF,UAAUlF,EAAED,EAAE2E,GAAGzE,EAAEoM,eAAepM,EAAEiF,UAAUlF,EAAED,EAAEa,YAAEO,EAAEkK,SAAS3G,EAAE9D,YAAEO,EAAEmK,UAAU,IAAMvK,EAAE,IAAIjB,IAAE,CAACkB,EAAEZ,EAAEJ,EAAE4E,MAAM,GAAGrD,EAAEoD,EAAE3E,EAAE6E,OAAO,KAAK,MAAM,CAACyH,UAAU,IAAItM,EAAE4E,OAAO,IAAI5E,EAAE6E,OAAO5E,EAAEkF,aAAa,EAAE,EAAEnF,EAAE4E,MAAM5E,EAAE6E,QAAQ5E,EAAE+L,gBAAgB,EAAE,GAAGO,eAAexL,K,gCAAG,SAAmBI,GAAGgC,KAAKqJ,mBAAmBrJ,KAAKqJ,iBAAiBnJ,SAASC,cAAc,WAAW,IAAMtD,EAAEmD,KAAKqJ,iBAAiBvM,EAAED,EAAE8E,WAAW,MAAM,OAAO9E,EAAE4E,MAAMzD,EAAEyD,MAAM5E,EAAE6E,OAAO1D,EAAE0D,OAAO5E,EAAE+E,aAAa7D,EAAE,EAAE,GAAGnB,I,6BAAE,SAAgBmB,EAAEnB,EAAEC,GAAGkD,KAAKqJ,mBAAmBrJ,KAAKqJ,iBAAiBnJ,SAASC,cAAc,WAAW,IAAMnD,EAAEgD,KAAKqJ,iBAAiBtL,EAAEf,EAAE2E,WAAW,MAAM,OAAO3E,EAAEyE,MAAM5E,EAAEG,EAAE0E,OAAO5E,EAAEiB,EAAEgE,UAAU/D,EAAE,EAAE,EAAEnB,EAAEC,GAAG,IAAI2D,YAAY1C,EAAEiE,aAAa,EAAE,EAAEnF,EAAEC,GAAGoF,KAAKxB,U,oCAAQ,SAAuB7D,EAAEC,EAAEE,EAAEe,EAAEN,EAAEd,GAAG,IAAIC,EAAE2E,EAAEtE,EAAEW,EAAE,GAAG,yBAAyBZ,GAAG,wBAAwBA,EAAE,CAAC,IAAMwE,EAAEzD,GAAGA,EAAEuC,MAAMvC,EAAEuC,MAAMnC,EAAE8G,OAAOrH,EAAE,yBAAyBZ,EAAEsI,EAAEM,OAAOpE,GAAG8D,EAAEC,KAAK/D,GAAG,GAAG,SAAS3E,EAAEuD,KAAK,OAAC,GAAG,mBAAmBvD,EAAEuJ,IAAIhG,KAAK,CAAC,GAAG,qBAAqBvD,EAAEuJ,IAAIhG,KAAK,CAAO,IAAApC,EAAEjB,YAAEF,EAAE4E,MAAM3E,EAAEW,EAAEd,GAAhB,EAA8CqD,KAAKsJ,oBAAoBzM,EAAEmB,GAA/ChB,EAA1B,EAAoBwD,MAAczC,EAAlC,EAA4B0D,MAAe7E,EAA3C,EAAoC8E,OAAwC,OAAO1B,KAAKuJ,0BAA0B1M,EAAEG,EAAEe,EAAEnB,EAAEgB,EAAEI,GAAG,OAAO,KAAmBpB,GAAd,EAAwBmD,EAAElD,EAAEC,EAAEW,EAAEd,IAA9B2J,YAAmBrJ,EAArB,EAAgBsJ,KAAoBhF,EAAEvB,KAAKwJ,6BAA6B5M,EAAEgB,QAAQ,GAAG,WAAWf,EAAEuD,KAAK,CAAC,GAAG,qBAAqBvD,EAAEuJ,IAAIhG,KAAK,OAAO,KAAK,GAAG,oBAAoBvD,EAAEuJ,IAAIhG,KAAK,OAAO,KAAKvD,EAAEuJ,IAAI8B,QAAQnL,YAAEF,EAAEqL,QAAQpL,EAAEW,EAAEd,GAAGE,EAAEuJ,IAAI+B,QAAQpL,YAAEF,EAAEsL,QAAQrL,EAAEW,EAAEd,GAAGE,EAAEuJ,IAAIgC,SAASrL,YAAEF,EAAEuL,SAAStL,EAAEW,EAAEd,GAAGE,EAAEuJ,IAAIhF,gBAAgBvE,EAAEuE,gBAA8BxE,EAAGmD,EAAElD,EAAEC,EAAEW,EAAEd,GAAvB2J,YAA2BrJ,EAAEe,YAAEyL,KAAKC,UAAU9M,IAAI0G,WAAW/B,EAAEvB,KAAKwJ,6BAA6B5M,EAAEgB,OAAO,CAAC,GAAG,SAASf,EAAEuD,KAAK,OAAO,KAAK,GAAG,SAASvD,EAAEuD,KAAK,OAAC,GAAG,iBAAiBvD,EAAEuJ,IAAIhG,MAAM,oBAAoBvD,EAAEuJ,IAAIhG,MAAM,qBAAqBvD,EAAEuJ,IAAIhG,MAAM,mBAAmBvD,EAAEuJ,IAAIhG,KAAK,CAAC,IAAqCpD,EAAEe,EAAEwD,EAAnCvD,EAAEnB,EAAEuJ,IAAI7F,MAAM1D,EAAEuJ,IAAI1E,OAAiB,GAAG,qBAAqB7E,EAAEuJ,IAAIhG,MAAM,mBAAmBvD,EAAEuJ,IAAIhG,KAA7D,OAA8FJ,KAAKsJ,oBAAoBzM,EAAEmB,GAA/ChB,EAA1E,EAAoEwD,MAAczC,EAAlF,EAA4E0D,MAAeF,EAA3F,EAAoFG,WAA6C,OAAyB3B,EAAElD,EAAEC,EAAEW,EAAEd,GAAlBC,EAAf,EAAG0J,YAAmBrJ,EAAtB,EAAiBsJ,KAAoB,IAAMvI,EAAEgC,KAAK4G,YAAY+C,sBAAsB/M,EAAE,EAAEoD,KAAKyG,WAAWzJ,EAAEgB,EAAEwC,MAAMzC,EAAEC,EAAEuC,KAAK,GAAGgB,EAAEvD,EAAEuC,KAAK,GAAG,OAAOP,KAAKuJ,0BAA0B1M,EAAEG,EAAEe,EAAEwD,EAAE3D,EAAE,MAAM,GAAG,iBAAiBf,EAAEuJ,IAAIhG,KAAK,OAAO,KAAmBxD,GAAd,EAAwBmD,EAAElD,EAAEC,EAAEW,EAAEd,IAA9B2J,YAAmBrJ,EAArB,EAAgBsJ,KAAoBhF,EAAEvB,KAAKwJ,6BAA6B5M,EAAEgB,SAAS,CAAC,GAAG,SAASf,EAAEuD,KAAK,OAAOxC,EAAEoC,KAAK4J,uBAAuB/M,EAAEC,EAAEiB,EAAEN,EAAEd,GAAjE,MAA8FoD,EAAElD,EAAEC,EAAEW,EAAEd,GAAlBC,EAApF,EAAwE0J,YAAmBrJ,EAA3F,EAAsFsJ,KAAoB,IAAMvI,EAAEkB,EAAEnB,EAAElB,EAAE,MAAM,GAAG,qBAAqBA,EAAEuJ,IAAIhG,KAAK,CAAO,IAAApD,EAAED,YAAEF,EAAE0D,KAAKzD,EAAEW,EAAEd,GAAGqB,EAAlB,EAA+CgC,KAAKsJ,oBAAoBzM,EAAEG,GAAG,OAAOY,EAAE,CAAC4C,MAAvF,EAAqBA,MAA0ED,KAAK,CAApG,EAA6BkB,MAA7B,EAAqCC,QAAqEf,KAAI,EAAGC,eAAc,EAAGC,QAAQhE,EAAEgN,YAAYhN,EAAEgN,YAAYhM,EAAE,EAAEiD,QAAQjE,EAAEgN,YAAYhN,EAAEgN,YAAYzL,EAAE,GAAKoD,YAAE5E,EAAEoB,EAAE,CAAC8L,sBAAqB,IAAKvI,EAAE3E,EAAEK,GAAGD,EAAEe,IAAId,GAAGwM,KAAKC,UAAU3L,IAAI,IAAMc,EAAEmB,KAAK0G,eAAe,OAAO7H,EAAEkL,IAAI9M,GAAG4B,EAAE+I,IAAI3K,IAAIW,EAAEoC,KAAK4G,YAAY+C,sBAAsBpI,EAAEyI,OAAOC,kBAAkB,EAAEjK,KAAKyG,WAAW5H,EAAEmJ,IAAI/K,EAAEW,GAAGA,K,oCAAG,SAAuBI,EAAEnB,EAAEC,EAAEE,EAAEe,GAAG,IAAMN,EAAEyB,EAAEpC,EAAEkB,EAAE,MAAMrB,EAAEI,YAAEiB,EAAEuJ,KAAK1K,EAAEG,EAAEe,GAAG,IAAIpB,GAAG,IAAIA,EAAEsB,OAAO,OAAO,KAAK,IAAMrB,EAAEG,YAAEiB,EAAEkM,SAASrN,EAAEG,EAAEe,GAAGwD,EAAExE,YAAEiB,EAAEsC,MAAMzD,EAAEG,EAAEe,GAAGyD,EAAEzE,YAAEiB,EAAEwG,OAAO3H,EAAEG,EAAEe,GAAGH,EAAEb,YAAEiB,EAAEmM,WAAWtN,EAAEG,EAAEe,GAAGc,EAAE9B,YAAEiB,EAAEuC,KAAK1D,EAAEG,EAAEe,GAAGN,EAAEW,EAAErB,YAAEiB,EAAE2G,oBAAoB9H,EAAEG,EAAEe,GAAGD,EAAEf,YAAEiB,EAAEuK,kBAAkB1L,EAAEG,EAAEe,GAAGI,EAAElB,YAAEF,YAAEiB,EAAEuF,MAAM1G,EAAEG,EAAEe,IAAIuH,EAAErI,YAAEF,YAAEiB,EAAEoM,aAAavN,EAAEG,EAAEe,IAAI4K,EAAE,CAACpF,MAAMpF,EAAEoC,KAAK1B,EAAE8F,oBAAoBvG,EAAEmK,kBAAkBzK,EAAEyG,KAAK,CAACE,OAAO7H,EAAE0D,MAAMiB,EAAEiD,OAAOhD,EAAE2I,WAAWvM,GAAGqF,KAAK,CAAC1C,KAAKxD,YAAEiB,EAAEqM,YAAYxN,EAAEG,EAAEe,IAAI,EAAEwF,MAAM+B,EAAEhF,MAAMiB,GAAGwB,WAAW,EAAEc,mBAAmB7D,KAAKyG,WAAW,OAAOzG,KAAK6G,gBAAgByD,cAAc3N,EAAEgM,K,uCAAG,SAA0B3K,EAAEnB,EAAEC,EAAEH,EAAEC,EAAE2E,GAAG,IAAMxE,EAAEmD,SAASC,cAAc,UAAUlD,EAAEF,EAAE4E,WAAW,MAAM5E,EAAE2E,OAAOjE,YAAEC,KAAKkH,IAAIlH,KAAK6M,IAAI3N,EAAEuE,MAAM3D,KAAKZ,EAAEuE,MAAMhC,MAAMoC,IAAIxE,EAAE0E,MAAMhE,YAAEC,KAAK6M,IAAI3N,EAAEuE,MAAM/B,KAAKxC,EAAEuE,MAAM5D,OAAO,IAAMiE,EAAEvE,EAAE4L,gBAAgB/L,EAAEH,GAAG6E,EAAEU,KAAK8F,IAAI,IAAI3F,kBAAkBxF,EAAE6D,SAAS,IAAM9C,EAAEoC,KAAK+I,mBAAmBvH,GAAG3C,EAAE5B,EAAEuN,cAAc5M,EAAE,UAAUQ,EAAEV,KAAKoH,MAAM9G,EAAEoI,IAAIgC,UAAU,GAAG1K,KAAKqH,GAAG,KAAKjH,EAAEJ,KAAKsH,MAAMhH,EAAEoI,IAAIgC,UAAU,GAAG1K,KAAKqH,GAAG,KAAKlG,EAAE4L,aAAa,CAACC,IAAItM,EAAEuM,IAAI7M,EAAE8M,KAAK9M,EAAE+M,IAAIzM,EAAE0M,IAAIrN,YAAEO,EAAEoI,IAAI8B,UAAU,EAAE6C,IAAItN,YAAEO,EAAEoI,IAAI+B,UAAU,IAAI,IAA0BjJ,EAAEoG,EAAEqD,EAAxBxK,EAAEvB,EAAE8I,YAAsB1I,YAAEmB,IAAIe,EAAEf,EAAEW,MAAM7B,EAAEmG,UAAUvE,EAAEyG,EAAErI,EAAEsI,KAAKoD,EAAE,CAAC,YAAY5K,YAAEI,KAAKe,EAAEf,EAAEc,MAAMhC,EAAE+G,YAAYnF,EAAE5B,EAAEoH,UAAU9C,EAAE+D,EAAErI,EAAE2I,OAAO1G,EAAE,GAAG,GAAG,GAAGnC,EAAE2E,OAAO,EAAExC,EAAE,GAAG,GAAG,GAAGnC,EAAE2E,OAAO,GAAGzE,EAAE+N,YAA1qB,oBAAqsB9L,GAArsB,IAAsrB,2BAAiB,KAAPlC,EAAO,QAAOgB,EAAEhB,EAAEA,EAAEiB,OAAO,EAAE,GAAGD,EAAE,EAAE,CAAC,IAAInB,EAAEG,EAAE,GAAGC,EAAEgO,OAAOxN,YAAEZ,EAAE,IAAIY,YAAEZ,EAAE,KAAK,IAAI,IAAIC,EAAE,EAAEA,EAAEkB,IAAIlB,EAAED,EAAEG,EAAEF,GAAGG,EAAEiO,OAAOzN,YAAEZ,EAAE,IAAIY,YAAEZ,EAAE,KAAKI,EAAEkO,cAAj0B,8BAA80B7F,EAAE8F,MAAMnO,EAAE0L,GAAG,IAAMjK,EAAEzB,EAAE+E,aAAa,EAAE,EAAEjF,EAAE0E,MAAM1E,EAAE2E,QAAQrD,EAAE,IAAI4D,WAAWvD,EAAEwD,MAAM,MAAM,CAAC3B,KAAK,CAACxD,EAAE0E,MAAM1E,EAAE2E,QAAQlB,MAAM,IAAIC,YAAYpC,EAAEqC,QAAQC,KAAI,EAAGC,eAAc,EAAGC,QAAQ,EAAEC,QAAQ,K,iCAAG,SAAoB9C,EAAEnB,GAAG,IAAMC,EAAEkD,KAAK8G,oBAAoBc,IAAI5J,EAAEmI,cAAc,IAAIrJ,EAAE,OAAO,KAAK,IAAME,EAAEF,EAAE4E,OAAO5E,EAAE2E,MAAM1D,EAAElB,EAAEG,EAAE,EAAES,YAAEZ,GAAGY,YAAEZ,GAAGG,EAAEF,EAAE2E,MAAM9E,EAAEE,EAAEG,EAAE,EAAES,YAAEZ,GAAGG,EAAES,YAAEZ,GAAGC,EAAE4E,OAAO,MAAM,CAAClB,MAAMR,KAAKqL,gBAAgBvO,EAAEiB,EAAEpB,GAAG8E,MAAM1D,EAAE2D,OAAO/E,K,0CAAG,SAA6BqB,EAAEnB,GAAG,IAAMC,EAAEE,YAAEH,EAAE4I,UAAU,mBAAmB,gBAAgB,MAAM,CAACrF,KAAK,kBAAkBe,MAAMtE,EAAEsE,MAAMmK,eAAe,CAAC,CAAClL,KAAK,mBAAmBqF,SAAS5I,EAAE4I,SAASS,OAAO,CAAC9F,KAAKtD,EAAEyO,aAAa,CAACvN,W,KCAn1S,CAAM,MAAK,GAAIrB,EAAE,I,SAAmBC,E,8EAAf,WAAiBG,GAAjB,+DAAAC,EAAA,6DAAmBJ,EAAnB,+BAAqB,GAAea,EAA8Bb,EAAnC2D,KAAegB,EAAoB3E,EAA5B4O,QAAevO,EAAaL,EAAlB6O,KAAe3O,EAAGF,EAAX8O,QAAatN,EAAExB,EAAE+O,YAAY/O,EAAWsC,EAAqCd,EAA7CwN,QAAmBpK,EAA0BpD,EAAnCyN,SAAwB1N,EAAWC,EAAxB+I,aAAqBrJ,EAAGM,EAATkC,MAAWzB,EAAEb,YAAEjB,IAAGa,EAAEF,KAAKkL,IAAI,MAAMnL,EAAEA,EAAEoB,EAAE,MAAM0C,EAAEA,EAAE1E,YAAEF,OAAQkC,IAAI9B,EAAEA,EAAE+O,QAAQ9O,YAAED,EAAEa,EAAE,CAACkM,sBAAqB,KAAUxE,EAAE,EAAEvI,GAAGA,EAAEmF,MAAMnF,EAAEmF,KAAKgE,QAAQ,mBAAmBnJ,EAAEmF,KAAKgE,OAAO9F,OAAOkF,EAAE,GAAtT,SAAuUvH,EAAEgO,wBAAwBhP,EAAEmC,EAAEsC,EAAErD,EAAE,CAACkH,YAAYC,EAAEhF,MAAMxC,IAA9X,cAA+T+B,EAA/T,QAAkYmM,EAAE9L,SAASC,cAAc,WAAYsB,MAAM5B,EAAEsJ,UAAU1H,MAAMuK,EAAEtK,OAAO7B,EAAEsJ,UAAUzH,OAAOsK,EAAErK,WAAW,MAAME,aAAahC,EAAEsJ,UAAU,EAAE,GAAOR,EAAEqD,EAAEvK,MAAM6D,EAAE2G,EAAED,EAAEtK,OAAO4D,EAAK,MAAM7H,GAAI,OAAO,MAAMb,OAAE,EAAOA,EAAEO,UAAS,MAAMP,OAAE,EAAOA,EAAEO,SAAqBwL,GAAN9L,EAAE8L,EAAEsD,IAAO,EAAEvO,KAAKwO,KAAKtO,EAAEf,GAAGe,EAAEqO,EAAEpP,GAAG,EAAEe,EAAEF,KAAKwO,KAAKtO,EAAEf,IAAS6B,EAAE,IAAIyN,MAAMxD,EAAEsD,GAAjsB,mBAA2sBvN,EAAE0N,IAAIJ,EAAEK,YAAY,MAAMvP,IAAI4B,EAAE4B,MAAMoL,QAAR,UAAmB5O,IAAKG,GAAGA,EAAEqP,YAAY5N,GAAGA,IAArxB,6C","file":"static/js/66.c5057992.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isPoint as n,isPolyline as t,isPolygon as r,isMultipoint as e,isExtent as u}from\"./jsonUtils.js\";function i(n){return n&&\"upperLeft\"===n.originPosition}const o=(n,t,r)=>[t,r],l=(n,t,r)=>[t,r,n[2]],a=(n,t,r)=>[t,r,n[2],n[3]];function m(n){if(!n)return null;return{originPosition:\"upper-left\"===n.originPosition?\"upperLeft\":\"lower-left\"===n.originPosition?\"lowerLeft\":n.originPosition,scale:n.tolerance?[n.tolerance,n.tolerance]:[1,1],translate:n.extent?[n.extent.xmin,n.extent.ymax]:[0,0]}}function c(n,t){if(n===t||null==n&&null==t)return!0;if(null==n||null==t)return!1;let r,e,u,o,l,a;return i(n)?(r=n.translate[0],e=n.translate[1],u=n.scale[0]):(r=n.extent.xmin,e=n.extent.ymax,u=n.tolerance),i(t)?(o=t.translate[0],l=t.translate[1],a=t.scale[0]):(o=t.extent.xmin,l=t.extent.ymax,a=t.tolerance),r===o&&e===l&&u===a}function s({scale:n,translate:t},r){return Math.round((r-t[0])/n[0])}function f({scale:n,translate:t},r){return Math.round((t[1]-r)/n[1])}function x(n,t,r){const e=[];let u,i,o,l;for(let a=0;a<r.length;a++){const m=r[a];a>0?(o=s(n,m[0]),l=f(n,m[1]),o===u&&l===i||(e.push(t(m,o-u,l-i)),u=o,i=l)):(u=s(n,m[0]),i=f(n,m[1]),e.push(t(m,u,i)))}return e.length>0?e:null}function h(n,t,r){return t[0]=s(n,r[0]),t[3]=f(n,r[1]),t[2]=s(n,r[2]),t[1]=f(n,r[3]),t}function I(n,t,r,e){return x(n,r?e?a:l:e?l:o,t)}function g(n,t,r,e){const u=[],i=r?e?a:l:e?l:o;for(let o=0;o<t.length;o++){const r=x(n,i,t[o]);r&&r.length>=3&&u.push(r)}return u.length?u:null}function N(n,t,r,e){const u=[],i=r?e?a:l:e?l:o;for(let o=0;o<t.length;o++){const r=x(n,i,t[o]);r&&r.length>=2&&u.push(r)}return u.length?u:null}function p({scale:n,translate:t},r){return r*n[0]+t[0]}function y({scale:n,translate:t},r){return t[1]-r*n[1]}function z(n,t,r){const e=new Array(r.length);if(!r.length)return e;const[u,i]=n.scale;let o=p(n,r[0][0]),l=y(n,r[0][1]);e[0]=t(r[0],o,l);for(let a=1;a<r.length;a++){const n=r[a];o+=n[0]*u,l-=n[1]*i,e[a]=t(n,o,l)}return e}function T(n,t,r){const e=new Array(r.length);for(let u=0;u<r.length;u++)e[u]=z(n,t,r[u]);return e}function M(n,t,r){return r?(t[0]=p(n,r[0]),t[1]=y(n,r[3]),t[2]=p(n,r[2]),t[3]=y(n,r[1]),t):[p(n,t[0]),y(n,t[3]),p(n,t[2]),y(n,t[1])]}function E(n,t,r,e){return z(n,r?e?a:l:e?l:o,t)}function P(n,t,r,e){return T(n,r?e?a:l:e?l:o,t)}function b(n,t,r,e){return T(n,r?e?a:l:e?l:o,t)}function F(n,t,r){let[e,u]=r[0],i=Math.min(e,t[0]),o=Math.min(u,t[1]),l=Math.max(e,t[2]),a=Math.max(u,t[3]);for(let m=1;m<r.length;m++){const[n,t]=r[m];e+=n,u+=t,n<0&&(i=Math.min(i,e)),n>0&&(l=Math.max(l,e)),t<0?o=Math.min(o,u):t>0&&(a=Math.max(a,u))}return n[0]=i,n[1]=o,n[2]=l,n[3]=a,n}function V(n,t){if(!t.length)return null;n[0]=n[1]=Number.POSITIVE_INFINITY,n[2]=n[3]=Number.NEGATIVE_INFINITY;for(let r=0;r<t.length;r++)F(n,n,t[r]);return n}function Y(n){const t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return F(t,t,n)}function _(n){return V([0,0,0,0],n)}function A(n){return V([0,0,0,0],n)}function w(n,t,r,e,u){return t.xmin=s(n,r.xmin),t.ymin=f(n,r.ymin),t.xmax=s(n,r.xmax),t.ymax=f(n,r.ymax),t!==r&&(e&&(t.zmin=r.zmin,t.zmax=r.zmax),u&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}function G(n,t,r,e,u){return t.points=I(n,r.points,e,u),t}function L(n,t,r,e,u){return t.x=s(n,r.x),t.y=f(n,r.y),t!==r&&(e&&(t.z=r.z),u&&(t.m=r.m)),t}function O(n,t,r,e,u){const i=g(n,r.rings,e,u);return i?(t.rings=i,t):null}function S(n,t,r,e,u){const i=N(n,r.paths,e,u);return i?(t.paths=i,t):null}function d(i,o){return i&&o?n(o)?L(i,{},o,!1,!1):t(o)?S(i,{},o,!1,!1):r(o)?O(i,{},o,!1,!1):e(o)?G(i,{},o,!1,!1):u(o)?w(i,{},o,!1,!1):null:null}function j(n,t,r,e,u){return t.xmin=p(n,r.xmin),t.ymin=y(n,r.ymin),t.xmax=p(n,r.xmax),t.ymax=y(n,r.ymax),t!==r&&(e&&(t.zmin=r.zmin,t.zmax=r.zmax),u&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}function U(n,t,r,e,u){return t.points=E(n,r.points,e,u),t}function k(n,t,r,e,u){return t.x=p(n,r.x),t.y=y(n,r.y),t!==r&&(e&&(t.z=r.z),u&&(t.m=r.m)),t}function q(n,t,r,e,u){return t.rings=b(n,r.rings,e,u),t}function v(n,t,r,e,u){return t.paths=P(n,r.paths,e,u),t}export{c as equals,F as getQuantizedBoundsCoordsArray,V as getQuantizedBoundsCoordsArrayArray,_ as getQuantizedBoundsPaths,Y as getQuantizedBoundsPoints,A as getQuantizedBoundsRings,h as quantizeBounds,w as quantizeExtent,d as quantizeGeometry,G as quantizeMultipoint,N as quantizePaths,L as quantizePoint,I as quantizePoints,O as quantizePolygon,S as quantizePolyline,g as quantizeRings,s as quantizeX,f as quantizeY,m as toQuantizationTransform,M as unquantizeBounds,z as unquantizeCoordsArray,T as unquantizeCoordsArrayArray,j as unquantizeExtent,U as unquantizeMultipoint,P as unquantizePaths,k as unquantizePoint,E as unquantizePoints,q as unquantizePolygon,v as unquantizePolyline,b as unquantizeRings,p as unquantizeX,y as unquantizeY};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{resampleHermite as e}from\"./utils.js\";import r from\"./Rect.js\";import{SymbolHelper as t,CIMSymbolHelper as a}from\"./CIMSymbolHelper.js\";import{getSDFInfo as n,buildSDF as i}from\"./SDFHelper.js\";const s=512;class o{dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(e,s,o){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),\"simple-fill\"===e.type||\"esriSFS\"===e.type){const[r,a,n]=t.rasterizeSimpleFill(this._rasterizationCanvas,e.style,s);return{size:[a,n],image:new Uint32Array(r.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if(\"simple-line\"===e.type||\"esriSLS\"===e.type){const[r,a,n]=t.rasterizeSimpleLine(e.style,e.cap);return{size:[a,n],image:new Uint32Array(r.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let m,l,f;if(\"simple-marker\"===e.type||\"esriSMS\"===e.type||\"line-marker\"===e.type?(m=a.fromSimpleMarker(e),f=n(m)):\"CIMHatchFill\"===e.type?(m=a.fromCIMHatchFill(e),l=new r(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):e.markerPlacement&&\"CIMMarkerPlacementInsidePolygon\"===e.markerPlacement.type?(m=a.fromCIMInsidePolygon(e),l=new r(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):(m=e,f=n(m)),f&&!o){const[e,r,t]=i(f);return e?{size:[r,t],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[c,h,p,y,u]=a.rasterize(this._rasterizationCanvas,m,l,!o);return c?{size:[h,p],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:y,anchorY:u}:null}rasterizeImageResource(r,t,a,n){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),this._rasterizationCanvas.width=r,this._rasterizationCanvas.height=t;const i=this._rasterizationCanvas.getContext(\"2d\");a instanceof ImageData?i.putImageData(a,0,0):(a.setAttribute(\"width\",`${r}px`),a.setAttribute(\"height\",`${t}px`),i.drawImage(a,0,0,r,t));const o=i.getImageData(0,0,r,t),m=new Uint8Array(o.data);if(n)for(const e of n)if(e&&e.oldColor&&4===e.oldColor.length&&e.newColor&&4===e.newColor.length){const[r,t,a,n]=e.oldColor,[i,s,o,l]=e.newColor;if(r===i&&t===s&&a===o&&n===l)continue;for(let e=0;e<m.length;e+=4)r===m[e]&&t===m[e+1]&&a===m[e+2]&&n===m[e+3]&&(m[e]=i,m[e+1]=s,m[e+2]=o,m[e+3]=l)}let l;for(let e=0;e<m.length;e+=4)l=m[e+3]/255,m[e]=m[e]*l,m[e+1]=m[e+1]*l,m[e+2]=m[e+2]*l;let f=m,c=r,h=t;const p=s;if(c>=p||h>=p){const a=c/h;a>1?(c=p,h=Math.round(p/a)):(h=p,c=Math.round(p*a)),f=new Uint8Array(4*c*h);const n=new Uint8ClampedArray(f.buffer);e(m,r,t,n,c,h,!1)}return{size:[r,t],image:new Uint32Array(f.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}export default o;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{pt2px as t}from\"../../core/screenUtils.js\";function e(t){return`rgb(${t.slice(0,3).toString()})`}function i(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}class r{constructor(){}rasterizeText(t,r){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement(\"canvas\"));const o=this._textRasterizationCanvas,n=o.getContext(\"2d\");this.setFontProperties(n,r),this.parameters=r,this.textLines=t.split(/\\r?\\n/),this.lineHeight=this.computeLineHeight();const a=this.computeTextWidth(n,r),h=this.lineHeight*this.textLines.length;o.width=a,o.height=h,this.renderedLineHeight=Math.round(this.lineHeight*r.pixelRatio),this.renderedHaloSize=r.halo.size*r.pixelRatio,this.renderedWidth=a*r.pixelRatio,this.renderedHeight=h*r.pixelRatio,this.fillStyle=i(r.color),this.haloStyle=e(r.halo.color);const l=this.renderedLineHeight,d=this.renderedHaloSize;this.setFontProperties(n,r);const c=s(n.textAlign,this.renderedWidth)+d,g=d;let f=0,p=0;d>0&&this.renderHalo(n,c,g,f,p,r),p+=g,f+=c;for(const e of this.textLines)n.globalCompositeOperation=\"destination-out\",n.fillStyle=\"rgb(0, 0, 0)\",n.fillText(e,f,p),n.globalCompositeOperation=\"source-over\",n.fillStyle=this.fillStyle,n.fillText(e,f,p),p+=l;const u=n.getImageData(0,0,this.renderedWidth,this.renderedHeight),x=new Uint8Array(u.data);if(r.premultiplyColors){let t;for(let e=0;e<x.length;e+=4)t=x[e+3]/255,x[e]=x[e]*t,x[e+1]=x[e+1]*t,x[e+2]=x[e+2]*t}return{size:[this.renderedWidth,this.renderedHeight],image:new Uint32Array(x.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}renderHalo(t,e,i,r,s,o){const n=this.renderedWidth,a=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement(\"canvas\")),this._haloRasterizationCanvas.width=n,this._haloRasterizationCanvas.height=a;const h=this._haloRasterizationCanvas,l=h.getContext(\"2d\");l.clearRect(0,0,n,a),this.setFontProperties(l,o),l.fillStyle=this.haloStyle,l.strokeStyle=this.haloStyle;const d=this.renderedHaloSize<3;l.lineJoin=d?\"miter\":\"round\",d?this.renderHaloEmulated(l,e,i):this.renderHaloNative(l,e,i),t.globalAlpha=this.parameters.halo.color[3],t.drawImage(h,0,0,n,a,r,s,n,a),t.globalAlpha=1}renderHaloEmulated(t,e,i){const r=this.renderedLineHeight,s=this.renderedHaloSize;for(const n of this.textLines){for(const[r,a]of o)t.fillText(n,e+s*r,i+s*a);i+=r}}renderHaloNative(t,e,i){const r=this.renderedLineHeight,s=this.renderedHaloSize;for(const o of this.textLines){const n=2*s,a=5,h=.1;for(let r=0;r<a;r++){const s=1-(a-1)*h+r*h;t.lineWidth=s*n,t.strokeText(o,e,i)}i+=r}}setFontProperties(e,i){const r=i.font,s=`${r.style} ${r.weight} ${t(i.size*i.pixelRatio)}px ${r.family}, sans-serif`;let o;switch(e.font=s,e.textBaseline=\"top\",i.horizontalAlignment){case\"left\":o=\"left\";break;case\"right\":o=\"right\";break;case\"center\":o=\"center\";break;default:o=\"left\"}e.textAlign=o}computeTextWidth(t,e){let i=0;for(const s of this.textLines)i=Math.max(i,t.measureText(s).width);const r=e.font;return(\"italic\"===r.style||\"oblique\"===r.style||\"string\"==typeof r.weight&&(\"bold\"===r.weight||\"bolder\"===r.weight)||\"number\"==typeof r.weight&&r.weight>600)&&(i+=.3*t.measureText(\"A\").width),i+=2*this.parameters.halo.size,Math.round(i)}computeLineHeight(){const t=1.275*this.parameters.size;return Math.round(t+2*this.parameters.halo.size)}}function s(t,e){return\"center\"===t?.5*e:\"right\"===t?e:0}const o=[];{const t=16;for(let e=0;e<360;e+=360/t)o.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}export default r;export{r as TextRasterizer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{numericHash as e}from\"../../core/string.js\";import{throwIfAborted as t}from\"../../core/promiseUtils.js\";import{getJsonType as r,isPolygon as a,isPolyline as i}from\"../../geometry/support/jsonUtils.js\";import{pt2px as s}from\"../../core/screenUtils.js\";import o from\"../support/Symbol3DAnchorPosition2D.js\";import n from\"../../request.js\";import{createLabelOverrideFunction as c,evaluateValueOrFunction as l,colorToArray as m}from\"./utils.js\";import{scaleCIMMarker as h}from\"../support/cimSymbolUtils.js\";import{analyzeCIMSymbol as f,analyzeCIMResource as g}from\"./cimAnalyzer.js\";import y from\"./Rasterizer.js\";import{TextRasterizer as u}from\"./TextRasterizer.js\";var p;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(p||(p={}));const d=(e,t,r)=>{if(e&&e.targetSize){let a;if(r){const t=Math.max(r.frame.xmax-r.frame.xmin,r.frame.ymax-r.frame.ymin);a=e.targetSize/s(t)}else a=e.targetSize/t.referenceSize;return a}return e&&e.scaleFactor?e.scaleFactor:1},M={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class C{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._rasterizer=new y,this._textRasterizer=new u,this._pictureMarkerCache=new Map}async rasterizeCIMSymbolAsync(e,t,a,i,s,o,n,c){i=i||(t?null!=t.centroid?\"esriGeometryPolygon\":r(t.geometry):null)||z(e);const l=await this.analyzeCIMSymbol(e,t?I(t.attributes):null,a,i,c);return this.rasterizeCIMSymbol(l,t,i,s,o,n)}async analyzeCIMSymbol(e,r,a,i,s){const o=[],n=r?{geometryType:i,spatialReference:this._spatialReference,fields:r}:null;let l;await f(e.data,n,o,this._avoidSDF),t(s);for(const t of o)\"CIMPictureMarker\"!==t.cim.type&&\"CIMPictureFill\"!==t.cim.type&&\"CIMPictureStroke\"!==t.cim.type||(l||(l=[]),l.push(this.fetchPictureMarkerResource(t,s))),a&&\"text\"===t.type&&\"string\"==typeof t.text&&t.text.indexOf(\"[\")>-1&&(t.text=c(a,t.text,t.cim.textCase));return l&&await Promise.all(l),o}async fetchPictureMarkerResource(e,t){const r=e.materialHash;if(!this._pictureMarkerCache.get(r)){const a=(await n(e.cim.url,{responseType:\"image\",signal:t&&t.signal})).data;this._pictureMarkerCache.set(r,a)}}rasterizeCIMSymbol(e,t,r,a,i,s){const o=[];for(const n of e){a&&\"function\"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,s));const e=this._getRasterizedResource(n,t,r,a,i,s);if(!e)continue;let c=0,m=e.anchorX||0,h=e.anchorY||0,f=!1,g=0,y=0;if(\"esriGeometryPoint\"===r){const e=d(a,n,null);if(g=l(n.offsetX,t,i,s)*e||0,y=l(n.offsetY,t,i,s)*e||0,\"marker\"===n.type)c=l(n.rotation,t,i,s)||0,f=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=l(n.angle,t,i,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":m=-.5;break;case\"right\":m=.5;break;default:m=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":h=.5;break;case\"bottom\":h=-.5;break;case\"baseline\":h=-.25;break;default:h=0}}}null!=e&&o.push({angle:c,rotateClockWise:f,anchorX:m,anchorY:h,offsetX:g,offsetY:y,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),r=t.getContext(\"2d\");let a=0,i=0,n=0,c=0;const l=[];for(let o=0;o<e.length;o++){const t=e[o],m=t.rasterizedResource;if(!m)continue;const h=m.size,f=t.offsetX,g=t.offsetY,y=t.anchorX,u=t.anchorY,p=t.rotateClockWise||!1;let d=t.angle,M=s(f)-h[0]*(.5+y),C=s(g)-h[1]*(.5+u),I=M+h[0],z=C+h[1];if(d){p&&(d=-d);const e=Math.sin(d*Math.PI/180),t=Math.cos(d*Math.PI/180),r=M*t-C*e,a=M*e+C*t,i=M*t-z*e,s=M*e+z*t,o=I*t-z*e,n=I*e+z*t,c=I*t-C*e,l=I*e+C*t;M=Math.min(r,i,o,c),C=Math.min(a,s,n,l),I=Math.max(r,i,o,c),z=Math.max(a,s,n,l)}a=M<a?M:a,i=C<i?C:i,n=I>n?I:n,c=z>c?z:c;const P=r.createImageData(m.size[0],m.size[1]);P.data.set(new Uint8ClampedArray(m.image.buffer));const x={offsetX:f,offsetY:g,rotateClockwise:p,angle:d,rasterizedImage:P,anchorX:y,anchorY:u};l.push(x)}t.width=n-a,t.height=c-i;const m=-a,h=c;for(let o=0;o<l.length;o++){const e=l[o],t=this._imageDataToCanvas(e.rasterizedImage),a=e.rasterizedImage.width,i=e.rasterizedImage.height,n=m-a*(.5+e.anchorX),c=h-i*(.5-e.anchorY);if(e.angle){const a=(360-e.angle)*Math.PI/180;r.save(),r.translate(s(e.offsetX),-s(e.offsetY)),r.translate(m,h),r.rotate(a),r.translate(-m,-h),r.drawImage(t,n,c),r.restore()}else r.drawImage(t,n+s(e.offsetX),c-s(e.offsetY))}const f=new o({x:m/t.width-.5,y:h/t.height-.5});return{imageData:0!==t.width&&0!==t.height?r.getImageData(0,0,t.width,t.height):r.createImageData(1,1),anchorPosition:f}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,r=t.getContext(\"2d\");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}_imageTo32Array(e,t,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const a=this._imageDataCanvas,i=a.getContext(\"2d\");return a.width=t,a.height=r,i.drawImage(e,0,0,t,r),new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}_getRasterizedResource(t,r,a,i,s,o){let n,c,m,f;if(\"esriGeometryPolyline\"===a||\"esriGeometryPolygon\"===a){const h=i&&i.style?i.style:p.Legend,f=\"esriGeometryPolyline\"===a?M.stroke[h]:M.fill[h];if(\"line\"===t.type){if(\"CIMSolidStroke\"!==t.cim.type){if(\"CIMPictureStroke\"===t.cim.type){const e=l(t.width,r,s,o),{image:a,width:i,height:n}=this._getPictureResource(t,e);return this._rasterizePictureResource(t,a,i,n,f,e)}return null}({analyzedCIM:n,hash:m}=P(t,r,s,o)),c=this._embedCIMLayerInVectorMarker(n,f)}else if(\"marker\"===t.type){if(\"CIMPictureMarker\"===t.cim.type)return null;if(\"CIMVectorMarker\"!==t.cim.type)return null;t.cim.offsetX=l(t.offsetX,r,s,o),t.cim.offsetY=l(t.offsetY,r,s,o),t.cim.rotation=l(t.rotation,r,s,o),t.cim.markerPlacement=t.markerPlacement,({analyzedCIM:n}=P(t,r,s,o)),m=e(JSON.stringify(n)).toString(),c=this._embedCIMLayerInVectorMarker(n,f)}else{if(\"text\"===t.type)return null;if(\"fill\"===t.type){if(\"CIMHatchFill\"===t.cim.type||\"CIMVectorMarker\"===t.cim.type||\"CIMPictureMarker\"===t.cim.type||\"CIMPictureFill\"===t.cim.type){const e=t.cim.size||t.cim.height;let a,i,c;if(\"CIMPictureMarker\"===t.cim.type||\"CIMPictureFill\"===t.cim.type)({image:a,width:i,height:c}=this._getPictureResource(t,e));else{({analyzedCIM:n,hash:m}=P(t,r,s,o));const e=this._rasterizer.rasterizeJSONResource(n,1,this._avoidSDF);a=e.image,i=e.size[0],c=e.size[1]}return this._rasterizePictureResource(t,a,i,c,f,null)}if(\"CIMSolidFill\"!==t.cim.type)return null;({analyzedCIM:n,hash:m}=P(t,r,s,o)),c=this._embedCIMLayerInVectorMarker(n,f)}}}else{if(\"text\"===t.type)return f=this._rasterizeTextResource(t,r,i,s,o),f;({analyzedCIM:n,hash:m}=P(t,r,s,o));const e=d(i,t,null);if(\"CIMPictureMarker\"===t.cim.type){const a=l(t.size,r,s,o)*e,{image:i,width:n,height:c}=this._getPictureResource(t,a);return f={image:i,size:[n,c],sdf:!1,simplePattern:!1,anchorX:t.anchorPoint?t.anchorPoint.x:0,anchorY:t.anchorPoint?t.anchorPoint.y:0},f}h(n,e,{preserveOutlineWidth:!1}),c=n}m+=a,i&&(m+=JSON.stringify(i));const g=this._resourceCache;return g.has(m)?g.get(m):(f=this._rasterizer.rasterizeJSONResource(c,window.devicePixelRatio||1,this._avoidSDF),g.set(m,f),f)}_rasterizeTextResource(e,t,r,a,i){const s=d(r,e,null),o=l(e.text,t,a,i);if(!o||0===o.length)return null;const n=l(e.fontName,t,a,i),c=l(e.style,t,a,i),h=l(e.weight,t,a,i),f=l(e.decoration,t,a,i),g=l(e.size,t,a,i)*s,y=l(e.horizontalAlignment,t,a,i),u=l(e.verticalAlignment,t,a,i),p=m(l(e.color,t,a,i)),M=m(l(e.outlineColor,t,a,i)),C={color:p,size:g,horizontalAlignment:y,verticalAlignment:u,font:{family:n,style:c,weight:h,decoration:f},halo:{size:l(e.outlineSize,t,a,i)||0,color:M,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,C)}_rasterizePictureResource(e,t,r,o,n,c){const l=document.createElement(\"canvas\"),m=l.getContext(\"2d\");l.height=s(Math.max(Math.abs(n.frame.ymax-n.frame.ymin),c)),l.width=s(Math.abs(n.frame.xmax-n.frame.xmin));const h=m.createImageData(r,o);h.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(h),g=m.createPattern(f,\"repeat\"),y=Math.cos((-e.cim.rotation||0)*Math.PI/180),u=Math.sin((-e.cim.rotation||0)*Math.PI/180);g.setTransform({m11:y,m12:u,m21:-u,m22:y,m41:s(e.cim.offsetX)||0,m42:s(e.cim.offsetY)||0});const p=n.canvasPaths;let d,M,C;a(p)?(d=p.rings,m.fillStyle=g,M=m.fill,C=[\"evenodd\"]):i(p)&&(d=p.paths,m.strokeStyle=g,m.lineWidth=c,M=m.stroke,d[0][0][1]=l.height/2,d[0][1][1]=l.height/2),m.beginPath();for(const a of d){const e=a?a.length:0;if(e>1){let t=a[0];m.moveTo(s(t[0]),s(t[1]));for(let r=1;r<e;++r)t=a[r],m.lineTo(s(t[0]),s(t[1]));m.closePath()}}M.apply(m,C);const I=m.getImageData(0,0,l.width,l.height),z=new Uint8Array(I.data);return{size:[l.width,l.height],image:new Uint32Array(z.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t){const r=this._pictureMarkerCache.get(e.materialHash);if(!r)return null;const a=r.height/r.width,i=t?a>1?s(t):s(t)/a:r.width,o=t?a>1?s(t)*a:s(t):r.height;return{image:this._imageTo32Array(r,i,o),width:i,height:o}}_embedCIMLayerInVectorMarker(e,t){const r=a(t.geometry)?\"CIMPolygonSymbol\":\"CIMLineSymbol\";return{type:\"CIMVectorMarker\",frame:t.frame,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}function I(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:\"string\"==typeof e[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})))}function z(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":return\"esriGeometryPoint\";case\"CIMLineSymbol\":return\"esriGeometryPolyline\";case\"CIMPolygonSymbol\":return\"esriGeometryPolygon\";default:return null}}function P(e,t,r,a){let i,s;if(\"function\"==typeof e.materialHash){i=(0,e.materialHash)(t,r,a),s=g(e.cim,e.materialOverrides)}else i=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:i}}export{C as CIMSymbolRasterizer,p as GeometryStyle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{px2pt as t}from\"../../core/screenUtils.js\";import{getCIMSymbolSize as e,scaleCIMSymbolTo as a}from\"./cimSymbolUtils.js\";import{CIMSymbolRasterizer as l}from\"../cim/CIMSymbolRasterizer.js\";const i=new l(null,!0),o=120;async function n(l,n={}){const{size:s,maxSize:c,node:m,opacity:r}=n,y=n.cimOptions||n,{feature:d,fieldMap:h,geometryType:p,style:u}=y,g=e(l),f=Math.min(null!=s?s:g,null!=c?c:t(o));f!==g&&(l=l.clone(),a(l,f,{preserveOutlineWidth:!0}));let M=3;l&&l.data&&l.data.symbol&&\"CIMPointSymbol\"!==l.data.symbol.type&&(M=1);const b=await i.rasterizeCIMSymbolAsync(l,d,h,p,{scaleFactor:M,style:u}),w=document.createElement(\"canvas\");w.width=b.imageData.width,w.height=b.imageData.height;w.getContext(\"2d\").putImageData(b.imageData,0,0);let C=w.width/M,D=w.height/M;if(null!=s&&(null==(null==n?void 0:n.scale)||(null==n?void 0:n.scale))){const t=C/D;C=t<=1?Math.ceil(f*t):f,D=t<=1?f:Math.ceil(f/t)}const I=new Image(C,D);return I.src=w.toDataURL(),null!=r&&(I.style.opacity=`${r}`),m&&m.appendChild(I),I}export{n as previewCIMSymbol};\n"],"sourceRoot":""}