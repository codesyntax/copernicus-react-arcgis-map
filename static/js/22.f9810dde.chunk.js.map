{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/layers/support/rasterFunctions/rasterProjectionHelper.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js","../node_modules/@arcgis/core/layers/support/rasterDatasets/EphemeralBlockCache.js","../node_modules/@arcgis/core/layers/support/rasterDatasets/RawBlockCache.js","../node_modules/@arcgis/core/views/layers/ImageryTileLayerView.js","../node_modules/@arcgis/core/views/2d/engine/RasterBitmap.js","../node_modules/@arcgis/core/views/2d/engine/RasterTile.js","../node_modules/@arcgis/core/views/2d/engine/RasterTileContainer.js","../node_modules/@arcgis/core/views/2d/layers/ImageryTileLayerView2D.js"],"names":["p","e","layer","parent","this","when","catch","name","r","id","s","title","t","getLogger","declaredClass","error","get","canResume","getSuspendInfo","suspended","legendEnabled","updatingHandles","updating","isUpdating","_override","_clearOverride","visible","suspendInfo","view","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","a","l","n","o","EventedMixin","i","prototype","readOnly","type","Boolean","d","arguments","left","right","top","bottom","_get","Number","String","json","write","y","c","base","key","typeMap","extent","polygon","geometry","clone","types","read","m","path","ofType","rect","clips","moving","attached","lastUpdateId","updateRequested","container","h","fadeTransitionEnabled","opacity","handles","add","requestUpdate","blendMode","effect","on","notifyChange","whenLayerView","then","destroyed","attach","detach","remove","minScale","maxScale","isFulfilled","isResolved","_set","update","isVisibleAtScale","scale","set","level","row","col","_tileInfoView","sortChildren","setStencilReference","state","requiredLevel","getClosestInfoForScale","displayLevel","tileInfo","scaleToZoom","registerRenderPass","brushes","drawPhase","DEBUG","MAP","HIGHLIGHT","target","getStencilTarget","children","has","getTileResolution","setTransform","stencilRef","xoffset","Math","max","abs","yoffset","stops","length","size","filter","map","maxSize","minSize","f","floor","renderer","event","pointerType","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","u","isWGS84","isWebMercator","equals","cols","rows","spatialReference","M","center","xmin","x","xmax","ymin","ymax","w","isGeographic","origin","valid","g","R","j","push","isNaN","apply","min","b","P","v","N","S","ceil","z","W","G","L","inverseTransform","NaN","q","A","Float32Array","E","F","offsets","coefficients","spacing","log","pixelSize","LN2","storageInfo","maximumPyramidLevel","round","pyramidLevel","pyramidResolution","nativePixelSize","excessiveReading","projectedPixelSize","scales","srcResolutions","isCustomTilingScheme","wkid","width","height","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","popupTemplate","getRequiredFields","fields","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","indexOf","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","_timer","_cachedBlocks","Map","_size","_duration","_interval","refCount","delete","controller","abort","ts","Date","now","block","trim","updateTimer","clear","clearTimer","setInterval","Array","from","clearInterval","rasterInfo","cache","some","decreaseRefCount","getBlock","isRejected","putBlock","deleteBlock","normalize","k","transform","Set","C","B","pyramidBlockWidth","blockWidth","pyramidBlockHeight","blockHeight","$","I","H","_rasterFieldPrefix","fullExtent","datumTransformation","dynamicRangeAdjustment","Promise","reject","popupEnabled","identify","value","join","ObjectId","_formatAttributeValue","attributeTable","features","attributes","Value","VALUE","hasOwnProperty","sourceLayer","resolve","fieldInfos","_getFieldInfo","format","_formatDelimitedString","_formatNumberFromString","toLowerCase","fieldName","replace","split","_","bandCount","outMin","outMax","minCutOff","maxCutOff","factor","useGamma","gamma","gammaCorrection","colormap","colormapOffset","_textureInvalidated","_memoryUsed","_supportsBilinear","coordScale","_symbolizerParameters","isRendereredSource","pixelRatio","rotation","_source","rawPixelData","_suspended","_bandIds","_interpolation","_transformGrid","transforms","dvs","source","transformGrid","interpolation","getTextures","textures","dispose","_rasterTexture","_transformGridTexture","_colormapTexture","_rasterTextureBandIds","stage","requestRender","invalidateTexture","setSamplingMode","toScreenNoRotation","PI","displayViewMat3","names","descriptor","reduce","context","pixels","_createOrDestroyRasterTexture","_updateColormapTexture","setData","bandIds","capabilities","textureFloat","textureFloatLinear","_colormap","symbolizerParameters","bitmap","once","destroy","getMemoryUsage","_getTileBounds","raster","getTileBounds","world","lodAt","V","_tileStrategy","_fetchQueue","_blockCacheRegistryUrl","_blockCacheRegistryId","_bitmapView","_emptyTilePixelBlock","_srcResolutions","_previousLOD","_needBlockCacheUpdate","_globalSymbolizerParams","_symbolizerParams","_abortController","_globalUpdateRequested","_isCustomTilingScheme","useWebGLForProcessing","_redrawDebounced","_redrawImage","updateFullExtent","addResolvingPromise","useProgressiveUpdate","removeAllChildren","_getCacheSize","cachePolicy","resampling","acquireTile","releaseTile","cacheSize","tileInfoView","toMap","pause","resume","toJSON","fromJSON","ioConfig","sampling","_updateSymbolizerParams","updateCacheSize","increaseRasterJobHandlerUsage","supportsTextureFloat","allowPartialFill","_initializeTileInfo","U","concurrency","process","fetchTile","addChild","_canUseMajorityInterpolationOnDataSource","refreshDebounced","_updateBlockCacheRegistry","decreaseRasterJobHandlerUsage","hasTilingEffects","signal","updateRenderer","reset","tiles","_enqueueTileFetch","createTile","getTileCoords","removeChild","_canUseWebGLForProcessing","registryId","requestRawData","srcResolution","symbolizer","canRenderInWebGL","create","pixelBlock","applyRenderer","_createEmptyTilePixelBlock","_getLayerInterpolation","_updateGlobalSymbolizerParams","Uint8Array","mask","pixelType","fetchPixels","generateWebGLParameters","isGCS","url","multidimensionalDefinition","multidimensionalInfo","getSliceIndex","T","D"],"mappings":"8RAIuqBA,EAAC,kDAA2C,WAAYC,GAAE,kCAAC,cAAMA,IAAQC,MAAM,KAAK,EAAKC,OAAO,KAAtC,EAAzD,8CAAoG,WAAY,WAACC,KAAKC,OAAOC,OAAO,SAAAL,GAAI,GAAG,2BAA2BA,EAAEM,KAAK,CAAC,IAAMC,EAAE,EAAKN,OAAO,EAAKA,MAAMO,IAAI,QAAQC,EAAE,EAAKR,OAAO,EAAKA,MAAMS,OAAO,WAAW,MAAMC,IAAEC,UAAU,EAAKC,eAAeC,MAAM,aAAtC,sDAAkGL,EAAlG,mBAA8GF,EAA9G,MAAoHP,GAAGA,QAAjY,uBAAuY,WAAkB,IAAMA,EAAE,SAAAA,GAAC,OAAE,MAAMA,EAAE,EAAEA,GAAE,OAAOA,EAAEG,KAAKY,IAAI,kBAAkBf,EAAEG,KAAKY,IAAI,yBAA/d,qBAAsf,WAAgB,OAAOZ,KAAKa,cAAlhB,uBAA8hB,WAAkB,OAAOb,KAAKc,mBAA5jB,yBAA6kB,WAAoB,OAAOd,KAAKe,YAAW,IAAKf,KAAKF,MAAMkB,gBAAxoB,oBAAspB,WAAe,SAAShB,KAAKiB,iBAAiBjB,KAAKiB,gBAAgBC,UAAUlB,KAAKmB,gBAAxuB,mBAAsvB,WAAc,OAAM,IAAKnB,KAAKY,IAAI,kBAAxxB,IAAyyB,SAAYf,QAAG,IAASA,EAAEG,KAAKoB,UAAU,UAAUvB,GAAGG,KAAKqB,eAAe,aAAn3B,uBAA83B,WAAY,OAAOrB,KAAKY,IAAI,qBAAqBZ,KAAKY,IAAI,eAAeZ,KAAKY,IAAI,iBAAiBZ,KAAKsB,UAAS,IAA/+B,4BAAk/B,WAAiB,IAAMzB,EAAEG,KAAKD,QAAQC,KAAKD,OAAOgB,UAAUf,KAAKD,OAAOwB,YAAY,GAAU,OAALvB,KAAcwB,MAAdxB,KAAsBwB,KAAKC,QAAQ5B,EAAE6B,cAAa,GAAI1B,KAAKF,OAAOE,KAAKF,MAAM6B,SAAS9B,EAAE+B,gBAAe,GAAI5B,KAAKsB,UAAUzB,EAAEgC,gBAAe,GAAIhC,IAA1tC,wBAA4tC,WAAa,OAAM,MAA/uC,GAAeiC,YAAEC,YAAEC,YAAEC,IAAEC,aAAaC,SAAgtCtC,YAAE,CAACO,eAAKR,EAAEwC,UAAU,cAAc,MAAMvC,YAAE,CAACO,eAAKR,EAAEwC,UAAU,aAAQ,GAAQvC,YAAE,CAACO,eAAKR,EAAEwC,UAAU,cAAS,GAAQvC,YAAE,CAACO,YAAE,CAACiC,UAAS,KAAMzC,EAAEwC,UAAU,YAAY,MAAMvC,YAAE,CAACO,YAAE,CAACiC,UAAS,KAAMzC,EAAEwC,UAAU,cAAc,MAAMvC,YAAE,CAACO,YAAE,CAACiC,UAAS,KAAMzC,EAAEwC,UAAU,gBAAgB,MAAMvC,YAAE,CAACO,YAAE,CAACkC,KAAKC,QAAQF,UAAS,KAAMzC,EAAEwC,UAAU,WAAW,MAAMvC,YAAE,CAACO,eAAKR,EAAEwC,UAAU,UAAU,MAAgD,IAAII,EAA9C5C,EAAEC,YAAE,CAACS,YAAE,gCAAgCV,GAA0B4C,O,uECAx3DlC,E,iICAWT,EAAC,4H,MAAeS,GAA4EV,EAAxEC,EAAEO,YAAE,CAAC6B,YAAE,uCAAuCpC,GDAvEsC,EAAE7B,EAAC,kDAAiB,aAAa,kCAAC,eAASmC,YAAgBH,KAAK,OAAO,EAAKI,KAAK,KAAK,EAAKC,MAAM,KAAK,EAAKC,IAAI,KAAK,EAAKC,OAAO,KAA/F,EAA9B,yCAAkI,WAAQ,OAAO,IAAIvC,EAAE,CAACoC,KAAK1C,KAAK0C,KAAKC,MAAM3C,KAAK2C,MAAMC,IAAI5C,KAAK4C,IAAIC,OAAO7C,KAAK6C,WAAjN,mBAA0N,WAAc,OAAO7C,KAAK8C,KAAK,YAAY,GAAG,MAAxQ,GAAejD,GAA6PW,YAAE,CAACJ,YAAE,CAACkC,KAAK,CAACS,OAAOC,QAAQC,KAAK,CAACC,OAAM,MAAOf,EAAEC,UAAU,YAAO,GAAQ5B,YAAE,CAACJ,YAAE,CAACkC,KAAK,CAACS,OAAOC,QAAQC,KAAK,CAACC,OAAM,MAAOf,EAAEC,UAAU,aAAQ,GAAQ5B,YAAE,CAACJ,YAAE,CAACkC,KAAK,CAACS,OAAOC,QAAQC,KAAK,CAACC,OAAM,MAAOf,EAAEC,UAAU,WAAM,GAAQ5B,YAAE,CAACJ,YAAE,CAACkC,KAAK,CAACS,OAAOC,QAAQC,KAAK,CAACC,OAAM,MAAOf,EAAEC,UAAU,cAAS,GAAQ5B,YAAE,CAACJ,YAAE,CAACiC,UAAS,KAAMF,EAAEC,UAAU,UAAU,MAAyD,IEA5be,EFAmdvD,EAA1EuC,EAAE7B,EAAEE,YAAE,CAACyB,YAAE,uCAAuCE,G,yCEAjbiB,G,MAAE,CAACC,KAAK7C,IAAE8C,IAAI,OAAOC,QAAQ,CAACC,OAAOlD,IAAEmD,QAAQ7D,OAAQoC,EAAEmB,EAAC,kDAAiB,aAAa,kCAAC,eAASV,YAAgBH,KAAK,WAAW,EAAKoB,SAAS,KAAxD,EAA9B,yCAA2F,WAAc,OAAO1D,KAAK8C,KAAK,YAAY,GAAG,IAAzI,mBAA2I,WAAQ,OAAO,IAAIK,EAAE,CAACO,SAAS1D,KAAK0D,SAASC,cAAxL,GAAexB,GAAqL/B,YAAE,CAAC6B,YAAE,CAAC2B,MAAMR,EAAEH,KAAK,CAACY,KAAKC,IAAEZ,OAAM,MAAOlB,EAAEI,UAAU,gBAAW,GAAQhC,YAAE,CAAC6B,YAAE,CAACI,UAAS,KAAML,EAAEI,UAAU,UAAU,MAAyD,IAAuBL,EAA1EC,EAAEmB,EAAE/C,YAAE,CAACP,YAAE,uCAAuCmC,GCAjpBnC,EAAC,kDAAiB,aAAa,kCAAC,eAAS4C,YAAgBH,KAAK,OAAO,EAAKyB,KAAK,GAAhD,EAA9B,yCAAiF,WAAc,OAAO/D,KAAK8C,KAAK,YAAY,GAAG,MAA/H,GAAetC,GAAoHJ,YAAE,CAAC6B,YAAE,CAACK,KAAK,CAAC,CAAC,CAACS,UAAUE,KAAK,CAACC,OAAM,MAAOrD,EAAEuC,UAAU,YAAO,GAAQhC,YAAE,CAAC6B,YAAE,CAACI,UAAS,KAAMxC,EAAEuC,UAAU,UAAU,MAAmD,IAAuBxC,EAApEC,EAAEO,YAAE,CAACE,YAAE,mCAAmCT,GCAgFuD,EAAEjB,IAAE6B,OAAO,CAACV,IAAI,OAAOD,KAAKvB,EAAEyB,QAAQ,CAACU,KAAKrE,EAAEmE,KAAKvB,EAAEkB,SAAS1B,KAAKD,EAAE,SAAAI,GAAI,IAAIL,EAAC,kDAAiB,aAAa,kCAAC,eAASW,YAAgByB,MAAM,IAAId,EAAE,EAAKe,QAAO,EAAG,EAAKC,UAAS,EAAG,EAAKC,cAAc,EAAE,EAAKC,iBAAgB,EAAhH,EAA9B,8CAAiJ,WAAY,IAAK9D,EAAL,OAAOR,KAAKuE,YAAYvE,KAAKuE,UAAU,IAAIC,KAAGxE,KAAKuE,UAAUE,uBAAsB,EAAGzE,KAAKuE,UAAUG,QAAQ,EAAE1E,KAAKuE,UAAUL,MAAMlE,KAAKkE,MAAMlE,KAAK2E,QAAQC,IAAI,CAAC3C,YAAEjC,KAAK,aAAa,SAAAQ,GAAI,EAAK+D,YAAY,EAAKA,UAAUjD,SAASd,GAAG,EAAKgB,OAAOhB,GAAG,EAAK8D,iBAAiB,EAAK9C,KAAKqD,mBAAkB,GAAI5C,YAAEjC,KAAK,CAAC,gBAAgB,cAAc,WAAK,IAAIQ,EAAEX,EAAE,EAAK0E,YAAY,EAAKA,UAAUG,QAAQ,OAAOlE,EAAE,OAAOX,EAAE,EAAKC,YAAO,EAAOD,EAAE6E,SAASlE,EAAE,MAAK,GAAIyB,YAAEjC,KAAK,CAAC,oBAAoB,SAAAQ,GAAI,EAAK+D,YAAY,EAAKA,UAAUO,UAAUtE,MAAK,GAAIyB,YAAEjC,KAAK,CAAC,iBAAiB,SAAAQ,GAAI,EAAK+D,YAAY,EAAKA,UAAUQ,OAAOvE,MAAK,GAAIR,KAAKkE,MAAMc,GAAG,UAAU,WAAK,EAAKT,UAAUL,MAAM,EAAKA,MAAM,EAAKe,aAAa,cAAc,OAAOzE,EAAER,KAAKwB,OAAOhB,EAAE0E,cAAclF,KAAKwB,KAAK0D,cAAclF,KAAKF,OAAOqF,MAAM,SAAA3E,GAAIA,IAAI,GAAM,EAAK4D,UAAU,EAAKgB,YAAY,EAAKC,SAAS,EAAKR,gBAAgB,EAAKT,UAAS,MAAO,eAASpE,KAAKC,OAAOkF,MAAM,WAAK,EAAKf,UAAU,EAAKgB,YAAY,EAAKC,SAAS,EAAKR,gBAAgB,EAAKT,UAAS,MAAO,iBAAvoC,qBAAgpC,WAAUpE,KAAKoE,WAAWpE,KAAKsF,SAAStF,KAAKoE,UAAS,GAAIpE,KAAK2E,QAAQY,OAAO,cAAcvF,KAAKsE,iBAAgB,IAAjwC,oBAAowC,WAAe,OAAOtE,KAAKoE,WAAWpE,KAAKe,YAAYf,KAAKsE,iBAAiBtE,KAAKmB,gBAAt1C,8BAAo2C,SAAiBX,GAAG,IAAIX,GAAE,EAASS,EAAEN,KAAKF,MAAMqC,EAAE7B,EAAEkF,SAASpF,EAAEE,EAAEmF,SAAS,GAAG,MAAMtD,GAAG,MAAM/B,EAAE,CAAC,IAAIE,GAAG6B,EAAEF,GAAG7B,GAAGE,GAAGE,GAAG2B,IAAI7B,GAAE,IAAK2B,GAAGzB,GAAGJ,IAAI6B,GAAE,GAAIpC,EAAES,GAAG2B,EAAE,OAAOpC,IAAjgD,2BAAmgD,WAAgBG,KAAKoF,WAAWpF,KAAKsE,kBAAkBtE,KAAKsE,iBAAgB,EAAGtE,KAAKe,WAAWf,KAAKwB,KAAKqD,mBAA5mD,2BAA6nD,SAAcrE,IAAIR,KAAK0F,eAAe1F,KAAK2F,cAAc3F,KAAK4F,KAAK,mBAAmBpF,GAAGR,KAAKsE,kBAAkBtE,KAAKe,YAAYf,KAAKsE,iBAAgB,EAAGtE,KAAK6F,OAAOrF,KAAKR,KAAKsE,iBAAgB,IAA5zD,wBAA+zD,WAAa,OAAM,IAAl1D,yBAAq1D,WAAc,OAAM,IAAz2D,uBAA42D,WAAY,QAAQ,mEAAmBtE,KAAK8F,iBAAiB9F,KAAKwB,KAAKuE,WAAn7D,GAAe5D,GAA66D,OAAO3B,YAAE,CAACX,YAAE,CAACyC,KAAKc,EAAE4C,IAAR,SAAYxF,GAAG,IAAMX,EAAEO,YAAEI,EAAER,KAAK8C,KAAK,SAASM,GAAGpD,KAAK4F,KAAK,QAAQ/F,OAAOiC,EAAEM,UAAU,aAAQ,GAAQ5B,YAAE,CAACX,eAAKiC,EAAEM,UAAU,cAAS,GAAQ5B,YAAE,CAACX,eAAKiC,EAAEM,UAAU,gBAAW,GAAQ5B,YAAE,CAACX,eAAKiC,EAAEM,UAAU,iBAAY,GAAQ5B,YAAE,CAACX,eAAKiC,EAAEM,UAAU,iBAAY,GAAQ5B,YAAE,CAACX,YAAE,CAACwC,UAAS,KAAMP,EAAEM,UAAU,wBAAmB,GAAQ5B,YAAE,CAACX,eAAKiC,EAAEM,UAAU,uBAAkB,GAAQ5B,YAAE,CAACX,eAAKiC,EAAEM,UAAU,WAAW,MAAM5B,YAAE,CAACX,eAAKiC,EAAEM,UAAU,YAAO,GAAQN,EAAEtB,YAAE,CAACF,YAAE,qCAAqCwB,K,6ICA7pGE,EAAE,SAACnC,EAAEO,GAAH,OAAOP,EAAEyD,IAAI2C,MAAM7F,EAAEkD,IAAI2C,OAAO,EAAEpG,EAAEyD,IAAI2C,MAAM7F,EAAEkD,IAAI2C,MAAMpG,EAAEyD,IAAI4C,IAAI9F,EAAEkD,IAAI4C,KAAK,EAAErG,EAAEyD,IAAI4C,IAAI9F,EAAEkD,IAAI4C,IAAIrG,EAAEyD,IAAI6C,IAAI/F,EAAEkD,IAAI6C,KAAUhE,E,kDAAY,WAAYtC,GAAE,kCAAC,gBAAauG,cAAcvG,EAA5B,E,sDAA8B,WAA2B,OAAM,I,4BAAG,SAAeA,GAAGG,KAAKqG,aAAarE,GAAGhC,KAAKsG,sBAA1B,sDAAAtG,MAAA,KAAAA,KAAqEH,K,gCAAG,SAAmBA,GAAG,IAAYO,EAAGP,EAAT0G,MAAW,4GAAmC1G,IAAnC,IAAsC2G,cAAcxG,KAAKoG,cAAcK,uBAAuBrG,EAAE2F,OAAOE,MAAMS,aAAa1G,KAAKoG,cAAcO,SAASC,YAAYxG,EAAE2F,W,iCAAQ,SAAoBvF,GAAE,WAAOwB,EAAExB,EAAEqG,mBAAmB,CAAC1G,KAAK,UAAU2G,QAAQ,CAACxG,KAAGyG,UAAUlH,IAAEmH,MAAMnH,IAAEoH,IAAIpH,IAAEqH,UAAUC,OAAO,kBAAI,EAAKC,sBAAqBjF,EAAE3B,EAAEqG,mBAAmB,CAAC1G,KAAK,WAAW2G,QAAQ,CAAC1G,KAAG2G,UAAUlH,IAAEmH,MAAMG,OAAO,kBAAI,EAAKE,UAASC,IAAI,qBAAqB,uGAAoC9G,IAApC,CAAuCwB,EAAEG,M,8BAAG,WAAmB,OAAOnC,KAAKqH,W,8BAAS,SAAiBxH,GAAE,oBAAgBG,KAAKqH,UAArB,IAAC,2BAA6B,KAAnBjH,EAAmB,QAAOE,EAAEN,KAAKoG,cAAcmB,kBAAkBnH,EAAEkD,KAAKlD,EAAEoH,aAAa3H,EAAES,IAApG,iC,iCAAwG,WAAsB,IAAD,EAAKT,EAAE,EAAP,cAAwBG,KAAKqH,UAA7B,IAAS,oCAA+BI,WAAW5H,KAAnD,mC,GAAp3BW,KAA27B2B,O,iCCA5uC,SAAS3B,EAAEA,EAAEX,GAAG,OAAOA,EAAE,YAAYA,GAAGA,EAAE6H,QAAQC,KAAKC,IAAIpH,EAAEmH,KAAKE,IAAIhI,EAAE6H,UAAU,YAAY7H,GAAGA,EAAEiI,QAAQH,KAAKC,IAAIpH,EAAEmH,KAAKE,IAAIhI,EAAEiI,SAAS,IAAItH,EAAEA,EAAoH,SAASwB,EAAExB,EAAEwB,GAAG,MAAM,iBAAiBxB,EAAEA,EAAEA,GAAGA,EAAEuH,OAAOvH,EAAEuH,MAAMC,OAAjL,SAAWxH,GAAe,IAAZ,IAAIX,EAAE,EAAEmC,EAAE,EAAU5B,EAAE,EAAEA,EAAEI,EAAEwH,OAAO5H,IAAI,CAAC,IAAME,EAAEE,EAAEJ,GAAG6H,KAAK,iBAAiB3H,IAAIT,GAAGS,EAAE0B,KAAK,OAAOnC,EAAEmC,EAAwEnC,CAAEW,EAAEuH,OAAO/F,EAAE,SAAS5B,EAAEI,EAAEX,GAAG,IAAIA,EAAE,OAAOW,EAAE,IAAMJ,EAAEP,EAAEqI,QAAQ,SAAA1H,GAAC,MAAE,SAASA,EAAE8B,QAAO6F,KAAK,SAAAtI,GAAI,IAAcO,EAAaP,EAArBuI,QAAkB9H,EAAGT,EAAXwI,QAAa,OAAOrG,EAAE5B,EAAEI,GAAGwB,EAAE1B,EAAEE,IAAI,KAASF,EAAE,EAAQ2B,EAAE7B,EAAE4H,OAAO,GAAG,IAAI/F,EAAE,OAAOzB,EAAE,IAAI,IAAIwB,EAAE,EAAEA,EAAEC,EAAED,IAAI1B,GAAGF,EAAE4B,GAAG,IAAMsG,EAAEX,KAAKY,MAAMjI,EAAE2B,GAAG,OAAO0F,KAAKC,IAAIU,EAAE9H,GAAG,SAASF,EAAET,GAAG,IAAMmC,EAAEnC,GAAGA,EAAE2I,SAASlI,EAAE,WAAWT,GAAGA,EAAE4I,OAAO5I,EAAE4I,MAAMC,aAAa,EAAE,EAAE,IAAI1G,EAAE,OAAO1B,EAAE,IAAM2B,EAAE,oBAAoBD,EAAE5B,EAAEE,EAAE0B,EAAE2G,iBAAiBrI,EAAE,GAAG,WAAW0B,EAAEM,KAAK,OAAO9B,EAAEyB,EAAED,EAAE4G,QAAQ,GAAG,iBAAiB5G,EAAEM,KAAK,CAAC,IAAIzC,EAAEoC,EAAE,OAAOD,EAAE6G,iBAAiBC,SAAS,SAAA9G,GAAInC,EAAEW,EAAEX,EAAEmC,EAAE4G,WAAW/I,EAAE,GAAG,iBAAiBmC,EAAEM,KAAK,CAAC,IAAIzC,EAAEoC,EAAE,OAAOD,EAAE+G,gBAAgBD,SAAS,SAAA9G,GAAInC,EAAEW,EAAEX,EAAEmC,EAAE4G,WAAW/I,EAAE,OAAOmC,EAAEM,KAAKL,EAJr+B,mC,sZCIgf+G,EAAE,KAAKlF,EAAE,SAASjE,EAAEmC,GAAG,IAAMxB,GAAGX,EAAEoJ,SAASpJ,EAAEqJ,iBAAiBlH,EAAEiH,SAASjH,EAAEkH,eAAe,QAAQrJ,EAAEsJ,OAAOnH,IAAIxB,IAAIZ,EAAE,SAASC,EAAEmC,GAAG,IAAMxB,GAAGX,EAAE,GAAGA,EAAE,GAAGA,EAAE,EAAEmC,EAAEoH,MAAMvJ,EAAE,EAAEmC,EAAEoH,KAAK,IAAI,EAAEnH,GAAGpC,EAAE,GAAGA,EAAE,GAAGA,EAAE,EAAEmC,EAAEqH,KAAK,GAAGxJ,EAAE,EAAEmC,EAAEqH,KAAK,IAAI,EAAE,MAAM,CAAC1B,KAAKE,IAAIrH,EAAEX,EAAE,EAAEmC,EAAEqH,KAAK,IAAI1B,KAAKE,IAAI5F,EAAEpC,EAAE,EAAEmC,EAAEqH,KAAK,M,SAA0B7E,I,2EAAf,sBAAA1C,EAAA,0DAAsBA,eAAMxB,cAA5B,yCAAuC,MAAvC,uBAAkDyB,cAAlD,4C,sBAAsD,SAASoB,EAAEnB,EAAExB,EAAEyB,GAAG,IAAI6B,EAAE9B,EAAEsH,iBAAiB9I,GAAG,OAAO,KAAK,IAAIsB,cAAI,MAAM,IAAIjC,IAAE,2CAA2C,mCAAmC,OAAOoC,EAAEmB,YAAE5C,EAAEwB,EAAEsH,iBAAiBtH,GAAGoB,YAAEpB,EAAEsH,iBAAiB9I,EAAEwB,GAAG,SAASuH,EAAEvH,EAAEC,EAAE7B,GAAS,IAAPE,EAAO,uDAAL,KAAM,GAAG0B,EAAEsH,iBAAiBH,OAAOlH,GAAG,OAAOD,EAAE,IAAMD,EAAE+B,EAAE9B,EAAEsH,iBAAiBrH,GAAG,GAAGF,IAAID,cAAI,MAAM,IAAIjC,IAAE,2CAA2C,mCAAmC,IAAMuD,EAAEhD,EAAEoJ,OAAOR,EAAE,IAAI7G,IAAE,CAACsH,KAAKrG,EAAEsG,EAAE1H,EAAE0H,EAAE,EAAEC,KAAKvG,EAAEsG,EAAE1H,EAAE0H,EAAE,EAAEE,KAAKxG,EAAED,EAAEnB,EAAEmB,EAAE,EAAE0G,KAAKzG,EAAED,EAAEnB,EAAEmB,EAAE,EAAEmG,iBAAiBtH,EAAEsH,mBAAmB1J,EAAEmC,EAAE2H,YAAEV,EAAE/G,EAAE3B,GAAGE,YAAEwI,EAAE/G,GAAG,OAAG,MAAMrC,EAAS,KAAW,CAAC8J,EAAE9J,EAAE+J,KAAK/J,EAAE6J,KAAKtG,EAAEvD,EAAEiK,KAAKjK,EAAEgK,MAAM,SAASE,EAAEjK,GAAQ,IAANmC,EAAM,uDAAJ,IAAK,OAAO5B,YAAEP,GAAGmC,EAAE5B,YAAEP,GAAG,EAAE,SAAS2C,EAAEP,EAAEE,GAAc,IAAZ/B,EAAY,uDAAV,KAAKE,IAAK,yDAAOyB,EAAEE,EAAEqH,iBAAiB,GAAGvH,EAAEoH,OAAOhH,GAAG,OAAOF,EAAE,IAAMmB,EAAEU,EAAE/B,EAAEI,GAAG,GAAGiB,IAAItB,cAAI,MAAM,IAAIjC,IAAE,2CAA2C,mCAAmC,IAAMD,EAAEwD,EAAEsG,YAAEzH,EAAEE,EAAE/B,GAAGI,YAAEyB,EAAEE,GAAG,GAAGvC,GAAGU,GAAG6B,EAAE4H,aAAa,CAAC,IAAIzB,EAAE9D,EAAE,EAAWzC,EAAEmH,cAAclH,YAAED,GAAGiI,OAAO,OAAO1B,EAAE,OAAO9D,EAAExC,YAAED,SAAI,EAAOyC,EAAEyF,OAAO3B,EAAE,GAAjF,mBAAMzI,EAAN,KAAQW,EAAR,KAAoF2B,EAAE2H,EAAE/H,GAAGI,GAAG,MAAMtC,GAAG,MAAMW,IAAImH,KAAKE,IAAI5F,EAAEyH,EAAE7J,GAAGsC,GAAGwF,KAAKE,IAAI,IAAIjI,EAAE8J,GAAGV,EAAEpJ,EAAE8J,GAAG,IAAI/B,KAAKE,IAAI5F,EAAEyH,EAAElJ,GAAG2B,GAAGwF,KAAKE,IAAI,IAAIjI,EAAE8J,GAAGV,IAAIpJ,EAAE8J,GAAG,MAAM,OAAO9J,EAAE,SAASsK,EAAE/H,EAAE/B,GAAc,IAAKgD,EAAExD,EAAE0I,EAAE9D,EAAvBlE,EAAY,uDAAV,KAAKyB,IAAK,yDAAmBoB,EAAEhB,EAAEmH,iBAAiB,GAAGnG,EAAEgG,OAAO/I,GAAG,OAAO+B,EAAE,IAAMoH,EAAEzF,EAAEX,EAAE/C,GAAG,GAAGmJ,IAAIzH,cAAI,MAAM,IAAIjC,IAAE,uCAAuC,mCAAmC,IAAMqK,EAAEX,EAAEG,YAAEvH,EAAE/B,EAAEE,GAAGE,YAAE2B,EAAE/B,GAAG,EAAS,OAAOgD,EAAE,OAAOxD,EAAEoC,YAAEmB,SAAI,EAAOvD,EAAEoK,QAAQ5G,EAAE,GAApD,mBAAI+G,EAAJ,KAAMC,EAAN,KAAuD,GAAGF,GAAGnI,GAAGoB,EAAE+F,eAAe9I,EAAE2J,cAAc,MAAMI,GAAG,MAAMC,EAAE,CAAC,IAAMvK,EAAE,KAAKmC,EAAE,IAAI,GAAG2F,KAAKE,IAAI1F,EAAEsH,KAAKU,GAAGtK,GAAG8H,KAAKE,IAAIuC,EAAEjI,EAAEwH,MAAM3H,GAAG2F,KAAKE,IAAI,IAAIqC,EAAEP,MAAMX,EAAE,CAACkB,EAAET,MAAM,IAAI,IAAM5J,EAAE,GAAGA,EAAEwK,KAAK,IAAIpI,IAAEE,EAAEwH,KAAKxH,EAAEyH,KAAKzG,IAAItD,EAAEwK,KAAK,IAAIpI,IAAEE,EAAEwH,MAAMxH,EAAEyH,KAAKzH,EAAE0H,MAAM,EAAE1G,IAAItD,EAAEwK,KAAK,IAAIpI,IAAEE,EAAEwH,KAAKxH,EAAE0H,KAAK1G,IAAI,IAAMnB,EAAEnC,EAAEsI,KAAK,SAAAtI,GAAC,OAAE2C,EAAE3C,EAAEO,EAAEE,MAAK4H,QAAQ,SAAArI,GAAC,OAAGyK,MAAM,MAAMzK,OAAE,EAAOA,EAAE6J,MAAKvB,KAAK,SAAAtI,GAAC,OAAEA,EAAE6J,KAAIQ,EAAEP,KAAKhC,KAAKC,IAAI2C,MAAM,KAAKvI,GAAG,GAAG2F,KAAKE,IAAI1F,EAAEwH,KAAKS,GAAGvK,GAAG8H,KAAKE,IAAIsC,EAAEhI,EAAEsH,MAAMzH,GAAG2F,KAAKE,IAAI,IAAIqC,EAAET,MAAMT,EAAE,CAACkB,EAAEP,KAAK,IAAI,IAAM9J,EAAE,GAAGA,EAAEwK,KAAK,IAAIpI,IAAEE,EAAEsH,KAAKtH,EAAEyH,KAAKzG,IAAItD,EAAEwK,KAAK,IAAIpI,IAAEE,EAAEsH,MAAMtH,EAAEyH,KAAKzH,EAAE0H,MAAM,EAAE1G,IAAItD,EAAEwK,KAAK,IAAIpI,IAAEE,EAAEsH,KAAKtH,EAAE0H,KAAK1G,IAAI,IAAMnB,EAAEnC,EAAEsI,KAAK,SAAAtI,GAAC,OAAE2C,EAAE3C,EAAEO,EAAEE,MAAK4H,QAAQ,SAAArI,GAAC,OAAGyK,MAAM,MAAMzK,OAAE,EAAOA,EAAE6J,MAAKvB,KAAK,SAAAtI,GAAC,OAAEA,EAAE6J,KAAIQ,EAAET,KAAK9B,KAAK6C,IAAID,MAAM,KAAKvI,IAA17B,MAAo8B5B,EAAE8I,cAAclH,YAAE5B,GAAG4J,OAAO,OAAO1B,EAAE,OAAO9D,EAAExC,YAAE5B,SAAI,EAAOoE,EAAEyF,OAAO3B,EAAE,GAA1gC,mBAA+7B6B,EAA/7B,KAAi8BC,EAAj8B,KAA6gC,IAAMK,EAAEX,EAAE1J,GAAG,OAAOqK,GAAG,MAAMN,GAAG,MAAMC,IAAIzC,KAAKE,IAAIqC,EAAET,KAAKU,GAAGM,IAAIP,EAAET,KAAKU,GAAGxC,KAAKE,IAAIqC,EAAEP,KAAKS,GAAGK,IAAIP,EAAEP,KAAKS,IAAIF,EAAE,SAASC,EAAE3J,EAAE2B,EAAE/B,GAA6B,IAAK4I,EAAExE,EAAlClE,EAA2B,uDAAzB,KAAKyB,EAAoB,uDAAlB,KAAKqB,EAAa,wDAARsG,EAAQ,uDAAN,CAA12E,OAAy3E,GAAG5F,EAAEtD,EAAE8I,iBAAiBnH,EAAEmH,oBAAoBxH,cAAI,MAAM,IAAIjC,IAAE,2CAA2C,mCAAmC,KAAKW,GAAG2B,GAAG/B,GAAG,OAAO,KAA+P,IAA1P,IAAmPsK,EAAxOvH,EAAwB3C,EAA7BiJ,KAAYF,EAAiB/I,EAAtBoJ,KAAYE,EAAUtJ,EAAfmJ,KAAYO,EAAG1J,EAARqJ,KAAUM,EAAE3J,EAAE8I,iBAAiBc,EAAEjI,EAAEmH,iBAA9D,EAAqF,OAAON,EAAE,OAAOxE,EAAExC,YAAEmI,SAAI,EAAO3F,EAAEyF,OAAOjB,EAAE,GAA/H,mBAAgFyB,EAAhF,KAAkFE,EAAlF,KAAkIC,EAAE,CAAClB,EAAEA,EAAE,GAAGtJ,EAAEsJ,EAAEvG,EAAEuG,EAAE,GAAGtJ,EAAE+C,GAAG0H,EAAE,CAACzB,KAAKzB,KAAKmD,MAAMhB,EAAE3G,GAAGyH,EAAElB,EAAE,IAAI,EAAEL,KAAK1B,KAAKmD,MAAMZ,EAAEX,GAAGqB,EAAEzH,EAAE,IAAI,GAAG4H,EAAEH,EAAElB,EAAEsB,EAAEJ,EAAEzH,EAAE8H,EAAE,GAASC,GAAE,EAAWrL,EAAE,EAAEA,EAAEgL,EAAEzB,KAAKvJ,IAAI,CAAY,IAAX,IAAMmC,EAAE,GAAWxB,EAAE,EAAEA,EAAEqK,EAAExB,KAAK7I,IAAI,CAAC,IAAIJ,EAAEoC,EAAE,IAAIP,IAAE,CAACyH,EAAEvG,EAAE4H,EAAElL,EAAEsD,EAAE+G,EAAEc,EAAExK,EAAE8I,iBAAiBa,IAAIC,EAAE9J,GAAGyB,IAAI3B,EAAE2B,EAAEoJ,iBAAiB/K,IAAI4B,EAAEqI,KAAKjK,GAAGP,EAAE,GAAGuD,GAAGhD,GAAGsK,EAAElK,IAAI,MAAMiK,GAAGrK,EAAEsJ,EAAEgB,EAAElK,GAAGkJ,IAAItJ,EAAEsJ,GAAGiB,EAAEF,GAAGrK,GAAG6K,EAAEZ,MAAMjK,EAAEsJ,EAAEvH,EAAEsH,OAAOtH,EAAEwH,KAAKxH,EAAEsH,OAAOwB,EAAEZ,MAAMlI,EAAE0H,KAAKzJ,EAAE+C,IAAIhB,EAAE0H,KAAK1H,EAAEyH,SAASqB,EAAEZ,KAAKe,KAAKH,EAAEZ,KAAKe,KAAKF,GAAE,GAAIR,EAAE1I,EAAuJ,IAArJ,IAAMqJ,EAAEzL,EAAEqL,EAAEJ,GAAGS,EAAE,IAAIC,cAAcV,EAAEzB,KAAK,IAAIyB,EAAExB,KAAK,GAAG,EAAE,GAAGmC,EAAE,IAAID,aAAa,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,IAAIE,EAAE,IAAIF,aAAa,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,IAAY1L,EAAE,EAAEA,EAAEgL,EAAEzB,KAAK,EAAEvJ,IAAI,CAAC,IAAI,IAAImC,EAAE,EAAEA,EAAE6I,EAAExB,KAAK,EAAErH,IAAI,CAAgJ,IAA/I,IAAIxB,EAAEX,EAAEgL,EAAExB,KAAK,EAAE,EAAErH,EAAQC,EAAEgJ,EAAEzK,GAAG2B,EAAE8I,EAAEzK,EAAE,GAAGJ,EAAE6K,EAAEzK,EAAE,GAAGsB,EAAEmJ,EAAEzK,EAAE,GAAqBF,EAAE2K,EAApBzK,GAAG,EAAEqK,EAAExB,MAAkBtH,EAAEkJ,EAAEzK,EAAE,GAAG4C,EAAE6H,EAAEzK,EAAE,GAAGkJ,EAAEuB,EAAEzK,EAAE,GAAOwI,EAAE,EAAElF,GAAE,IAAI9B,GAAG6I,EAAEzB,KAAK,GAAGvJ,GAAWA,GAAE,EAAEA,GAAE,EAAEA,KAAIyL,EAAExH,MAAK0H,EAAExC,KAAK/G,EAAEuJ,EAAExC,KAAK5I,EAAEoL,EAAExC,KAAK5F,EAAE4F,EAAE,EAAE,IAAI,IAAInJ,GAAE,EAAEA,GAAE,EAAEA,KAAIyL,EAAExH,MAAK0H,EAAExC,KAAK7G,EAAEqJ,EAAExC,KAAKlH,EAAE0J,EAAExC,KAAKU,EAAEV,EAAE,EAAE,IAAI,IAAInJ,GAAE,EAAEA,GAAE,EAAEA,KAAIyL,EAAExH,MAAK2H,EAAEzC,KAAK/G,EAAEwJ,EAAEzC,KAAK1I,EAAEmL,EAAEzC,KAAK5F,EAAE4F,EAAE,EAAE,IAAI,IAAInJ,GAAE,EAAEA,GAAE,EAAEA,KAAIyL,EAAExH,MAAK2H,EAAEzC,KAAK7G,EAAEsJ,EAAEzC,KAAKjH,EAAE0J,EAAEzC,KAAKU,EAAE,GAAGwB,EAAE,IAAI,IAAIrL,GAAE,EAAEA,GAAEyL,EAAEtD,OAAOnI,KAAIyK,MAAMgB,EAAEzL,OAAMyL,EAAEzL,KAAI,GAAG,MAAM,CAAC6L,QAAQT,EAAEtK,MAAM0K,EAAEM,aAAaL,EAAEM,QAAQlC,EAAEzB,KAAK,CAAC4C,EAAEzB,KAAK,EAAEyB,EAAExB,KAAK,IAAI,SAASe,EAAEvK,EAAEmC,EAAExB,GAAG,IAAM2B,EAAEwF,KAAKkE,IAAIhM,EAAE6J,EAAE1H,EAAE8J,UAAUpC,GAAG/B,KAAKoE,IAAI3L,EAAEuH,KAAKkE,IAAIhM,EAAEsD,EAAEnB,EAAE8J,UAAU3I,GAAGwE,KAAKoE,IAAIjK,EAAEE,EAAEgK,YAAYC,qBAAqB,EAAM3L,EAAE,SAASE,EAAEmH,KAAKY,MAAMZ,KAAK6C,IAAIrI,EAAE/B,IAAI,OAAOI,EAAEmH,KAAKmD,KAAKnD,KAAKC,IAAIzF,EAAE/B,IAAIuH,KAAKuE,OAAO/J,EAAE/B,GAAG,GAAG2B,GAAE,EAAGzB,EAAE,EAAEA,EAAE,EAAEA,EAAEwB,IAAIC,EAAEzB,EAAEwB,EAAE,EAAExB,EAAEwB,GAAG,IAAMsB,EAAC,SAAC,EAAG9C,GAAE,MAAM,CAAC6L,aAAa7L,EAAE8L,kBAAkB,IAAInK,IAAE,CAACyH,EAAEtG,EAAEpB,EAAEqK,gBAAgB3C,EAAEvG,EAAEC,EAAEpB,EAAEqK,gBAAgBlJ,EAAEmG,iBAAiBtH,EAAEsH,mBAAmBgD,iBAAiBvK,GAAG,SAAS0I,EAAE5K,EAAEmC,GAAa,IAAXxB,EAAW,uDAAT,IAAI2B,IAAK,yDAAcL,EAAkCjC,EAAzC2D,OAA0BlD,EAAeT,EAAhCyJ,iBAA6BvH,EAAGlC,EAAbiM,UAAe1I,EAAEmG,EAAE,IAAItH,IAAE,CAACyH,EAAE3H,EAAE2H,EAAEvG,EAAEpB,EAAEoB,EAAEmG,iBAAiBhJ,IAAI0B,EAAEF,GAAG,GAAG,MAAMsB,EAAE,MAAM,CAACmJ,mBAAmB,KAAKC,OAAO,KAAKC,eAAe,KAAKC,sBAAqB,GAAI,IAAMhD,GAAGtG,EAAEsG,EAAEtG,EAAED,GAAG,EAAE6F,EAAE5I,YAAE4B,GAAG8B,EAAE4F,EAAEV,EAAE,GAAG,MAAMpJ,EAAEoC,EAAE+H,aAAa,IAAIvJ,EAAE,kBAAkB,IAAIA,EAAE,iBAAqB8H,GAAE,EAAS9D,EAAE0F,EAAEpI,EAAEE,GAAGG,IAAIH,EAAE+H,cAAc/H,EAAEkH,iBAAiBZ,EAAE9D,EAAEiF,KAAKjF,EAAEmF,KAAK,GAAG,IAAIxG,EAAE2G,EAAEhG,EAAQtB,EAAE,MAAM,GAAG8F,EAAE,CAACwB,EAAElK,EAAE,IAAMC,EAAE,mBAAmBmC,EAAEnC,GAAG,GAAGmJ,EAAE,QAAO7F,EAAEoG,EAAE,IAAItH,IAAE,CAACyH,EAAE7J,EAAEsD,EAAEtD,EAAEyJ,iBAAiB,CAACqD,KAAK,QAAQrM,EAAEkE,IAAKkF,GAAGI,EAAE9H,EAAEmB,EAAEA,GAAG2G,EAAE9H,MAAM,CAACmB,EAAE,CAACuG,EAAE3H,EAAE2H,EAAEvG,EAAEpB,EAAEoB,GAA+E,IAA5E,IAAMnB,EAAE2F,KAAKmD,KAAKnD,KAAKkE,IAAIlE,KAAK6C,IAAI3K,EAAE+M,MAAM/M,EAAEgN,QAAQ,IAAIlF,KAAKoE,KAASvL,EAAE,EAAOsJ,EAAElK,GAAG4C,EAAE,IAAIhC,EAAEwB,GAAGxB,IAAIsJ,GAAG,EAAE3G,EAAEuG,GAAG,EAAEvG,EAAEA,GAAG,EAAEwE,KAAKC,IAAIkC,EAAElK,GAAG+H,KAAK6C,IAAIV,EAAElK,IAAI4C,IAAIsH,EAAElK,GAAgE,IAA7D,IAAMuK,EAAE,CAACL,GAAGM,EAAE,CAAC,CAACV,EAAEvG,EAAEuG,EAAEvG,EAAEA,EAAEA,IAAIsH,EAAE,WAAWE,EAAEhD,KAAK6C,IAAIC,EAAE3G,GAAGtB,EAAOsH,GAAGa,GAAGb,GAAG,EAAE3G,EAAEuG,GAAG,EAAEvG,EAAEA,GAAG,EAAEgH,EAAEE,KAAKP,GAAGM,EAAEC,KAAK,CAACX,EAAEvG,EAAEuG,EAAEvG,EAAEA,EAAEA,IAAI,MAAM,CAACoJ,mBAAmBnJ,EAAEoJ,OAAOrC,EAAEsC,eAAerC,EAAEsC,sBAAsBpE,K,iCCJ54L,4EAI+Q,SAASxG,EAAEtB,EAAE2B,EAAEL,GAAU,IAAKxB,EAAb2B,EAAQ,uDAAN,IAAI7B,IAAS,GAAG,OAAO0B,EAAEQ,KAAKhC,EAAE6B,EAAEL,EAAEgL,gBAAgB,GAAG,OAAOhL,EAAEQ,KAAK,CAAC,IAAMlC,EAAE0B,EAAEiL,2BAA2BvM,GAAGyB,EAAEH,EAAEkL,wBAAwB1M,EAAET,YAAEoC,KAAKA,EAAEkH,OAAOrH,EAAEwH,kBAAkBtH,YAAEC,GAAGD,YAAEF,EAAEwH,kBAAkBnH,EAAE/B,EAAQ,IAAA0D,EAAEtD,EAAEkJ,EAAEpJ,EAAEV,EAAEY,EAAE2C,EAAE7C,EAAE8C,EAAE5C,EAAEkJ,EAAEpJ,EAAEyB,EAAEvB,EAAE2C,EAAE7C,EAAoBgI,EAAGxG,EAApBwH,iBAAsB,OAAOrH,EAAEwH,KAAK9B,KAAK6C,IAAI1G,EAAEV,GAAGnB,EAAE2H,KAAKjC,KAAK6C,IAAI5K,EAAEmC,GAAGE,EAAE0H,KAAKhC,KAAKC,IAAI9D,EAAEV,GAAGnB,EAAE4H,KAAKlC,KAAKC,IAAIhI,EAAEmC,GAAGE,EAAEqH,iBAAiBhB,EAAErG,EAAkG,IAAI7B,K,iKCA3lB+B,E,8EAAf,WAAiBA,GAAjB,YAAAL,EAAA,6BAAAA,EAAA,yDAAmBU,EAAnB,+BAAqBL,EAAE8K,cAAmBpN,YAAE2C,GAA5C,yCAAqD,IAArD,uBAAsEA,EAAE0K,kBAAkB/K,EAAEgL,QAA5F,UAA8DlL,EAA9D,OAAyH3B,EAAGkC,EAAvB4K,oBAAwCpE,EAAiD7G,EAA/DkL,cAA4BvL,EAAmCK,EAA/CmL,YAA4BtL,EAAmBG,EAAjCoL,cAA8BjF,EAAGnG,EAAjBqL,eAAsBvL,EAAEwL,SAAS,KAA9M,0CAAyN,CAAC,MAA1N,YAAuOnN,EAAvO,kCAA+OV,YAAEuC,GAAjP,iDAAoP,GAApP,eAAqO/B,EAArO,KAAuP0D,EAAE/B,YAAEI,EAAEgL,OAAH,sBAAclL,GAAd,YAAmB7B,KAA7Q,mBAAwR0B,GAAGgC,EAAEuG,KAAKvI,GAAGgC,GAAGkF,GAAGxI,YAAE2B,EAAEgL,OAAOnE,KAAK,IAAIlF,EAAE4J,QAAQ1E,IAAIlF,EAAEuG,KAAKrB,GAAGlF,GAAG9B,GAAGxB,YAAE2B,EAAEgL,OAAOnL,KAAK,IAAI8B,EAAE4J,QAAQ1L,IAAI8B,EAAEuG,KAAKrI,GAAGsG,GAAGA,EAAEQ,SAAS,SAAAjJ,GAAI,IAAeD,EAAGC,EAAZ8N,SAAc7J,GAAGlE,GAAGY,YAAE2B,EAAEgL,OAAOvN,KAAK,IAAIkE,EAAE4J,QAAQ9N,IAAIkE,EAAEuG,KAAKzK,MAAMkE,IAApe,6C,sBAAse,SAAStB,EAAE5C,EAAEmC,GAAG,OAAOnC,EAAEqN,cAAcrN,EAAEqN,cAAcpN,YAAEkC,IAAIA,EAAE6L,6BAA6B/N,YAAED,EAAEiO,sBAAsBjO,EAAEiO,qBAAqB,O,0VCA0oBrN,E,WAA/4C,aAAyB,IAAbA,EAAa,uDAAX,KAAKX,EAAM,uDAAJ,IAAI,oBAACG,KAAK8N,OAAO,KAAK9N,KAAK+N,cAAc,IAAIC,IAAIhO,KAAKiO,OAAO,EAAEjO,KAAKkO,UAAU1N,EAAER,KAAKmO,UAAUxG,KAAK6C,IAAIhK,EAAEX,G,oDAAG,SAAiBW,EAAEX,GAAG,IAAMS,EAAEE,EAAE,IAAIX,EAAEO,EAAEJ,KAAK+N,cAAc,GAAG3N,EAAEkH,IAAIhH,GAAG,CAAC,IAAME,EAAEJ,EAAEQ,IAAIN,GAAG,OAAOE,EAAE4N,WAAW5N,EAAE4N,UAAU,IAAIhO,EAAEiO,OAAO/N,GAAGE,EAAE8N,YAAY9N,EAAE8N,WAAWC,SAAS/N,EAAE4N,SAAS,OAAO,I,sBAAE,SAAS5N,EAAEX,GAAG,IAAMS,EAAEE,EAAE,IAAIX,EAAEO,EAAEJ,KAAK+N,cAAc,GAAG3N,EAAEkH,IAAIhH,GAAG,CAAC,IAAME,EAAEJ,EAAEQ,IAAIN,GAAG,OAAOE,EAAEgO,GAAGC,KAAKC,MAAMlO,EAAE4N,WAAWhO,EAAEiO,OAAO/N,GAAGF,EAAE4F,IAAI1F,EAAEE,GAAGA,EAAEmO,MAAM,OAAO,O,sBAAK,SAASnO,EAAEX,EAAES,GAAS,IAAPF,EAAO,uDAAL,KAAY+B,EAAEnC,KAAK+N,cAAc3K,EAAE5C,EAAE,IAAIX,EAAE,GAAGsC,EAAEmF,IAAIlE,GAAG,CAAC,IAAM5C,EAAE2B,EAAEvB,IAAIwC,GAAG5C,EAAEgO,GAAGC,KAAKC,MAAMlO,EAAE4N,gBAAgBjM,EAAE6D,IAAI5C,EAAE,CAACuL,MAAMrO,EAAEkO,GAAGC,KAAKC,MAAMN,SAAS,EAAEE,WAAWlO,IAAIJ,KAAK4O,OAAO5O,KAAK6O,gB,yBAAc,SAAYrO,EAAEX,GAAG,IAAMS,EAAEN,KAAK+N,cAAc3N,EAAEI,EAAE,IAAIX,EAAES,EAAEgH,IAAIlH,IAAIE,EAAE+N,OAAOjO,K,2BAAG,SAAcI,GAAGR,KAAKiO,MAAMzN,EAAER,KAAK4O,S,mBAAO,WAAQ5O,KAAK+N,cAAce,QAAQ9O,KAAK+O,e,4BAAa,WAAiB,OAAO/O,KAAK+N,cAAc9F,O,yBAAK,WAAa,WAAC,GAAG,MAAMjI,KAAK8N,OAAd,CAA4B,IAAMtN,EAAER,KAAK+N,cAAc/N,KAAK8N,OAAOkB,aAAa,WAAwC,IAAnC,IAAMnP,EAAEoP,MAAMC,KAAK1O,GAAGF,EAAEmO,KAAKC,MAActO,EAAE,EAAEA,EAAEP,EAAEmI,QAAQnI,EAAEO,GAAG,GAAGoO,IAAIlO,EAAE,EAAK4N,UAAU9N,IAAII,EAAE6N,OAAOxO,EAAEO,GAAG,IAAI,IAAII,EAAEyH,MAAM,EAAK8G,eAAe/O,KAAKmO,c,kBAAW,WAAO,IAAM3N,EAAER,KAAK+N,cAAc,MAAI,IAAI/N,KAAKiO,OAAOjO,KAAKiO,OAAOzN,EAAEyH,MAAkC,IAAtB,IAAMpI,EAAEoP,MAAMC,KAAK1O,GAAWF,EAAE,EAAEA,EAAET,EAAEmI,OAAOhI,KAAKiO,MAAM3N,IAAIE,EAAE6N,OAAOxO,EAAES,GAAG,M,wBAAI,WAAa,MAAMN,KAAK8N,SAASqB,cAAcnP,KAAK8N,QAAQ9N,KAAK8N,OAAO,U,cCAvmC1K,EAAE,IAAI4K,IAAIlM,EAAE,IAAIE,EAAE,SAASG,EAAEtC,EAAEW,GAAG,OAAO,MAAMA,EAAEX,EAAR,UAAaA,EAAb,oBAA0BW,GAAI,SAASF,EAAET,EAAEW,GAAG,IAAMwB,EAAE,CAACwB,OAAO,KAAK4L,WAAW5O,EAAE6O,MAAM,IAAIrB,KAAK,GAAG5K,EAAEkE,IAAIzH,GAAG,CAAC,IAAMW,EAAE4C,EAAExC,IAAIf,GAAG,OAAOW,EAAE6J,KAAKrI,GAAGxB,EAAEwH,OAAO,EAAE,OAAO5E,EAAE4C,IAAInG,EAAE,CAACmC,IAAI,EAAE,SAASgH,EAAEnJ,EAAEW,GAAG,GAAG4C,EAAEkE,IAAIzH,GAAG,CAAC,IAAMmC,EAAEoB,EAAExC,IAAIf,GAAGmC,EAAExB,GAAG,KAAKwB,EAAEsN,MAAM,SAAAzP,GAAC,OAAE,MAAMA,MAAKuD,EAAEiL,OAAOxO,IAA8B,SAAS2E,EAAE3E,EAAEW,EAAEwB,GAAG,IAAIoB,EAAEkE,IAAIzH,GAAG,OAAO,MAAMW,EAAEsB,EAAEyN,iBAAiB1P,EAAEmC,GAAG,EAAE,IAAMC,EAAEmB,EAAExC,IAAIf,GAAG,GAAG,MAAMoC,EAAEzB,GAAG,OAAOsB,EAAEyN,iBAAiB1P,EAAEmC,GAAG,IAAM5B,EAAE6B,EAAEzB,GAAG6O,MAAM,GAAGjP,EAAEkH,IAAItF,GAAG,CAAC,IAAMnC,EAAEO,EAAEQ,IAAIoB,GAAG,GAAGnC,EAAEuO,WAAW,IAAIvO,EAAEuO,SAAS,CAAChO,EAAEiO,OAAOrM,GAAG,IAAI,IAAInC,EAAE,EAAEA,EAAEoC,EAAE+F,OAAOnI,IAAIoC,EAAEpC,IAAIoC,EAAEpC,GAAGwP,MAAM/H,IAAItF,IAAIC,EAAEpC,GAAGwP,MAAMhB,OAAOrM,GAAGnC,EAAEyO,YAAYzO,EAAEyO,WAAWC,QAAQ,OAAO1O,EAAEuO,SAAS,OAAO,EAAE,SAAStK,EAAEjE,EAAEW,EAAEwB,GAAG,IAAIoB,EAAEkE,IAAIzH,GAAG,OAAO,MAAMW,EAAEsB,EAAE0N,SAAS3P,EAAEmC,GAAG,KAAK,IAAMC,EAAEmB,EAAExC,IAAIf,GAAG,GAAG,MAAMoC,EAAEzB,GAAG,CAAC,IAAI,IAAIX,EAAE,EAAEA,EAAEoC,EAAE+F,OAAOnI,IAAI,GAAGoC,EAAEpC,IAAIoC,EAAEpC,GAAGwP,MAAM/H,IAAItF,GAAG,CAAC,IAAMxB,EAAEyB,EAAEpC,GAAGwP,MAAMzO,IAAIoB,GAAG,OAAOxB,EAAE4N,WAAW5N,EAAEmO,MAAM,OAAO7M,EAAE0N,SAAS3P,EAAEmC,GAAG,IAAM5B,EAAE6B,EAAEzB,GAAG6O,MAAM,GAAGjP,EAAEkH,IAAItF,GAAG,CAAC,IAAMnC,EAAEO,EAAEQ,IAAIoB,GAAG,OAAOnC,EAAEuO,WAAWvO,EAAE8O,MAAM,IAAI,IAAI5M,EAAE,EAAEA,EAAEE,EAAE+F,OAAOjG,IAAI,GAAGA,IAAIvB,GAAGyB,EAAEF,IAAIE,EAAEF,IAAIE,EAAEF,GAAGsN,MAAM/H,IAAItF,GAAG,CAAC,IAAMnC,EAAEoC,EAAEF,GAAGsN,MAAMzO,IAAIoB,GAAG,OAAOnC,EAAEuO,WAAWhO,EAAE4F,IAAIhE,EAAEnC,GAAGA,EAAE8O,MAAM,OAAO,KAAK,SAASjF,EAAE7J,EAAEW,EAAEwB,EAAEC,GAAS,IAAP7B,EAAO,uDAAL,KAAM,GAAIgD,EAAEkE,IAAIzH,GAAV,CAAuD,IAAMkC,EAAEqB,EAAExC,IAAIf,GAAG,GAAG,MAAMkC,EAAEvB,GAAX,CAA8C,IAAM2B,EAAE,CAACiM,SAAS,EAAEO,MAAM1M,EAAE0D,YAAW,EAAG8J,YAAW,EAAGnB,WAAWlO,GAAG6B,EAAEkD,MAAM,kBAAIhD,EAAEwD,YAAW,KAAKzF,OAAO,kBAAIiC,EAAEsN,YAAW,KAAK1N,EAAEvB,GAAG6O,MAAMrJ,IAAIhE,EAAEG,QAAtKL,EAAE4N,SAAS7P,EAAEmC,EAAEC,EAAE7B,QAA1F,MAAMI,GAAGsB,EAAE4N,SAAS7P,EAAEmC,EAAEC,EAAE7B,GAAwN,SAASoC,EAAE3C,EAAEW,EAAEwB,GAAG,GAAIoB,EAAEkE,IAAIzH,GAAV,CAAsD,IAAMoC,EAAEmB,EAAExC,IAAIf,GAAG,MAAMoC,EAAEzB,GAAGyB,EAAEzB,GAAG6O,MAAMhB,OAAOrM,GAAGF,EAAE6N,YAAY9P,EAAEmC,QAA9F,MAAMxB,GAAGsB,EAAE6N,YAAY9P,EAAEmC,GAAwE,SAASmB,EAAEtD,EAAEW,GAAG,IAAI4C,EAAEkE,IAAIzH,GAAG,OAAO,KAAK,IAAMmC,EAAEoB,EAAExC,IAAIf,GAAG,OAAO,MAAMmC,EAAExB,GAAG,KAAKwB,EAAExB,GAAG,SAAS0J,EAAElI,EAAEoB,EAAEtB,EAAEK,EAAE7B,EAAE0I,GAAS,IAAPV,EAAO,uDAAL,KAAY9D,EAAErB,EAAEnB,EAAEoB,GAAGU,EAAEU,EAAEhB,OAAckG,EAAgBlF,EAAtB6K,MAAmB7M,EAAGgC,EAAd4K,WAAgB,IAAGtL,GAAGA,EAAE2F,OAAO3H,EAAE2H,MAAM3F,EAAE6F,OAAO7H,EAAE6H,MAAM7F,EAAE8F,OAAO9H,EAAE8H,MAAM9F,EAAE+F,OAAO/H,EAAE+H,KAApE,CAA2J,IAArE,IAAAK,EAAEpI,EAAE6B,QAAQiM,YAA8BhQ,EAAe4C,EAAhC8G,iBAA6BuG,EAAGrN,EAAbsN,UAAevG,EAAE,IAAIwG,IAAY5M,EAAE,EAAEA,EAAE+G,EAAElC,OAAO7E,IAAI,CAAC,IAAMnB,EAAEkI,EAAE/G,GAAG,KAAGnB,EAAE2H,KAAK3H,EAAEyH,MAAMtH,GAAGH,EAAE6H,KAAK7H,EAAE4H,MAAMzH,GAApC,CAA+C,IAAIiB,EAAEnB,YAAED,EAAEpC,EAAE0I,GAAGzI,YAAEgQ,KAAKzM,EAAEyM,EAAE1E,iBAAiB/H,IAAI,IAAMtB,EAAE,IAAItB,IAAE,CAACkJ,EAAEvH,EAAEgB,EAAEhB,EAAEmH,iBAAiBtH,EAAEsH,mBAAmB,GAAG,MAAMhJ,KAAKA,EAAEF,YAAE0B,EAAElC,EAAEoC,EAAEsG,IAAI,OAAO,MAA6DvG,YAAEzB,EAAEkC,EAAEwG,GAAG,WAAnDxE,EAAnB,EAAM2H,aAAiCrI,EAAvC,EAAqBsI,kBAAqC1C,EAA1D,EAAyC4C,iBAAwC,GAAG5C,EAAE,OAA6Z,IAAjZ,IAAaS,EAAG3H,EAAfwJ,YAAyBgE,EAAG7F,EAAVH,OAAYI,EAAE,CAACV,EAAE/B,KAAKC,IAAI,EAAED,KAAKY,OAAOnF,EAAEqG,KAAKuG,EAAEtG,GAAG5F,EAAE4F,IAAIvG,EAAEwE,KAAKC,IAAI,EAAED,KAAKY,OAAOyH,EAAE7M,EAAEC,EAAEyG,MAAM/F,EAAEX,KAAKwH,EAAEhD,KAAKmD,MAAM1H,EAAEuG,KAAKvG,EAAEqG,MAAM3F,EAAE4F,EAAE,IAAIuG,EAAEtI,KAAKmD,MAAM1H,EAAEyG,KAAKzG,EAAEwG,MAAM9F,EAAEX,EAAE,IAAIsH,EAAEjG,EAAE,EAAE2F,EAAE+F,kBAAkB/F,EAAEgG,WAAWrG,EAAEtF,EAAE,EAAE2F,EAAEiG,mBAAmBjG,EAAEkG,YAAYC,EAAE,EAAEC,EAAE5I,KAAKC,IAAI,EAAED,KAAKY,MAAM6B,EAAEV,EAAEe,GAAG6F,GAAGE,EAAE7I,KAAKC,IAAI,EAAED,KAAKY,MAAM6B,EAAEjH,EAAE2G,GAAGwG,GAAG9E,EAAE7D,KAAKY,OAAO6B,EAAEV,EAAEiB,EAAE,GAAGF,GAAG6F,EAAE5F,EAAE/C,KAAKY,OAAO6B,EAAEjH,EAAE8M,EAAE,GAAGnG,GAAGwG,EAAUzQ,EAAE2Q,EAAE3Q,GAAG6K,EAAE7K,IAAI,IAAI,IAAIW,EAAE+P,EAAE/P,GAAGgL,EAAEhL,IAAI+I,EAAE3E,IAAF,UAASJ,EAAT,YAAc3E,EAAd,YAAmBW,KAAKkJ,EAAEZ,SAAS,SAACjJ,EAAEW,GAAK,IAAI+I,EAAEjC,IAAI9G,GAAG,CAAC,IAAMX,EAAE6J,EAAE9I,IAAIJ,IAAI,MAAMX,GAAGA,EAAE8F,YAAY9F,EAAE4P,aAAa/F,EAAE2E,OAAO7N,OAAOgE,EAAEhB,OAAO,CAACiG,KAAK3H,EAAE2H,KAAKG,KAAK9H,EAAE8H,KAAKD,KAAK7H,EAAE6H,KAAKE,KAAK/H,EAAE+H,S,mWCAv2EjK,EAAE,SAAAA,GAAI,IAAIoJ,EAAC,kDAAiB,aAAa,kCAAC,eAASvG,YAAgBgO,mBAAmB,UAAU,EAAK3Q,MAAM,KAAK,EAAK0B,KAAK,KAAK,EAAKkP,WAAW,KAAK,EAAK/J,SAAS,KAAK,EAAKgK,oBAAoB,KAAvJ,EAA9B,kDAA0L,WAAuB,OAAO3Q,KAAKF,MAAM0I,UAAU,2BAA2BxI,KAAKF,MAAM0I,UAAUxI,KAAKF,MAAM0I,SAASoI,yBAAjT,uEAAwU,WAAyB/Q,EAAEO,GAA3B,MAAA0B,EAAA,uCAAAA,EAAA,yDAA0CK,EAAGnC,KAATF,MAAkBD,EAAtD,yCAA+DgR,QAAQC,OAAO,IAAI7O,IAAE,0CAA0C,gCAAgC,CAACnC,MAAMqC,MAArK,UAA6LL,EAAGK,EAAhB4O,aAAkB/O,EAAED,YAAEI,EAAE/B,GAAO0B,GAAItB,YAAEwB,GAArN,sBAA8N,IAAIC,IAAE,0CAA0C,iDAAiD,CAAC8O,aAAajP,EAAEmL,cAAcjL,IAA7V,cAAuWpC,EAAE,GAAzW,SAA4XuC,EAAE6O,SAASnR,GAAvY,OAA0Y,GAA1Y,SAAmXmJ,EAAnX,EAA6WiI,MAAkC,CAA4L,GAA7KpR,EAAEmJ,EAAEkI,KAAK,OAAM1Q,EAAE,CAAC2Q,SAAS,IAAG/Q,EAAE,4BAAgCJ,KAAKoR,sBAAsBvR,EAAEO,IAAS6B,EAAE,OAAOqG,EAAEnG,EAAEiN,aAAa,OAAOtL,EAAEwE,EAAE+I,qBAAgB,EAAOvN,EAAEwN,WAAerP,EAAE+F,OAAO,IAAS5H,EAAE6B,EAAEiG,QAAQ,SAAA1H,GAAI,IAAMJ,EAAEI,EAAE+Q,WAAWN,OAAOzQ,EAAE+Q,WAAWC,OAAOhR,EAAE+Q,WAAWE,MAAM,OAAOzO,OAAO5C,KAAKP,MAAUmI,OAAO,IAASnI,EAAEO,EAAE,IAAQ,IAAUA,KAAKP,EAAE0R,WAAc1R,EAAE0R,WAAWG,eAAetR,KAAU+B,EAAEnC,KAAKyQ,mBAAmBrQ,EAAEI,EAAE2B,GAAGnC,KAAKoR,sBAAsBvR,EAAE0R,WAAWnR,GAAG+B,KAAWL,EAAE,IAAIxB,IAAEN,KAAK0Q,WAAW/M,QAAQ,KAAKnD,IAAKV,MAAMqC,EAAEL,EAAE6P,YAAY7P,EAAEhC,MAAMF,EAAEyK,KAAKvI,GAA19B,yBAAo+BlC,GAAp+B,iDAAxU,uFAA8yC,WAAmB,IAAgCY,EAA1BX,EAAEG,KAAKF,MAAM6G,SAAe9G,GAAGA,EAAEyJ,mBAAmB9I,EAAE,IAAIyB,IAAE,uCAAuC,+CAA+C,CAACnC,MAAME,KAAKF,SAAS,IAAMM,EAAE0B,YAAE9B,KAAKF,MAAM4Q,WAAW1Q,KAAKwB,KAAK8H,kBAAiB,GAAInH,EAAEH,YAAEhC,KAAKF,MAAM4Q,WAAW1Q,KAAKwB,KAAK8H,iBAAiBlJ,GAAG,OAAO,MAAM+B,IAAI3B,EAAE,IAAIyB,IAAE,qCAAqC,uEAAuE,CAACnC,MAAME,KAAKF,SAASE,KAAK4F,KAAK,aAAazD,GAAGnC,KAAK2Q,sBAAsB3Q,KAAK2Q,oBAAoB7O,YAAE9B,KAAKF,MAAM4Q,WAAW1Q,KAAKwB,KAAK8H,kBAAiB,IAAK9I,EAAEqQ,QAAQC,OAAOtQ,GAAGqQ,QAAQe,YAAj6D,mCAA26D,SAAsB/R,EAAEW,GAAG,GAAG,iBAAiBX,EAAE,CAAC,IAAwHW,EAAEJ,EAApHA,EAAEJ,KAAKF,MAAMmN,eAAejN,KAAKF,MAAMmN,cAAc4E,WAAW1P,EAAEnC,KAAK8R,cAAc1R,EAAEI,GAAGyB,EAAEE,GAAGA,EAAE4P,OAAO,GAAG9P,EAAW,OAAOpC,EAAE+O,OAAOlB,QAAQ,MAAM,GAAStN,GAANI,EAAE,KAAQ,IAAIR,KAAKgS,uBAAuBnS,EAAEW,EAAEJ,EAAE6B,IAAIpC,EAAE+O,OAAOlB,QAAQ,MAAM,GAAGlN,EAAEJ,EAAE,IAAIJ,KAAKgS,uBAAuBnS,EAAEW,EAAEJ,EAAE6B,IAAIjC,KAAKiS,wBAAwBpS,EAAEoC,GAAI,OAAOpC,IAAhyE,2BAAkyE,SAAcA,EAAEW,GAAG,GAAIX,GAAIA,EAAEmI,QAASxH,EAAnB,CAA4B,IAA4B2B,EAAtB/B,EAAEI,EAAE0R,cAAoB,OAAOrS,EAAEyP,MAAM,SAAAzP,GAAC,SAAKA,EAAEsS,WAAWtS,EAAEsS,UAAUD,gBAAgB9R,GAAGP,EAAEsS,UAAUD,gBAAgB9R,EAAEgS,QAAQ,KAAK,QAAQjQ,EAAEtC,GAAE,MAAMsC,KAA7+E,oCAA++E,SAAuBtC,EAAEW,EAAEJ,EAAE+B,GAAE,WAAC,OAAOtC,GAAGW,GAAGJ,GAAG+B,EAAEtC,EAAE+O,OAAOyD,MAAM7R,GAAG2H,KAAK,SAAAtI,GAAC,OAAE,EAAKoS,wBAAwBpS,EAAEsC,MAAK+O,KAAK9Q,GAAGP,IAAvmF,qCAAymF,SAAwBA,EAAEW,GAAG,IAAIX,IAAIW,EAAE,OAAOX,EAAE,IAAMO,EAAE2C,OAAOlD,GAAG,OAAOyK,MAAMlK,GAAGP,EAAEW,EAAEuR,OAAO3R,OAAtsF,GAAeR,GAA4rF,OAAOC,YAAE,CAACO,eAAK4I,EAAE5G,UAAU,aAAQ,GAAQvC,YAAE,CAACO,eAAK4I,EAAE5G,UAAU,YAAO,GAAQvC,YAAE,CAACO,eAAK4I,EAAE5G,UAAU,kBAAa,GAAQvC,YAAE,CAACO,eAAK4I,EAAE5G,UAAU,gBAAW,GAAQvC,YAAE,CAACO,YAAE,CAACiC,UAAS,KAAM2G,EAAE5G,UAAU,mBAAmB,MAAM4G,EAAEnJ,YAAE,CAACsC,YAAE,2CAA2C6G,I,0HCAvuGsJ,EAAE,CAACC,UAAU,EAAEC,OAAO,EAAEC,OAAO,EAAEC,UAAU,CAAC,EAAE,EAAE,GAAGC,UAAU,CAAC,IAAI,IAAI,KAAKC,OAAO,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,KAAKC,UAAS,EAAGC,MAAM,CAAC,EAAE,EAAE,GAAGC,gBAAgB,CAAC,EAAE,EAAE,GAAGC,SAAS,KAAKC,eAAe,KAAK3Q,KAAK,WAAiBoH,E,kDAAY,aAAiC,MAArBlJ,EAAqB,uDAAnB,KAAKX,EAAc,uDAAZ,KAAKS,EAAO,uDAAL,KAAK,4BAAC,gBAAa4S,qBAAoB,EAAG,EAAKC,YAAY,KAAK,EAAKC,mBAAkB,EAAG,EAAK3L,WAAW,EAAE,EAAK4L,WAAW,CAAC,EAAE,GAAG,EAAKC,sBAAsB,KAAK,EAAKzG,OAAO,KAAK,EAAK0G,oBAAmB,EAAG,EAAKC,WAAW,EAAE,EAAK1G,WAAW,EAAE,EAAK2G,SAAS,EAAE,EAAKC,QAAQ,KAAK,EAAKC,aAAa,KAAK,EAAKC,YAAW,EAAG,EAAKC,SAAS,KAAK,EAAKC,eAAe,KAAK,EAAKC,eAAe,KAAK,EAAKnH,MAAM,KAAK,EAAKlD,EAAE,EAAE,EAAKvG,EAAE,EAAE,EAAK6Q,WAAW,CAACC,IAAIjL,eAAK,EAAKkL,OAAO1T,EAAE,EAAK2T,cAActU,EAAE,EAAKuU,cAAc9T,EAAhf,E,2CAAkf,WAAU,IAAME,EAAER,KAAKqU,cAAc,MAAM7T,GAAGA,EAAE8T,SAASxL,SAAS,SAAAtI,GAAC,OAAEA,EAAE+T,aAAYvU,KAAKwU,eAAe,KAAKxU,KAAKyU,sBAAsB,KAAKzU,KAAK0U,iBAAiB,O,gCAAK,WAA2B,OAAO1U,KAAKsT,uBAAuBhB,G,IAAE,SAAyB9R,GAAGR,KAAKsT,sBAAsB9S,I,kBAAE,WAAa,OAAOR,KAAK0T,S,IAAQ,SAAWlT,GAAGR,KAAK0T,QAAQlT,EAAER,KAAKwU,iBAAiBxU,KAAKwU,eAAeD,UAAUvU,KAAKwU,eAAe,KAAKxU,KAAK2U,sBAAsB,KAAK3U,KAAKmT,YAAY,Q,qBAAM,WAAgB,OAAOnT,KAAK4T,Y,IAAW,SAAcpT,GAAGR,KAAK4T,aAAapT,GAAGR,KAAK4U,QAAQ5U,KAAKyB,QAAQzB,KAAK6U,iBAAiB7U,KAAK4T,WAAWpT,I,mBAAE,WAAc,OAAOR,KAAK6T,U,IAAS,SAAYrT,GAAGR,KAAK6T,SAASrT,EAAER,KAAK8U,sB,yBAAoB,WAAoB,OAAO9U,KAAK8T,gB,IAAe,SAAkBtT,GAAGR,KAAK8T,eAAetT,EAAER,KAAKwU,gBAAgBxU,KAAKwU,eAAeO,iBAAiB/U,KAAKoT,mBAAmB,aAAa5S,GAAG,UAAUA,EAAE,KAAK,Q,yBAAM,WAAoB,OAAOR,KAAK+T,gB,IAAe,SAAkBvT,GAAGR,KAAK+T,eAAevT,EAAER,KAAKyU,wBAAwBzU,KAAKyU,sBAAsBF,UAAUvU,KAAKyU,sBAAsB,KAAKzU,KAAKmT,YAAY,Q,+BAAM,WAAoBnT,KAAKkT,sBAAsBlT,KAAKkT,qBAAoB,EAAGlT,KAAK6U,mB,0BAAiB,SAAarU,GAAS,IAAAyB,EAAEpC,YAAEG,KAAKgU,WAAWC,KAApB,EAA+BzT,EAAEwU,mBAAmB,CAAC,EAAE,GAAGhV,KAAK0J,EAAE1J,KAAKmD,GAAtE,mBAA0B6F,EAA1B,KAA4BjH,EAA5B,KAAyEyC,EAAExE,KAAK8M,WAAW9M,KAAKwT,WAAWhT,EAAEsM,WAAWtK,EAAEgC,EAAExE,KAAK4M,MAAM9I,EAAEU,EAAExE,KAAK6M,OAAOyF,EAAE3K,KAAKsN,GAAGjV,KAAKyT,SAAS,IAAInT,YAAE2B,EAAEA,EAAED,YAAEgH,EAAEjH,IAAIzB,YAAE2B,EAAEA,EAAED,YAAEQ,EAAE,EAAEsB,EAAE,IAAI1D,YAAE6B,EAAEA,GAAGqQ,GAAGhS,YAAE2B,EAAEA,EAAED,aAAGQ,EAAE,GAAGsB,EAAE,IAAI3B,YAAEF,EAAEA,EAAED,YAAEQ,EAAEsB,IAAIhC,YAAE9B,KAAKgU,WAAWC,IAAIzT,EAAE0U,gBAAgBjT,K,yBAAG,WAAc,IAAIjC,KAAKwU,eAAe,OAAO,KAAK,IAAMhU,EAAE,GAAGX,EAAE,GAAG,OAAOG,KAAKyU,wBAAwB5U,EAAEwK,KAAKrK,KAAKyU,uBAAuBjU,EAAE6J,KAAK,oBAAoBrK,KAAKwU,iBAAiB3U,EAAEwK,KAAKrK,KAAKwU,gBAAgBhU,EAAE6J,KAAK,YAAYrK,KAAK0U,mBAAmB7U,EAAEwK,KAAKrK,KAAK0U,kBAAkBlU,EAAE6J,KAAK,eAAe,CAAC8K,MAAM3U,EAAE8T,SAASzU,K,4BAAG,WAAiB,GAAGW,YAAER,KAAKmT,aAAa,CAAC,IAAM3S,EAAER,KAAKqU,cAAc,GAAG,MAAM7T,EAAE,OAAO,EAAER,KAAKmT,YAAY3S,EAAE8T,SAASnM,KAAK,SAAA3H,GAAC,OAAEA,EAAE4U,WAAWxI,MAAMpM,EAAE4U,WAAWvI,OAAO,KAAIwI,QAAQ,SAAC7U,EAAEX,GAAH,OAAOW,EAAEX,KAAI,OAAOG,KAAKmT,c,sBAAY,WAAWnT,KAAK8U,sB,sBAAoB,WAAW9U,KAAK8U,sB,2BAAoB,YAA0B,IAAKjV,EAAES,EAAEF,EAAZI,EAAG,EAAX8U,QAAsB,IAAItV,KAAK4U,MAAM,OAAO,OAAO/U,EAAEG,KAAKwU,iBAAiB3U,EAAE0U,UAAU,OAAOjU,EAAEN,KAAKyU,wBAAwBnU,EAAEiU,UAAU,OAAOnU,EAAEJ,KAAK0U,mBAAmBtU,EAAEmU,UAAUvU,KAAKwU,eAAe,KAAKxU,KAAK2U,sBAAsB,KAAK3U,KAAKyU,sBAAsB,UAAUzU,KAAK0U,iBAAiB,MAAM,GAAI1U,KAAKkT,oBAAT,CAAoClT,KAAKkT,qBAAoB,EAAG,IAAM/Q,EAAEnC,KAAKkU,OAAOpS,EAAEK,GAAGA,EAAEoT,QAAQpT,EAAEoT,OAAOvN,OAAO,EAAEhI,KAAKwV,8BAA8BhV,GAAGR,KAAKwU,iBAAiB1S,GAAG9B,KAAKyV,uBAAuBjV,GAAGR,KAAKmU,gBAAgBnU,KAAKyU,wBAAwBzU,KAAKyU,sBAAsBjQ,YAAEhE,EAAER,KAAKmU,iBAAiBnU,KAAKwU,eAAekB,QAAQ,OAAO1V,KAAKe,YAAYf,KAAKyB,QAAQzB,KAAK6U,oB,2CAAiB,SAA8BrU,GAAG,IAAIX,EAAES,EAAQF,EAAEJ,KAAKkU,OAAOjS,YAAEjC,KAAKkU,OAAOlU,KAAK2V,SAAS,KAAK,GAAKvV,GAAGA,EAAEmV,QAAQnV,EAAEmV,OAAOvN,OAAO,EAAlC,CAAgK,IAAM7F,EAAE,MAAMnC,KAAK2U,uBAAuB,MAAM3U,KAAK2V,SAAS3V,KAAK2U,uBAAuB3U,KAAK2V,SAAS3V,KAAK2U,sBAAsBzD,KAAK,MAAMlR,KAAK2V,QAAQzE,KAAK,IAAI,GAAGlR,KAAKwU,eAAe,CAAC,GAAGrS,EAAE,OAAOnC,KAAKwU,eAAeD,UAAUvU,KAAK2U,sBAAsB,KAAK3U,KAAKwU,eAAe,KAAK,IAAM1S,EAAE9B,KAAKoU,eAAe,UAAUpL,EAAEhJ,KAAKuT,sBAAsB,OAAO1T,EAAEW,EAAEoV,aAAaC,eAAehW,EAAEgW,cAAc7V,KAAKwU,eAAehS,YAAEhC,EAAEJ,EAAE0B,EAAEkH,GAAGhJ,KAAKoT,kBAAkB,OAAO9S,EAAEE,EAAEoV,aAAaC,mBAAc,EAAOvV,EAAEwV,mBAAmB9V,KAAK2U,sBAAsB3U,KAAK2V,aAAhqB3V,KAAKwU,iBAAiBxU,KAAKwU,eAAeD,UAAUvU,KAAK2U,sBAAsB,KAAK3U,KAAKwU,eAAe,Q,oCAAgkB,SAAuBhU,GAAG,IAAMX,EAAEG,KAAK+V,UAAUzV,EAAEN,KAAKgW,qBAAqBhD,SAAS,OAAO1S,EAAET,EAAES,EAAE0H,SAASnI,EAAEmI,QAAQ1H,EAAEgP,MAAM,SAAC9O,EAAEF,GAAH,OAAOE,IAAIX,EAAES,OAAMN,KAAK0U,mBAAmB1U,KAAK0U,iBAAiBH,UAAUvU,KAAK0U,iBAAiB,MAAM1U,KAAK0U,iBAAiB5Q,YAAEtD,EAAEF,QAAQN,KAAK+V,UAAUzV,SAAI,GAAQN,KAAK0U,iBAAiB5Q,YAAEtD,EAAEF,QAAQN,KAAK+V,UAAUzV,KAAKN,KAAK0U,mBAAmB1U,KAAK0U,iBAAiBH,UAAUvU,KAAK0U,iBAAiB,WAAW1U,KAAK+V,UAAU,W,GAArlJhU,KCAvjBlC,E,kDAAY,WAAYW,EAAEX,EAAEsC,GAAS,MAAPL,EAAO,uDAAL,KAAK,4BAAC,cAAMtB,EAAEX,EAAEsC,IAAQ8T,OAAO,IAAI3V,EAAEwB,EAAE,KAAK,MAAM,EAAKmU,OAAO5C,WAAWlR,EAAE,EAAK8T,OAAOC,KAAK,WAAW,kBAAI,EAAKzU,WAA3G,E,2CAAqH,WAAU,gEAAgBzB,KAAKiW,OAAOE,UAAUnW,KAAKiW,OAAO,KAAKjW,KAAK4U,MAAM,O,sBAAgD,WAAiB,OAAO5U,KAAKiW,OAAOxO,Y,IAA/E,SAAejH,GAAGR,KAAKiW,OAAOxO,WAAWjH,I,4BAAiD,WAAiB,OAAOR,KAAKiW,OAAOG,mB,0BAAiB,SAAa5V,EAAEF,GAAG,oEAAmBE,EAAEF,GAAGN,KAAKiW,OAAOjC,WAAWC,IAAIjU,KAAKgU,WAAWC,M,sBAAI,WAAWjU,KAAKiW,OAAOrB,MAAM5U,KAAK4U,Q,sBAAM,WAAW5U,KAAKiW,OAAOrB,MAAM,S,GAA9gBpU,KCAwKwB,G,kDAAY,aAAa,kCAAC,eAASS,YAAgBiK,sBAAqB,EAA/C,E,8CAAkD,SAAW7M,GAAG,IAAMS,EAAEN,KAAKqW,eAAexW,GAAG,OAAO,IAAIoC,EAAEpC,EAAES,EAAEN,KAAKoG,cAAcO,SAASsB,Q,yBAAM,c,iCAAe,SAAoBpI,GAAE,WAAOS,EAAET,EAAEgH,mBAAmB,CAAC1G,KAAK,gBAAgB2G,QAAQ,CAAC3E,IAAEmU,QAAQnP,OAAO,kBAAI,EAAKE,SAASc,KAAK,SAAAtI,GAAC,OAAEA,EAAEoW,WAASlP,UAAUvG,IAAEyG,MAAM,uGAAoCpH,IAApC,CAAuCS,M,sBAAG,SAAST,GAAGG,KAAKsB,SAASzB,EAAEkH,YAAYvG,IAAEyG,KAA9B,gDAAAjH,MAAA,KAAAA,KAAkDH,K,4BAAG,SAAeW,GAAG,IAAM2B,EAAEnC,KAAKoG,cAAcmQ,cAAc1W,cAAIW,GAAG,GAAGR,KAAK0M,sBAAsBlM,EAAEgW,MAAM,CAAM,IAAU3W,EAAGG,KAAKoG,cAAjBO,SAA+BvG,EAAEE,YAAET,EAAEyJ,kBAAkB,GAAGlJ,EAAE,CAAC,IAAiBE,EAAGT,EAAE4W,MAAMjW,EAAEyF,OAAxB6G,WAA+B7K,EAAE7B,EAAEE,EAAET,EAAEoI,KAAK,GAAGjG,EAAEC,GAAGpC,EAAEoI,KAAK,GAAGhG,GAAG3B,EAAE,EAAE6B,EAAE,IAAIH,EAAExB,EAAEgW,MAAMrU,EAAE,IAAIH,EAAExB,EAAEgW,OAAO,OAAOrU,M,GAArtB/B,K,UCAohDsW,GAAEpW,IAAEG,UAAU,+CAA+CyK,GAAE,CAAC,EAAE,GAAOG,GAAC,kDAA2B,aAAa,kCAAC,eAAS5I,YAAgBkU,cAAc,KAAK,EAAKvQ,cAAc,KAAK,EAAKwQ,YAAY,KAAK,EAAKC,uBAAuB,KAAK,EAAKC,sBAAsB,KAAK,EAAKC,YAAY,KAAK,EAAKC,qBAAqB,KAAK,EAAKC,gBAAgB,KAAK,EAAKC,aAAa,KAAK,EAAKC,uBAAsB,EAAG,EAAKC,wBAAwB,KAAK,EAAKC,kBAAkB,KAAK,EAAKC,iBAAiB,KAAK,EAAKC,wBAAuB,EAAG,EAAKC,uBAAsB,EAAG,EAAKC,uBAAsB,EAAG,EAAKC,iBAAiB3V,aAAG,SAAAlC,GAAC,OAAE,EAAK8X,aAAa9X,KAAI,KAAtgB,EAAxC,8CAAmjB,WAAa,IAAMA,EAAEG,KAAK4X,mBAAmB5X,KAAK6X,oBAAoBhY,KAAznB,gCAA4nB,WAA2B,OAAO,MAAMG,KAAK8C,KAAK,yBAAyB9C,KAAK8C,KAAK,yBAAjtB,IAAyuB,SAAyBjD,GAAE,WAAC,GAAGG,KAAK2W,eAAe3W,KAAK8X,uBAAuBjY,EAAE,CAACG,KAAK2W,cAAcR,UAAUnW,KAAK+W,YAAYgB,oBAAoB,IAAMvX,EAAER,KAAKgY,cAAcnY,GAAGG,KAAK2W,cAAc,IAAIhM,IAAE,CAACsN,YAAY,QAAQC,YAAW,EAAGC,YAAY,SAAAtY,GAAC,OAAE,EAAKsY,YAAYtY,IAAGuY,YAAY,SAAAvY,GAAC,OAAE,EAAKuY,YAAYvY,IAAGwY,UAAU7X,EAAE8X,aAAatY,KAAKoG,gBAAgBpG,KAAK4F,KAAK,uBAAuB/F,GAAGG,KAAK6E,mBAApnC,qBAAqoC,SAAQhF,EAAEW,GAAG,GAAGR,KAAKe,UAAU,OAAO8P,QAAQe,QAAQ,MAAM,IAAMzP,EAAEnC,KAAKwB,KAAK+W,MAAM3Y,YAAEC,EAAEW,IAAI,OAAOqQ,QAAQe,QAAQ,IAAI9N,IAAE,CAACyN,WAAW,GAAG7N,SAASvB,OAAtxC,oBAA2xC,SAAOtC,GAAGG,KAAK4W,YAAY4B,QAAQxY,KAAK4W,YAAYrQ,MAAM1G,EAAE0G,MAAMvG,KAAK2W,cAAc9Q,OAAOhG,GAAGG,KAAK4W,YAAY6B,SAAS,MAAqC5Y,EAAE0G,MAA1B/F,EAAb,EAAMgD,OAAoBrB,EAA1B,EAAe2K,WAAmBxM,EAAlC,EAA4ByF,MAAiB3F,EAAEJ,KAAKoG,cAAcK,uBAAuBnG,GAAG,GAAGN,KAAKF,MAAMwW,OAAO,CAAC,IAAIxU,EAAE,IAAI9B,KAAK8X,sBAAsB9X,KAAKmX,sBAAsB,CAAC,IAAMtX,EAAEG,KAAKiX,gBAAgB7W,EAAE6F,OAAO3F,EAAEE,EAAEkY,OAAOlY,EAAEwI,IAAE2P,SAASnY,GAAG8H,YAAEtI,KAAK6W,uBAAuB7W,KAAK8W,sBAAsBxW,EAAE6B,EAAEtC,EAAEG,KAAKF,MAAMwW,OAAOsC,SAASC,UAAU7Y,KAAKmX,uBAAsB,GAAI,OAAOrV,EAAE9B,KAAKkX,mBAAc,EAAOpV,EAAEmE,SAAS7F,EAAE6F,QAAQjG,KAAKkX,aAAa9W,EAAE,MAAMJ,KAAKqX,mBAAmBrX,KAAK8Y,0BAA0B9Y,KAAK2W,cAAcoC,gBAAgB,IAAI/Y,KAAKiF,aAAa,cAA78D,oBAAy9D,WAAQ,WAACjF,KAAKF,MAAMkZ,gCAAgCnO,cAAIoO,uBAAuBjZ,KAAKyX,uBAAsB,GAAIzX,KAAKF,MAAMwW,SAAStW,KAAKF,MAAMwW,OAAOsC,SAASM,kBAAiB,GAAIlZ,KAAKmZ,sBAAsBnZ,KAAKoG,cAAc,IAAI+D,IAAEnK,KAAK2G,SAAS3G,KAAK0Q,YAAY1Q,KAAK4W,YAAY,IAAIwC,IAAE,CAACd,aAAatY,KAAKoG,cAAciT,YAAY,GAAGC,QAAQ,SAACzZ,EAAEW,GAAH,OAAO,EAAK+Y,UAAU1Z,EAAEW,MAAK,IAAMX,EAAEG,KAAKgY,cAAchY,KAAK8X,sBAAsB9X,KAAK2W,cAAc,IAAIhM,IAAE,CAACsN,YAAY,QAAQC,YAAW,EAAGC,YAAY,SAAAtY,GAAC,OAAE,EAAKsY,YAAYtY,IAAGuY,YAAY,SAAAvY,GAAC,OAAE,EAAKuY,YAAYvY,IAAGwY,UAAUxY,EAAEyY,aAAatY,KAAKoG,gBAAgBpG,KAAK+W,YAAY,IAAIlH,GAAE7P,KAAKoG,eAAepG,KAAK+W,YAAYrK,qBAAqB1M,KAAKwX,sBAAsBxX,KAAKuE,UAAUiV,SAASxZ,KAAK+W,aAAa/W,KAAK2E,QAAQC,IAAI,CAACpC,YAAExC,KAAK,CAAC,gBAAgB,mBAAmB,kBAAI,EAAK0X,mBAAmBxX,OAAO,SAAAL,GAAIoC,YAAEpC,IAAI6W,GAAE/V,MAAMd,SAAQ2C,YAAExC,KAAK,CAAC,wBAAwB,SAACH,EAAEW,GAAK,aAAaX,GAAG,aAAaW,IAAI,EAAKiZ,2CAA2C,EAAK/B,mBAAmBxX,OAAO,SAAAL,GAAIoC,YAAEpC,IAAI6W,GAAE/V,MAAMd,MAAM,EAAK6Z,sBAAsBlX,YAAExC,KAAK,CAAC,oCAAoCA,KAAK0Z,mBAAmB,UAAU1Z,KAAK2Z,8BAA9lG,oBAA0nG,WAAS3Z,KAAK2E,QAAQY,OAAO,UAAUvF,KAAKF,MAAM8Z,gCAAgC5Z,KAAK2W,cAAcR,UAAUnW,KAAK4W,YAAY9H,QAAQ9O,KAAKuE,UAAUwT,oBAAoB/X,KAAK4W,YAAY5W,KAAK2W,cAAc3W,KAAKoG,cAAc,KAAK0D,YAAE9J,KAAK6W,uBAAuB7W,KAAK8W,yBAAp4G,uBAA25G,WAAY9W,KAAK6E,kBAA56G,wBAA47G,WAAa7E,KAAK6E,kBAA98G,qBAA89G,WAAS,YAAE7E,KAAK6Z,kBAAkB7Z,KAAK8X,uBAAuB9X,KAAKsX,kBAAkBtX,KAAKsX,iBAAiB/I,QAAQvO,KAAKsX,iBAAiB9S,cAAI,IAAIxE,KAAK4W,YAAY5O,QAAQhI,KAAK2X,aAAa3X,KAAKsX,iBAAiBwC,QAAQ3U,MAAM,WAAK,EAAKoS,wBAAuB,EAAG,EAAK1S,oBAAoB,IAAMhF,EAAEG,KAAKgY,cAAchY,KAAK8X,sBAAsB9X,KAAK2W,cAAcoC,gBAAgBlZ,GAAGG,KAAK6E,kBAA51H,mDAA42H,SAAsChF,EAAEW,GAAG,OAAOkJ,YAAE7J,EAAEW,EAAER,KAAKwB,QAAz6H,8DAA+6H,iCAAAM,EAAA,sDAAkB9B,KAAKsE,iBAAiBtE,KAAKe,YAAYf,KAAKF,MAAMia,iBAAiB/Z,KAAK8Y,0BAA0B9Y,KAAK2Z,2BAA0B,GAAI3Z,KAAK4W,YAAYoD,QAAQha,KAAK2W,cAAcsD,MAAMnR,SAAS,SAAAjJ,GAAC,OAAE,EAAKqa,kBAAkBra,MAAKG,KAAKiF,aAAa,aAAnQ,gDAA/6H,8EAA+rI,WAAa,OAAOjF,KAAK4W,YAAY5O,OAAO,GAAGhI,KAAKuX,yBAAnvI,yBAA0wI,SAAY1X,GAAE,YAAOW,EAAER,KAAK+W,YAAYoD,WAAWta,GAAGsC,EAAE3B,EAAEyV,OAAO,OAAM,EAAUjW,KAAKoG,cAAcgU,cAAclP,GAAE1K,EAAE8C,KAA/C,mBAACnB,EAAEuH,EAAH,KAAKvH,EAAEgB,EAAP,KAAoDhB,EAAE2K,WAAW9M,KAAKoG,cAAcmB,kBAAkB/G,EAAE8C,KAAxG,EAAgItD,KAAKoG,cAAcO,SAASsB,KAA5J,mBAA8G9F,EAAEyK,MAAhH,KAAsHzK,EAAE0K,OAAxH,KAAiK7M,KAAKka,kBAAkB1Z,GAAGR,KAAK6E,gBAAgB7E,KAAKmX,uBAAsB,EAAGnX,KAAKuX,uBAAuBvX,KAAK6Z,mBAAmB7Z,KAAK8X,qBAAqBtX,IAA7oJ,yBAA+oJ,SAAYX,GAAE,WAACG,KAAK4W,YAAYrI,MAAM1O,EAAEyD,IAAIjD,IAAIL,KAAK+W,YAAYsD,YAAYxa,GAAGA,EAAEqW,KAAK,UAAU,WAAKrW,EAAEsW,UAAU,EAAKtR,mBAAmB7E,KAAK6E,kBAA9xJ,uBAA8yJ,SAAUhF,EAAES,GAAG,IAAMF,GAAGI,YAAEF,IAAIA,EAAEwZ,OAAOhY,EAAE9B,KAAKsa,4BAA4BvY,EAAE,CAAC4E,SAAS3G,KAAK2G,SAASmT,OAAO3X,YAAE/B,GAAGma,WAAWva,KAAK8W,sBAAsB0D,eAAe1Y,EAAE2Y,cAAcza,KAAKiX,gBAAgBpX,EAAEoG,OAAO0K,oBAAoB3Q,KAAK2Q,oBAAoByD,cAActS,EAAE,UAAU9B,KAAKF,MAAMsU,eAAe,OAAOpU,KAAKF,MAAMyZ,UAAU1Z,EAAEoG,MAAMpG,EAAEqG,IAAIrG,EAAEsG,IAAIpE,KAAlpK,uCAAqpK,WAA4B,OAAO/B,KAAKyX,uBAAuBzX,KAAKF,MAAM4a,WAAWC,oBAAoB,aAAa3a,KAAKF,MAAMsU,eAAepU,KAAKyZ,8CAA1yK,2BAAs1K,SAAc5Z,GAAG,OAAOA,EAAE,GAAG,IAAn3K,iCAAq3K,WAA4B,IAAAA,EAAEG,KAAKwB,KAAK8H,iBAAiB9I,EAAE,IAAI4C,IAAE,CAACsG,EAAE1J,KAAK0Q,WAAWjH,KAAKtG,EAAEnD,KAAK0Q,WAAW7G,KAAKP,iBAAiBzJ,IAArG,EAA4J4K,YAAEzK,KAAKF,MAAMsP,WAAWvP,GAAnEsC,EAAjH,EAA0GqK,OAAwBlM,EAAlI,EAAmHmM,eAAsCrM,EAAzJ,EAAoIsM,qBAAmD5K,EAAEwQ,IAAEsI,OAAO,CAACtR,iBAAiBzJ,EAAEoI,KAAK,IAAIuE,OAAOrK,KAAK,IAAIL,EAAEkI,OAAON,GAAG5H,EAAEkI,OAAON,EAAElJ,EAAEkJ,KAAK5H,EAAEkI,OAAOxJ,GAAGR,KAAKwX,sBAAsBpX,EAAEJ,KAAK4F,KAAK,WAAW9D,GAAG9B,KAAKiX,gBAAgB,MAAM3W,EAAEA,EAAE,KAA9vL,sEAAiwL,WAAwBT,EAAEW,GAA1B,kCAAAsB,EAAA,yDAAiC9B,KAAK4W,YAAYtP,IAAIzH,EAAEyD,IAAIjD,IAA5D,0CAAmFL,KAAK4W,YAAYvM,KAAKxK,EAAEyD,KAA3G,UAA2E9C,EAA3E,OAAyHF,EAAGN,KAAKF,MAAhB6V,QAA0BvV,GAAGJ,KAAK8X,sBAAsB9X,KAAK6Z,mBAAmB7Z,KAAKoX,yBAA2BpX,KAAKuX,wBAAyBvX,KAAKmE,QAAQ,IAAInE,KAAK4W,YAAY5O,OAAjS,wBAAyS5H,GAAE,EAA3S,mBAAwTJ,KAAK2X,aAAa3X,KAAKsX,kBAAkBtX,KAAKsX,iBAAiBwC,QAAvX,0DAAwY7X,YAAE,EAAD,KAAKyU,GAAE/V,MAAF,MAA9Y,QAAyZX,KAAKuX,wBAAuB,EAArb,YAA8bzV,EAAE9B,KAAKsa,+BAAmCta,KAAK6Z,kBAAkB,MAAM7Z,KAAKqX,mBAAmBrX,KAAK8Y,2BAA0BtY,IAAGA,EAAEqa,WAAjkB,oBAAmlB1Y,EAAE,CAACqB,OAAOhD,EAAEgD,OAAOqX,WAAWra,EAAEqa,YAAehb,EAAEoW,OAAOtC,aAAaxR,GAAEL,EAA1pB,iBAA4pBjC,EAAEoW,OAAO/B,OAAO1T,EAAEqa,WAAWhb,EAAEoW,OAAO1C,oBAAmB,EAArtB,yCAA2uBvT,KAAKF,MAAMgb,cAAc3Y,EAAEnC,KAAK6Z,kBAAkB7Z,KAAKoX,yBAAyB,YAAYpX,KAAKoX,wBAAwB9U,KAAKtC,KAAKoX,wBAAwB,MAAt4B,QAAmuB5W,EAAnuB,OAA44BX,EAAEoW,OAAO/B,OAAO1T,EAAEX,EAAEoW,OAAO1C,oBAAmB,EAA17B,QAA67B1T,EAAEoW,OAAOD,qBAAqBlU,EAAE9B,KAAKoX,yBAAyBpX,KAAKqX,kBAAkB,KAAKvV,EAAEjC,EAAEoW,OAAO9B,gBAAgBtU,EAAEoW,OAAO9B,cAAc3T,EAAE2T,eAAetU,EAAEoW,OAAO9B,cAAc,KAAjnC,wBAAioC3T,EAAER,KAAK+a,6BAA6Blb,EAAEoW,OAAO/B,OAAO1T,EAAEX,EAAEoW,OAAOD,qBAAqBlU,EAAE9B,KAAKqX,kBAAkB,KAAKxX,EAAEoW,OAAO9B,cAAc,KAA1wC,QAA+wCtU,EAAEoW,OAAON,QAAQrV,EAAET,EAAEoW,OAAOrJ,MAAM5M,KAAKoG,cAAcO,SAASsB,KAAK,GAAGpI,EAAEoW,OAAOpJ,OAAO7M,KAAKoG,cAAcO,SAASsB,KAAK,GAAGpI,EAAEoW,OAAO7B,cAAcpU,KAAKgb,yBAAyBnb,EAAEoW,OAAOlV,UAAUX,EAAEP,EAAEoW,OAAOnB,oBAAoBjV,EAAEqW,KAAK,UAAU,kBAAI,EAAKrR,mBAAkB7E,KAAK+W,YAAYyC,SAAS3Z,GAAtjD,kDAAkkDoC,YAAE,EAAD,KAAKyU,GAAE/V,MAAF,MAAxkD,QAAmlDX,KAAK6E,gBAAxlD,iEAAjwL,0HAA02O,WAAmBhF,GAAnB,wBAAAiC,EAAA,yDAAsB9B,KAAKF,MAAMia,kBAAiB/Z,KAAK6Z,iBAAvD,gCAA8E7Z,KAAKib,8BAA8Bpb,GAAjH,6BAAqHG,KAAK8Y,0BAA0B9Y,KAAKoX,wBAAwB,KAAjL,cAAqM5W,EAAGR,KAAKF,MAAhB6V,QAAsBxT,EAAEnC,KAAK+W,YAAY1P,SAASc,IAA1B,uCAA+B,WAAMtI,GAAN,eAAAiC,EAAA,0DAAgBK,EAAE,EAAKmY,+BAAgCza,EAAEoW,OAAOtC,aAAhE,gCAAoG,EAAK7T,MAAMgb,cAAcjb,EAAEoW,OAAOtC,aAAa,EAAKkG,kBAAkB,EAAKzC,yBAAyB,YAAY,EAAKA,wBAAwB9U,KAAK,EAAK8U,wBAAwB,MAAnR,OAA8EvX,EAAEoW,OAAO/B,OAAvF,OAAyRrU,EAAEoW,OAAO1C,oBAAmB,EAArT,sBAA0T1T,EAAEoW,OAAO1C,oBAAoB1T,EAAEoW,OAAOtC,eAAe9T,EAAEoW,OAAO/B,OAAOrU,EAAEoW,OAAOtC,aAAakH,YAAYhb,EAAEoW,OAAO1C,oBAAmB,EAA7b,OAAic1T,EAAEoW,OAAOD,qBAAqB7T,EAAE,EAAKiV,yBAAyB,EAAKC,kBAAkB,KAAKxX,EAAEoW,OAAON,QAAQnV,EAAEX,EAAEoW,OAAO7B,cAAc,EAAK4G,yBAAyBnb,EAAEoW,OAAOlV,WAAU,EAAtnB,4CAA/B,kCAAAf,KAAA,gBAArN,UAAs3BgC,YAAEG,GAAx3B,QAA23BnC,KAAKuE,UAAUsQ,gBAA14B,iDAA12O,+FAAowQ,WAA6B,IAAI7U,KAAKgX,qBAAqB,CAAC,IAAMnX,EAAEG,KAAKoG,cAAcO,SAASsB,KAAK,GAAGzH,EAAER,KAAKoG,cAAcO,SAASsB,KAAK,GAAGjI,KAAKgX,qBAAqB,IAAI7T,IAAE,CAACyJ,MAAM/M,EAAEgN,OAAOrM,EAAE+U,OAAO,CAAC,IAAI2F,WAAWrb,EAAEW,IAAI2a,KAAK,IAAID,WAAWrb,EAAEW,GAAG4a,UAAU,OAAO,OAAOpb,KAAKgX,uBAAvhR,kFAA4iR,WAAoCnX,GAApC,mBAAAiC,EAAA,6DAA6CtB,EAAE,CAACia,cAAcza,KAAKiX,gBAAgBjX,KAAKkX,aAAajR,OAAOsU,WAAWva,KAAK8W,sBAAsBgD,OAAOja,GAAzJ,SAAoKG,KAAKF,MAAMub,YAAYrb,KAAKwB,KAAKgC,OAAOxD,KAAKwB,KAAKoL,MAAM5M,KAAKwB,KAAKqL,OAAOrM,GAA7O,WAA4J2B,EAA5J,SAAwPA,EAAE0Y,WAA1P,iDAAkRva,EAAEN,KAAKF,MAAM4a,WAAWY,wBAAwB,CAACT,WAAW3Q,YAAE/H,EAAE0Y,WAAW7a,KAAKF,MAAM6V,SAAS4F,MAAMvb,KAAKwB,KAAK8H,iBAAiBS,aAAa+C,WAAW,CAACpD,EAAE1J,KAAKkX,aAAapK,WAAW3J,EAAEnD,KAAKkX,aAAapK,YAAY6I,QAAQ3V,KAAKF,MAAM6V,WAAW3V,KAAKsa,6BAA6Bha,GAAG,YAAYA,EAAEgC,MAAMtC,KAAKF,MAAM0I,UAAU,mBAAmBxI,KAAKF,MAAM0I,SAASlG,OAAOhC,EAAEsS,OAAOtS,EAAEsS,OAAOzK,KAAK,SAAAtI,GAAC,OAAE,IAAIA,KAAIS,EAAEkS,OAAO7K,KAAKuE,MAAM,IAAI5L,EAAEkS,QAAQlS,EAAEmS,OAAO9K,KAAKuE,MAAM,IAAI5L,EAAEmS,SAASzS,KAAKoX,wBAAwB9W,EAAxwB,gDAA5iR,4FAAszS,WAA0BN,KAAKqX,kBAAkBrX,KAAKF,MAAM4a,WAAWY,wBAAwB,CAACT,WAAW,KAAKU,MAAMvb,KAAKwB,KAAK8H,iBAAiBS,aAAa+C,WAAW,CAACpD,EAAE1J,KAAKkX,aAAapK,WAAW3J,EAAEnD,KAAKkX,aAAapK,YAAY6I,QAAQ3V,KAAKF,MAAM6V,YAAljT,uCAA4jT,WAA+B,IAAL9V,EAAK,wDAAC,EAAgEG,KAAKF,MAA3DU,EAAV,EAAMgb,IAAiBrZ,EAAvB,EAAYiN,WAAwC9O,EAApD,EAAyBmb,2BAAoCrb,EAA7D,EAAsDkW,OAAqBxU,EAAE,MAAMK,GAAGA,EAAEuZ,qBAAqBtb,EAAEub,cAAcrb,GAAG,KAAKyB,EAAE2I,YAAElK,EAAEsB,GAAG,GAAGC,IAAI/B,KAAK6W,uBAAuB,CAAC,GAAG,MAAM7W,KAAK6W,wBAAwB/M,YAAE9J,KAAK6W,uBAAuB7W,KAAK8W,uBAAuB9W,KAAK8W,sBAAsBvG,YAAExO,EAAE/B,KAAKF,MAAMwW,OAAOlH,YAAYvP,EAAE,CAAC,IAAMA,EAAEG,KAAKoG,cAAcK,uBAAuBzG,KAAKwB,KAAKuE,OAAOvF,EAAER,KAAKiX,gBAAgBpX,EAAEoG,OAAOqC,YAAEvG,EAAE/B,KAAK8W,sBAAsB9W,KAAKwB,KAAKgC,OAAOxD,KAAKwB,KAAKsL,WAAWtM,EAAER,KAAKF,MAAMwW,OAAOsC,SAASC,UAAU7Y,KAAK6W,uBAAuB9U,KAAzpU,sDAA4pU,WAA2C,MAA2D/B,KAAKF,MAAMsP,WAAtDvP,EAAhB,EAAM0S,UAA2B/R,EAAjC,EAAkB6Q,eAA0BlP,EAA5C,EAAmC6Q,SAAqB1S,EAAxD,EAA8C8a,UAAmC,OAAO,IAAIvb,IAAI,MAAMW,GAAG,MAAM2B,GAAG,OAAO7B,GAAG,OAAOA,KAA10U,oCAA60U,WAAyB,IAAMT,EAAEG,KAAKF,MAAM0I,SAASlG,KAAK,MAAM,oBAAoBzC,GAAG,iBAAiBA,GAAG,iBAAiBA,EAAE,UAAUG,KAAKF,MAAMsU,kBAAh+U,GAAerJ,EAAEiF,YAAE5F,aAAEwR,QAA29U/b,YAAE,CAACO,eAAKiL,GAAEjJ,UAAU,uBAAuB,MAAgE,IAAIyZ,GAA9DxQ,GAAExL,YAAE,CAACiC,YAAE,gDAAgDuJ,IAA0BwQ","file":"static/js/22.f9810dde.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import o from\"../../core/Evented.js\";import{IdentifiableMixin as l}from\"../../core/Identifiable.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{HandleOwnerMixin as a}from\"../../core/HandleOwner.js\";let p=class extends(a(l(n(o.EventedMixin(i))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const r=this.layer&&this.layer.id||\"no id\",s=this.layer&&this.layer.title||\"no title\";throw t.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${s}', id: '${r}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([r()],p.prototype,\"fullOpacity\",null),e([r()],p.prototype,\"layer\",void 0),e([r()],p.prototype,\"parent\",void 0),e([r({readOnly:!0})],p.prototype,\"suspended\",null),e([r({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([r({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([r({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([r()],p.prototype,\"visible\",null),p=e([s(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";let e=class extends s{};e=r([o(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../../geometry/Geometry.js\";import s from\"../../../geometry/Extent.js\";import p from\"../../../geometry/Polygon.js\";import{fromJSON as m}from\"../../../geometry/support/jsonUtils.js\";import\"../../../geometry.js\";import i from\"./ClipArea.js\";var y;const c={base:t,key:\"type\",typeMap:{extent:s,polygon:p}};let n=y=class extends i{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};r([o({types:c,json:{read:m,write:!0}})],n.prototype,\"geometry\",void 0),r([o({readOnly:!0})],n.prototype,\"version\",null),n=y=r([e(\"esri.views.layers.support.Geometry\")],n);var l=n;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"./ClipArea.js\";let e=class extends t{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],e.prototype,\"path\",void 0),r([o({readOnly:!0})],e.prototype,\"version\",null),e=r([s(\"esri.views.layers.support.Path\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import i from\"../../../core/Collection.js\";import{referenceSetter as r}from\"../../../core/collectionUtils.js\";import{init as o}from\"../../../core/watchUtils.js\";import a from\"../../layers/support/ClipArea.js\";import p from\"../../layers/support/ClipRect.js\";import{Container as h}from\"../engine/Container.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=i.ofType({key:\"type\",base:a,typeMap:{rect:p,path:d,geometry:n}}),l=i=>{let a=class extends i{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new h),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([o(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),o(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),o(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),o(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([e({type:c,set(t){const e=r(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],a.prototype,\"clips\",void 0),t([e()],a.prototype,\"moving\",void 0),t([e()],a.prototype,\"attached\",void 0),t([e()],a.prototype,\"container\",void 0),t([e()],a.prototype,\"suspended\",void 0),t([e({readOnly:!0})],a.prototype,\"updateParameters\",void 0),t([e()],a.prototype,\"updateRequested\",void 0),t([e()],a.prototype,\"updating\",null),t([e()],a.prototype,\"view\",void 0),a=t([s(\"esri.views.2d.layers.LayerView2D\")],a),a};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"./enums.js\";import r from\"./brushes/WGLBrushInfo.js\";import s from\"./brushes/WGLBrushStencil.js\";import t from\"./WGLContainer.js\";const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends t{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(n),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:r}=e;return{...super.createRenderParams(e),requiredLevel:this._tileInfoView.getClosestInfoForScale(r.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(r.scale)}}prepareRenderPasses(t){const n=t.registerRenderPass({name:\"stencil\",brushes:[s],drawPhase:e.DEBUG|e.MAP|e.HIGHLIGHT,target:()=>this.getStencilTarget()}),i=t.registerRenderPass({name:\"tileInfo\",brushes:[r],drawPhase:e.DEBUG,target:()=>this.children,has:\"esri-tiles-debug\"});return[...super.prepareRenderPasses(t),n,i]}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const s=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,s)}}setStencilReference(){let e=1;for(const r of this.children)r.stencilRef=e++}}export default i;export{n as sortByLevel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{getInfo as n}from\"../../../geometry/support/spatialReferenceUtils.js\";import{project as t}from\"../../../geometry/support/webMercatorUtils.js\";import o from\"../../../geometry/Point.js\";import i from\"../../../geometry/Extent.js\";import\"../../../geometry.js\";import{getMetersPerUnitForSR as r}from\"../../../core/unitUtils.js\";import{isLoaded as a,isSupported as s,load as l,getTransformation as c,project as x}from\"../../../geometry/projection.js\";const u=5e-4,m=function(e,n){const t=(e.isWGS84||e.isWebMercator)&&(n.isWGS84||n.isWebMercator);return!(e.equals(n)||t)},p=function(e,n){const t=(e[0]+e[4]+e[4*n.cols]+e[4*n.cols+4])/4,o=(e[1]+e[5]+e[4*n.rows+1]+e[4*n.rows+5])/4;return[Math.abs(t-e[2*n.rows+2]),Math.abs(o-e[2*n.rows+3])]},f=32;async function h(){if(a()||!s())return null;await l()}function y(n,t,o){if(!m(n.spatialReference,t))return null;if(!a())throw new e(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");return o?c(t,n.spatialReference,n):c(n.spatialReference,t,n)}function M(n,o,r,s=null){if(n.spatialReference.equals(o))return n;const l=m(n.spatialReference,o);if(l&&!a())throw new e(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");const c=r.center,u=new i({xmin:c.x-n.x/2,xmax:c.x+n.x/2,ymin:c.y-n.y/2,ymax:c.y+n.y/2,spatialReference:n.spatialReference}),p=l?x(u,o,s):t(u,o);if(null==p)return null;return{x:p.xmax-p.xmin,y:p.ymax-p.ymin}}function w(e,n=.01){return r(e)?n/r(e):0}function d(o,i,r=null,s=!0){const l=o.spatialReference;if(l.equals(i))return o;const c=m(l,i);if(c&&!a())throw new e(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");const p=c?x(o,i,r):t(o,i);if(p&&s&&i.isGeographic){var f,h;const[e,t]=l.isWebMercator?n(l).origin:null!=(f=null==(h=n(l))?void 0:h.valid)?f:[],i=w(l);i&&null!=e&&null!=t&&(Math.abs(o.x-e)<i&&Math.abs(180-p.x)<u?p.x-=360:Math.abs(o.x-t)<i&&Math.abs(180+p.x)<u&&(p.x+=360))}return p}function g(i,r,s=null,l=!0){var c,p,f,h;const y=i.spatialReference;if(y.equals(r))return i;const M=m(y,r);if(M&&!a())throw new e(\"rasterprojectionhelper-projectExtent\",\"projection engine is not loaded\");const g=M?x(i,r,s):t(i,r);let[R,j]=null!=(c=null==(p=n(y))?void 0:p.origin)?c:[];if(g&&l&&y.isWebMercator&&r.isGeographic&&null!=R&&null!=j){const e=.001,n=1e3;if(Math.abs(i.xmin-R)<e&&Math.abs(j-i.xmax)>n&&Math.abs(180-g.xmax)<u){g.xmin=-180;const e=[];e.push(new o(i.xmax,i.ymin,y)),e.push(new o(i.xmax,(i.ymin+i.ymax)/2,y)),e.push(new o(i.xmax,i.ymax,y));const n=e.map((e=>d(e,r,s))).filter((e=>!isNaN(null==e?void 0:e.x))).map((e=>e.x));g.xmax=Math.max.apply(null,n)}if(Math.abs(i.xmax-j)<e&&Math.abs(R-i.xmin)>n&&Math.abs(180+g.xmin)<u){g.xmax=180;const e=[];e.push(new o(i.xmin,i.ymin,y)),e.push(new o(i.xmin,(i.ymin+i.ymax)/2,y)),e.push(new o(i.xmin,i.ymax,y));const n=e.map((e=>d(e,r,s))).filter((e=>!isNaN(null==e?void 0:e.x))).map((e=>e.x));g.xmin=Math.min.apply(null,n)}}[R,j]=r.isWebMercator?n(r).origin:null!=(f=null==(h=n(r))?void 0:h.valid)?f:[];const b=w(r);return b&&null!=R&&null!=j&&(Math.abs(g.xmin-R)<b&&(g.xmin=R),Math.abs(g.xmax-j)<b&&(g.xmax=j)),g}function R(t,i,r,s=null,l=null,c=!1,x=[f,f]){var u,h;if(m(t.spatialReference,i.spatialReference)&&!a())throw new e(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");if(!(t&&i&&r))return null;const{xmin:y,ymin:M,xmax:w,ymax:g}=t,R=t.spatialReference,j=i.spatialReference,[b,v]=null!=(u=null==(h=n(R))?void 0:h.valid)?u:[],N={x:x[0]*r.x,y:x[1]*r.y},S={cols:Math.ceil((w-y)/N.x-.1)+1,rows:Math.ceil((g-M)/N.y-.1)+1},z=N.x,W=N.y,G=[];let P,L=!1;for(let e=0;e<S.cols;e++){const n=[];for(let t=0;t<S.rows;t++){let r=d(new o({x:y+z*e,y:g-W*t,spatialReference:R}),j,s);l&&(r=l.inverseTransform(r)),n.push(r),e>0&&c&&r&&P[t]&&null!=b&&r.x<P[t].x&&(r.x+=v-b),r?(G.push((r.x-i.xmin)/(i.xmax-i.xmin)),G.push((i.ymax-r.y)/(i.ymax-i.ymin))):(G.push(NaN),G.push(NaN),L=!0)}P=n}const q=p(G,S),A=new Float32Array((S.cols-1)*(S.rows-1)*2*6),E=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),F=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let e=0;e<S.cols-1;e++){for(let n=0;n<S.rows-1;n++){let t=e*S.rows*2+2*n;const o=G[t],i=G[t+1],r=G[t+2],a=G[t+3];t+=2*S.rows;const s=G[t],l=G[t+1],c=G[t+2],x=G[t+3];let u=0,m=12*(n*(S.cols-1)+e);for(let e=0;e<3;e++)A[m++]=E[u++]*o+E[u++]*r+E[u++]*c;u=0;for(let e=0;e<3;e++)A[m++]=E[u++]*i+E[u++]*a+E[u++]*x;u=0;for(let e=0;e<3;e++)A[m++]=F[u++]*o+F[u++]*s+F[u++]*c;u=0;for(let e=0;e<3;e++)A[m++]=F[u++]*i+F[u++]*l+F[u++]*x}if(L)for(let e=0;e<A.length;e++)isNaN(A[e])&&(A[e]=-1)}return{offsets:G,error:q,coefficients:A,spacing:x,size:[S.cols-1,S.rows-1]}}function j(e,n,t){const i=Math.log(e.x/n.pixelSize.x)/Math.LN2,r=Math.log(e.y/n.pixelSize.y)/Math.LN2,a=n.storageInfo.maximumPyramidLevel||0;let s=\"down\"===t?Math.floor(Math.min(i,r)):\"up\"===t?Math.ceil(Math.max(i,r)):Math.round((i+r)/2),l=!1;s<0?s=0:s>a&&(l=s>a+3,s=a);const c=2**s;return{pyramidLevel:s,pyramidResolution:new o({x:c*n.nativePixelSize.x,y:c*n.nativePixelSize.y,spatialReference:n.spatialReference}),excessiveReading:l}}function b(e,n,t=512,i=!0){const{extent:a,spatialReference:s,pixelSize:l}=e,c=M(new o({x:l.x,y:l.y,spatialReference:s}),n,a);if(null==c)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const x=(c.x+c.y)/2,u=r(n),m=x*u*96*39.37,p=n.isGeographic?512/t*295828763.7958547:512/t*591657527.591555;let f=!1;const h=g(a,n);i&&(n.isGeographic||n.isWebMercator)&&(f=h.xmin*h.xmax<0);let y,w=m;const d=1.001;if(f){w=p;const e=.29858214164761665,n=e*(96*u*39.37);y=M(new o({x:e,y:e,spatialReference:{wkid:3857}}),s,h),y.x*=w/n,y.y*=w/n}else{y={x:l.x,y:l.y};const n=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2);let t=0;for(;w<p*(d/2)&&t<n;)t++,w*=2,y.x*=2,y.y*=2;Math.max(w,p)/Math.min(w,p)<=d&&(w=p)}const R=[w],j=[{x:y.x,y:y.y}],b=70.5310735,v=Math.min(b,m)/d;for(;w>=v;)w/=2,y.x/=2,y.y/=2,R.push(w),j.push({x:y.x,y:y.y});return{projectedPixelSize:c,scales:R,srcResolutions:j,isCustomTilingScheme:!f}}export{b as computeProjectedScales,f as defaultGridSpacing,y as getDefaultDatumTransformationForDataset,R as getProjectionOffsetGrid,h as load,g as projectExtent,d as projectPoint,M as projectResolution,j as snapPyramid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import\"../../geometry.js\";import{getMetersPerUnitForSR as n}from\"../../core/unitUtils.js\";import{calculateTolerance as i}from\"../../renderers/support/clickToleranceUtils.js\";function a(t,i,a,o=new r){let s;if(\"2d\"===a.type)s=i*a.resolution;else if(\"3d\"===a.type){const r=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?n(o)/n(a.spatialReference):i*r}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,n){const o=n.toMap(e);if(t(o))return!1;return a(o,i(),n,s).intersects(r)}const s=new r;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l,hasField as t}from\"../../../layers/support/fieldUtils.js\";async function i(i,d=i.popupTemplate){if(!e(d))return[];const o=await d.getRequiredFields(i.fields),{lastEditInfoEnabled:s}=d,{objectIdField:u,typeIdField:a,globalIdField:n,relationships:f}=i;if(o.includes(\"*\"))return[\"*\"];const r=s?await p(i):[],m=l(i.fields,[...o,...r]);return a&&m.push(a),m&&u&&t(i.fields,u)&&-1===m.indexOf(u)&&m.push(u),m&&n&&t(i.fields,n)&&-1===m.indexOf(n)&&m.push(n),f&&f.forEach((e=>{const{keyField:p}=e;m&&p&&t(i.fields,p)&&-1===m.indexOf(p)&&m.push(p)})),m}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,i as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nclass t{constructor(t=15e3,e=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=t,this._interval=Math.min(t,e)}decreaseRefCount(t,e){const s=t+\"/\"+e,r=this._cachedBlocks;if(r.has(s)){const t=r.get(s);return t.refCount--,t.refCount<=0&&(r.delete(s),t.controller&&t.controller.abort()),t.refCount}return 0}getBlock(t,e){const s=t+\"/\"+e,r=this._cachedBlocks;if(r.has(s)){const t=r.get(s);return t.ts=Date.now(),t.refCount++,r.delete(s),r.set(s,t),t.block}return null}putBlock(t,e,s,r=null){const i=this._cachedBlocks,c=t+\"/\"+e;if(i.has(c)){const t=i.get(c);t.ts=Date.now(),t.refCount++}else i.set(c,{block:s,ts:Date.now(),refCount:1,controller:r});this.trim(),this.updateTimer()}deleteBlock(t,e){const s=this._cachedBlocks,r=t+\"/\"+e;s.has(r)&&s.delete(r)}updateMaxSize(t){this._size=t,this.trim()}empty(){this._cachedBlocks.clear(),this.clearTimer()}getCurrentSize(){return this._cachedBlocks.size}updateTimer(){if(null!=this._timer)return;const t=this._cachedBlocks;this._timer=setInterval((()=>{const e=Array.from(t),s=Date.now();for(let r=0;r<e.length&&e[r][1].ts<=s-this._duration;r++)t.delete(e[r][0]);0===t.size&&this.clearTimer()}),this._interval)}trim(){const t=this._cachedBlocks;if(-1===this._size||this._size>=t.size)return;const e=Array.from(t);for(let s=0;s<e.length-this._size;s++)t.delete(e[s][0])}clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}}export default t;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import t from\"../../../geometry/Point.js\";import\"../../../geometry.js\";import n from\"./EphemeralBlockCache.js\";import{projectExtent as o,projectResolution as r,snapPyramid as l}from\"../rasterFunctions/rasterProjectionHelper.js\";const c=new Map,a=new n;function i(e,t){return null==t?e:`${e}?sliceId=${t}`}function s(e,t){const n={extent:null,rasterInfo:t,cache:new Map};if(c.has(e)){const t=c.get(e);return t.push(n),t.length-1}return c.set(e,[n]),0}function u(e,t){if(c.has(e)){const n=c.get(e);n[t]=null,n.some((e=>null!=e))||c.delete(e)}}function f(e){c.delete(e)}function h(e,t,n){if(!c.has(e))return null==t?a.decreaseRefCount(e,n):0;const o=c.get(e);if(null==o[t])return a.decreaseRefCount(e,n);const r=o[t].cache;if(r.has(n)){const e=r.get(n);if(e.refCount--,0===e.refCount){r.delete(n);for(let e=0;e<o.length;e++)o[e]&&o[e].cache.has(n)&&o[e].cache.delete(n);e.controller&&e.controller.abort()}return e.refCount}return 0}function m(e,t,n){if(!c.has(e))return null==t?a.getBlock(e,n):null;const o=c.get(e);if(null==o[t]){for(let e=0;e<o.length;e++)if(o[e]&&o[e].cache.has(n)){const t=o[e].cache.get(n);return t.refCount++,t.block}return a.getBlock(e,n)}const r=o[t].cache;if(r.has(n)){const e=r.get(n);return e.refCount++,e.block}for(let l=0;l<o.length;l++)if(l!==t&&o[l]&&o[l]&&o[l].cache.has(n)){const e=o[l].cache.get(n);return e.refCount++,r.set(n,e),e.block}return null}function x(e,t,n,o,r=null){if(!c.has(e))return void(null==t&&a.putBlock(e,n,o,r));const l=c.get(e);if(null==l[t])return void a.putBlock(e,n,o,r);const i={refCount:1,block:o,isResolved:!1,isRejected:!1,controller:r};o.then((()=>i.isResolved=!0)).catch((()=>i.isRejected=!0)),l[t].cache.set(n,i)}function d(e,t,n){if(!c.has(e))return void(null==t&&a.deleteBlock(e,n));const o=c.get(e);null!=o[t]?o[t].cache.delete(n):a.deleteBlock(e,n)}function y(e,t){if(!c.has(e))return null;const n=c.get(e);return null==n[t]?null:n[t]}function g(n,c,a,i,s,u,f=null){const h=y(n,c),m=h.extent,{cache:x,rasterInfo:d}=h;if(m&&m.xmin===a.xmin&&m.xmax===a.xmax&&m.ymin===a.ymin&&m.ymax===a.ymax)return;const g=a.clone().normalize(),{spatialReference:p,transform:k}=d,M=new Set;for(let y=0;y<g.length;y++){const n=g[y];if(n.xmax-n.xmin<=i||n.ymax-n.ymin<=i)continue;let c=o(n,p,f);e(k)&&(c=k.inverseTransform(c));const a=new t({x:i,y:i,spatialReference:n.spatialReference});if(null==s&&!(s=r(a,p,n,f)))return;const{pyramidLevel:h,pyramidResolution:m,excessiveReading:x}=l(s,d,u||\"closest\");if(x)return;const{storageInfo:R}=d,{origin:C}=R,j={x:Math.max(0,Math.floor((c.xmin-C.x)/m.x)),y:Math.max(0,Math.floor((C.y-c.ymax)/m.y))},v=Math.ceil((c.xmax-c.xmin)/m.x-.1),B=Math.ceil((c.ymax-c.ymin)/m.y-.1),b=h>0?R.pyramidBlockWidth:R.blockWidth,w=h>0?R.pyramidBlockHeight:R.blockHeight,$=1,I=Math.max(0,Math.floor(j.x/b)-$),H=Math.max(0,Math.floor(j.y/w)-$),E=Math.floor((j.x+v-1)/b)+$,P=Math.floor((j.y+B-1)/w)+$;for(let e=H;e<=P;e++)for(let t=I;t<=E;t++)M.add(`${h}/${e}/${t}`)}x.forEach(((e,t)=>{if(!M.has(t)){const e=x.get(t);(null==e||e.isResolved||e.isRejected)&&x.delete(t)}})),h.extent={xmin:a.xmin,ymin:a.ymin,xmax:a.xmax,ymax:a.ymax}}export{h as decreaseRefCount,d as deleteBlock,f as deleteRaster,m as getBlock,i as getRasterId,x as putBlock,s as register,u as unregister,g as update};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as t}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import s from\"../../Graphic.js\";import{getDefaultDatumTransformationForDataset as a,projectExtent as n}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{getFetchPopupTemplate as l}from\"./support/popupUtils.js\";const p=p=>{let u=class extends p{constructor(){super(...arguments),this._rasterFieldPrefix=\"Raster.\",this.layer=null,this.view=null,this.fullExtent=null,this.tileInfo=null,this.datumTransformation=null}get hasTilingEffects(){return this.layer.renderer&&\"dynamicRangeAdjustment\"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}async fetchPopupFeatures(e,r){const{layer:i}=this;if(!e)return Promise.reject(new o(\"imageryTileLayerView:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:i}));const{popupEnabled:a}=i,n=l(i,r);if(!a||!t(n))throw new o(\"imageryTileLayerView:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:a,popupTemplate:n});const p=[],{value:u}=await i.identify(e);if(u){var f,m;const e=u.join(\", \"),t={ObjectId:0},r=\"Raster.ServicePixelValue\";t[r]=this._formatAttributeValue(e,r);const o=null==(f=i.rasterInfo)||null==(m=f.attributeTable)?void 0:m.features;if(o&&o.length>0){const r=o.filter((t=>{const r=t.attributes.value||t.attributes.Value||t.attributes.VALUE;return String(r)===e}));if(r.length>0){const e=r[0];if(e)for(const r in e.attributes)if(e.attributes.hasOwnProperty(r)){const i=this._rasterFieldPrefix+r;t[i]=this._formatAttributeValue(e.attributes[r],i)}}}const a=new s(this.fullExtent.clone(),null,t);a.layer=i,a.sourceLayer=a.layer,p.push(a)}return p}updateFullExtent(){const e=this.layer.tileInfo;let t;e&&e.spatialReference||(t=new o(\"layerview:tiling-information-missing\",\"The layer doesn't provide tiling information\",{layer:this.layer}));const r=a(this.layer.fullExtent,this.view.spatialReference,!1),i=n(this.layer.fullExtent,this.view.spatialReference,r);return null==i&&(t=new o(\"layerview:projection-not-supported\",\"The layer extent cannot be projected to the view's spatial reference\",{layer:this.layer})),this._set(\"fullExtent\",i),this.datumTransformation||(this.datumTransformation=a(this.layer.fullExtent,this.view.spatialReference,!0)),t?Promise.reject(t):Promise.resolve()}_formatAttributeValue(e,t){if(\"string\"==typeof e){const r=this.layer.popupTemplate&&this.layer.popupTemplate.fieldInfos,i=this._getFieldInfo(r,t),o=i&&i.format;if(o){let t,r;return e.trim().indexOf(\",\")>-1?(t=\",\",r=t+\" \",this._formatDelimitedString(e,t,r,o)):e.trim().indexOf(\" \")>-1?(t=r=\" \",this._formatDelimitedString(e,t,r,o)):this._formatNumberFromString(e,o)}}return e}_getFieldInfo(e,t){if(!e||!e.length||!t)return;const r=t.toLowerCase();let i;return e.some((e=>!(!e.fieldName||e.fieldName.toLowerCase()!==r&&e.fieldName.toLowerCase()!==r.replace(/ /g,\"_\"))&&(i=e,!0))),i}_formatDelimitedString(e,t,r,i){return e&&t&&r&&i?e.trim().split(t).map((e=>this._formatNumberFromString(e,i))).join(r):e}_formatNumberFromString(e,t){if(!e||!t)return e;const r=Number(e);return isNaN(r)?e:t.format(r)}};return e([r()],u.prototype,\"layer\",void 0),e([r()],u.prototype,\"view\",void 0),e([r()],u.prototype,\"fullExtent\",void 0),e([r()],u.prototype,\"tileInfo\",void 0),e([r({readOnly:!0})],u.prototype,\"hasTilingEffects\",null),u=e([i(\"esri.views.layers.ImageryTileLayerView\")],u),u};export default p;export{p as ImageryTileLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../core/maybe.js\";import{i as e,a as s,r,j as i,m as a}from\"../../../chunks/mat3.js\";import{extractBands as o}from\"../../../layers/support/rasterFunctions/pixelUtils.js\";import{c as u}from\"../../../chunks/mat3f32.js\";import{f as n}from\"../../../chunks/vec2f32.js\";import{DisplayObject as l}from\"./DisplayObject.js\";import{createTransformTexture as h,createRasterTexture as d,createColormapTexture as m}from\"../../webgl/rasterUtils.js\";const _={bandCount:3,outMin:0,outMax:1,minCutOff:[0,0,0],maxCutOff:[255,255,255],factor:[1/255,1/255,1/255],useGamma:!1,gamma:[1,1,1],gammaCorrection:[1,1,1],colormap:null,colormapOffset:null,type:\"stretch\"};class x extends l{constructor(t=null,e=null,s=null){super(),this._textureInvalidated=!0,this._memoryUsed=null,this._supportsBilinear=!0,this.stencilRef=0,this.coordScale=[1,1],this._symbolizerParameters=null,this.height=null,this.isRendereredSource=!1,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this.rawPixelData=null,this._suspended=!1,this._bandIds=null,this._interpolation=null,this._transformGrid=null,this.width=null,this.x=0,this.y=0,this.transforms={dvs:u()},this.source=t,this.transformGrid=e,this.interpolation=s}destroy(){const t=this.getTextures();null==t||t.textures.forEach((t=>t.dispose())),this._rasterTexture=null,this._transformGridTexture=null,this._colormapTexture=null}get symbolizerParameters(){return this._symbolizerParameters||_}set symbolizerParameters(t){this._symbolizerParameters=t}get source(){return this._source}set source(t){this._source=t,this._rasterTexture&&(this._rasterTexture.dispose(),this._rasterTexture=null,this._rasterTextureBandIds=null,this._memoryUsed=null)}get suspended(){return this._suspended}set suspended(t){this._suspended&&!t&&this.stage&&(this.ready(),this.requestRender()),this._suspended=t}get bandIds(){return this._bandIds}set bandIds(t){this._bandIds=t,this.invalidateTexture()}get interpolation(){return this._interpolation}set interpolation(t){this._interpolation=t,this._rasterTexture&&this._rasterTexture.setSamplingMode(!this._supportsBilinear||\"bilinear\"!==t&&\"cubic\"!==t?9728:9729)}get transformGrid(){return this._transformGrid}set transformGrid(t){this._transformGrid=t,this._transformGridTexture&&(this._transformGridTexture.dispose(),this._transformGridTexture=null,this._memoryUsed=null)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRender())}setTransform(t){const o=e(this.transforms.dvs),[u,l]=t.toScreenNoRotation([0,0],this.x,this.y),h=this.resolution/this.pixelRatio/t.resolution,d=h*this.width,m=h*this.height,_=Math.PI*this.rotation/180;s(o,o,n(u,l)),s(o,o,n(d/2,m/2)),r(o,o,-_),s(o,o,n(-d/2,-m/2)),i(o,o,n(d,m)),a(this.transforms.dvs,t.displayViewMat3,o)}getTextures(){if(!this._rasterTexture)return null;const t=[],e=[];return this._transformGridTexture&&(e.push(this._transformGridTexture),t.push(\"u_transformGrid\")),this._rasterTexture&&(e.push(this._rasterTexture),t.push(\"u_image\")),this._colormapTexture&&(e.push(this._colormapTexture),t.push(\"u_colormap\")),{names:t,textures:e}}getMemoryUsage(){if(t(this._memoryUsed)){const t=this.getTextures();if(null==t)return 0;this._memoryUsed=t.textures.map((t=>t.descriptor.width*t.descriptor.height*4)).reduce(((t,e)=>t+e))}return this._memoryUsed}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}updateTexture({context:t}){var e,s,r;if(!this.stage)return null==(e=this._rasterTexture)||e.dispose(),null==(s=this._transformGridTexture)||s.dispose(),null==(r=this._colormapTexture)||r.dispose(),this._rasterTexture=null,this._rasterTextureBandIds=null,this._transformGridTexture=null,void(this._colormapTexture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1;const i=this.source,a=i&&i.pixels&&i.pixels.length>0;this._createOrDestroyRasterTexture(t),this._rasterTexture&&(a?(this._updateColormapTexture(t),this.transformGrid&&!this._transformGridTexture&&(this._transformGridTexture=h(t,this.transformGrid))):this._rasterTexture.setData(null)),this.suspended||(this.ready(),this.requestRender())}_createOrDestroyRasterTexture(t){var e,s;const r=this.source?o(this.source,this.bandIds):null;if(!(r&&r.pixels&&r.pixels.length>0))return void(this._rasterTexture&&(this._rasterTexture.dispose(),this._rasterTextureBandIds=null,this._rasterTexture=null));const i=null==this._rasterTextureBandIds&&null==this.bandIds||this._rasterTextureBandIds&&this.bandIds&&this._rasterTextureBandIds.join(\"\")===this.bandIds.join(\"\");if(this._rasterTexture){if(i)return;this._rasterTexture.dispose(),this._rasterTextureBandIds=null,this._rasterTexture=null}const a=this.interpolation||\"nearest\",u=this.isRendereredSource||!(null!=(e=t.capabilities.textureFloat)&&e.textureFloat);this._rasterTexture=d(t,r,a,u),this._supportsBilinear=null==(s=t.capabilities.textureFloat)?void 0:s.textureFloatLinear,this._rasterTextureBandIds=this.bandIds}_updateColormapTexture(t){const e=this._colormap,s=this.symbolizerParameters.colormap;return s?e?s.length!==e.length||s.some(((t,s)=>t!==e[s]))?(this._colormapTexture&&(this._colormapTexture.dispose(),this._colormapTexture=null),this._colormapTexture=m(t,s),void(this._colormap=s)):void 0:(this._colormapTexture=m(t,s),void(this._colormap=s)):(this._colormapTexture&&(this._colormapTexture.dispose(),this._colormapTexture=null),void(this._colormap=null))}}export{x as RasterBitmap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{TiledDisplayObject as t}from\"./webgl/TiledDisplayObject.js\";import{RasterBitmap as s}from\"./RasterBitmap.js\";class e extends t{constructor(t,e,i,a=null){super(t,e,i),this.bitmap=new s(a,null,null),this.bitmap.coordScale=i,this.bitmap.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy(),this.bitmap=null,this.stage=null}set stencilRef(t){this.bitmap.stencilRef=t}get stencilRef(){return this.bitmap.stencilRef}getMemoryUsage(){return this.bitmap.getMemoryUsage()}setTransform(t,s){super.setTransform(t,s),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap.stage=null}}export{e as RasterTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{getWorldWidth as s}from\"../viewpointUtils.js\";import{WGLDrawPhase as t}from\"./webgl/enums.js\";import{brushes as i}from\"./brushes.js\";import r from\"./webgl/TileContainer.js\";import{RasterTile as o}from\"./RasterTile.js\";class n extends r{constructor(){super(...arguments),this.isCustomTilingScheme=!1}createTile(e){const s=this._getTileBounds(e);return new o(e,s,this._tileInfoView.tileInfo.size)}destroyTile(){}prepareRenderPasses(e){const s=e.registerRenderPass({name:\"bitmap (tile)\",brushes:[i.raster],target:()=>this.children.map((e=>e.bitmap)),drawPhase:t.MAP});return[...super.prepareRenderPasses(e),s]}doRender(e){this.visible&&e.drawPhase===t.MAP&&super.doRender(e)}_getTileBounds(t){const i=this._tileInfoView.getTileBounds(e(),t);if(this.isCustomTilingScheme&&t.world){const{tileInfo:e}=this._tileInfoView,r=s(e.spatialReference);if(r){const{resolution:s}=e.lodAt(t.level),o=r/s%e.size[0],n=o?(e.size[0]-o)*s:0;i[0]-=n*t.world,i[2]-=n*t.world}}return i}}export{n as RasterTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isNone as t,unwrap as i}from\"../../../core/maybe.js\";import s from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{debounce as l,isAbortError as o,createAbortController as h,eachAlways as n}from\"../../../core/promiseUtils.js\";import c from\"../../../geometry/Point.js\";import u from\"../../../geometry/Extent.js\";import\"../../../geometry.js\";import{createScreenPoint as p}from\"../../../core/screenUtils.js\";import m from\"../../../Graphic.js\";import{watch as d}from\"../../../core/watchUtils.js\";import y from\"../../../layers/support/PixelBlock.js\";import _ from\"../../../layers/support/TileInfo.js\";import{extractBands as g}from\"../../../layers/support/rasterFunctions/pixelUtils.js\";import{computeProjectedScales as b}from\"../../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{update as f,unregister as w,register as I,getRasterId as P}from\"../../../layers/support/rasterDatasets/RawBlockCache.js\";import S from\"../../webgl/capabilities.js\";import{RefreshableLayerView as C}from\"../../layers/RefreshableLayerView.js\";import R from\"../tiling/TileInfoView.js\";import U from\"../tiling/TileQueue.js\";import v from\"../tiling/TileStrategy.js\";import T from\"../../layers/LayerView.js\";import{createQueryGeometry as x}from\"../../support/drapedUtils.js\";import{ImageryTileLayerView as z}from\"../../layers/ImageryTileLayerView.js\";import{RasterTileContainer as k}from\"../engine/RasterTileContainer.js\";import{LayerView2DMixin as j}from\"./LayerView2D.js\";const V=s.getLogger(\"esri.views.2d.layers.ImageryTileLayerView2D\"),L=[0,0];let q=class extends(z(C(j(T)))){constructor(){super(...arguments),this._tileStrategy=null,this._tileInfoView=null,this._fetchQueue=null,this._blockCacheRegistryUrl=null,this._blockCacheRegistryId=null,this._bitmapView=null,this._emptyTilePixelBlock=null,this._srcResolutions=null,this._previousLOD=null,this._needBlockCacheUpdate=!1,this._globalSymbolizerParams=null,this._symbolizerParams=null,this._abortController=null,this._globalUpdateRequested=!1,this._isCustomTilingScheme=!1,this.useWebGLForProcessing=!0,this._redrawDebounced=l((e=>this._redrawImage(e)),2e3)}initialize(){const e=this.updateFullExtent();this.addResolvingPromise(e)}get useProgressiveUpdate(){return null==this._get(\"useProgressiveUpdate\")||this._get(\"useProgressiveUpdate\")}set useProgressiveUpdate(e){if(this._tileStrategy&&this.useProgressiveUpdate!==e){this._tileStrategy.destroy(),this._bitmapView.removeAllChildren();const t=this._getCacheSize(e);this._tileStrategy=new v({cachePolicy:\"purge\",resampling:!1,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:t,tileInfoView:this._tileInfoView}),this._set(\"useProgressiveUpdate\",e),this.requestUpdate()}}hitTest(e,t){if(this.suspended)return Promise.resolve(null);const i=this.view.toMap(p(e,t));return Promise.resolve(new m({attributes:{},geometry:i}))}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();const{extent:t,resolution:i,scale:s}=e.state,r=this._tileInfoView.getClosestInfoForScale(s);if(this.layer.raster){var a;if(!this.useProgressiveUpdate||this._needBlockCacheUpdate){const e=this._srcResolutions[r.level],s=t.toJSON?t:u.fromJSON(t);f(this._blockCacheRegistryUrl,this._blockCacheRegistryId,s,i,e,this.layer.raster.ioConfig.sampling)}this._needBlockCacheUpdate=!1,(null==(a=this._previousLOD)?void 0:a.level)!==r.level&&(this._previousLOD=r,null!=this._symbolizerParams&&this._updateSymbolizerParams(),this._tileStrategy.updateCacheSize(0))}this.notifyChange(\"updating\")}attach(){this.layer.increaseRasterJobHandlerUsage(),S().supportsTextureFloat||(this.useWebGLForProcessing=!1),this.layer.raster&&(this.layer.raster.ioConfig.allowPartialFill=!0),this._initializeTileInfo(),this._tileInfoView=new R(this.tileInfo,this.fullExtent),this._fetchQueue=new U({tileInfoView:this._tileInfoView,concurrency:10,process:(e,t)=>this.fetchTile(e,t)});const e=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy=new v({cachePolicy:\"purge\",resampling:!1,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:e,tileInfoView:this._tileInfoView}),this._bitmapView=new k(this._tileInfoView),this._bitmapView.isCustomTilingScheme=this._isCustomTilingScheme,this.container.addChild(this._bitmapView),this.handles.add([d(this,[\"layer.bandIds\",\"layer.renderer\"],(()=>this._redrawDebounced().catch((e=>{o(e)||V.error(e)})))),d(this,[\"layer.interpolation\"],((e,t)=>{\"majority\"!==e&&\"majority\"!==t||!this._canUseMajorityInterpolationOnDataSource()?this._redrawDebounced().catch((e=>{o(e)||V.error(e)})):this.refreshDebounced()})),d(this,[\"layer.multidimensionalDefinition\"],this.refreshDebounced)],\"attach\"),this._updateBlockCacheRegistry()}detach(){this.handles.remove(\"attach\"),this.layer.decreaseRasterJobHandlerUsage(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null,w(this._blockCacheRegistryUrl,this._blockCacheRegistryId)}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){!this.hasTilingEffects&&this.useProgressiveUpdate||(this._abortController&&this._abortController.abort(),this._abortController=h(),0===this._fetchQueue.length&&this._redrawImage(this._abortController.signal).then((()=>{this._globalUpdateRequested=!1,this.requestUpdate()})));const e=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy.updateCacheSize(e),this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return x(e,t,this.view)}async doRefresh(){this.updateRequested||this.suspended||(this.layer.updateRenderer(),this._updateSymbolizerParams(),this._updateBlockCacheRegistry(!0),this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))),this.notifyChange(\"updating\"))}isUpdating(){return this._fetchQueue.length>0||this._globalUpdateRequested}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(L,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this.requestUpdate(),this._needBlockCacheUpdate=!0,this._globalUpdateRequested=this.hasTilingEffects||!this.useProgressiveUpdate,t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>{e.destroy(),this.requestUpdate()})),this.requestUpdate()}fetchTile(e,s){const r=!t(s)&&s.signal,a=this._canUseWebGLForProcessing(),l={tileInfo:this.tileInfo,signal:i(r),registryId:this._blockCacheRegistryId,requestRawData:a,srcResolution:this._srcResolutions[e.level],datumTransformation:this.datumTransformation,interpolation:a?\"nearest\":this.layer.interpolation};return this.layer.fetchTile(e.level,e.row,e.col,l)}_canUseWebGLForProcessing(){return this.useWebGLForProcessing&&this.layer.symbolizer.canRenderInWebGL&&!(\"majority\"===this.layer.interpolation&&this._canUseMajorityInterpolationOnDataSource())}_getCacheSize(e){return e?40:0}_initializeTileInfo(){const e=this.view.spatialReference,t=new c({x:this.fullExtent.xmin,y:this.fullExtent.ymax,spatialReference:e}),{scales:i,srcResolutions:s,isCustomTilingScheme:r}=b(this.layer.rasterInfo,e),a=_.create({spatialReference:e,size:512,scales:i});(0===a.origin.x||a.origin.x>t.x)&&(a.origin=t),this._isCustomTilingScheme=r,this._set(\"tileInfo\",a),this._srcResolutions=null!=s?s:[]}async _enqueueTileFetch(e,t){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key),{bandIds:s}=this.layer;let r=!this.useProgressiveUpdate||this.hasTilingEffects&&!this._globalSymbolizerParams;if(this._globalUpdateRequested&&!this.moving&&0===this._fetchQueue.length){r=!1;try{await this._redrawImage(this._abortController&&this._abortController.signal)}catch(i){o(i)&&V.error(i)}this._globalUpdateRequested=!1}const a=this._canUseWebGLForProcessing();if(a&&!this.hasTilingEffects&&null==this._symbolizerParams&&this._updateSymbolizerParams(),t&&t.pixelBlock){const i={extent:t.extent,pixelBlock:t.pixelBlock};if(e.bitmap.rawPixelData=i,a)e.bitmap.source=t.pixelBlock,e.bitmap.isRendereredSource=!1;else{const t=await this.layer.applyRenderer(i,this.hasTilingEffects&&this._globalSymbolizerParams&&\"stretch\"===this._globalSymbolizerParams.type?this._globalSymbolizerParams:null);e.bitmap.source=t,e.bitmap.isRendereredSource=!0}e.bitmap.symbolizerParameters=a?this._globalSymbolizerParams||this._symbolizerParams:null,a?e.bitmap.transformGrid||(e.bitmap.transformGrid=t.transformGrid):e.bitmap.transformGrid=null}else{const t=this._createEmptyTilePixelBlock();e.bitmap.source=t,e.bitmap.symbolizerParameters=a?this._symbolizerParams:null,e.bitmap.transformGrid=null}e.bitmap.bandIds=s,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.bitmap.interpolation=this._getLayerInterpolation(),e.bitmap.suspended=r,e.bitmap.invalidateTexture(),e.once(\"attach\",(()=>this.requestUpdate())),this._bitmapView.addChild(e)}catch(i){o(i)||V.error(i)}this.requestUpdate()}}async _redrawImage(e){this.layer.updateRenderer(),this.hasTilingEffects?await this._updateGlobalSymbolizerParams(e):(this._updateSymbolizerParams(),this._globalSymbolizerParams=null);const{bandIds:t}=this.layer,i=this._bitmapView.children.map((async e=>{const i=this._canUseWebGLForProcessing();!i&&e.bitmap.rawPixelData?(e.bitmap.source=await this.layer.applyRenderer(e.bitmap.rawPixelData,this.hasTilingEffects&&this._globalSymbolizerParams&&\"stretch\"===this._globalSymbolizerParams.type?this._globalSymbolizerParams:null),e.bitmap.isRendereredSource=!0):(e.bitmap.isRendereredSource&&e.bitmap.rawPixelData&&(e.bitmap.source=e.bitmap.rawPixelData.pixelBlock),e.bitmap.isRendereredSource=!1),e.bitmap.symbolizerParameters=i?this._globalSymbolizerParams||this._symbolizerParams:null,e.bitmap.bandIds=t,e.bitmap.interpolation=this._getLayerInterpolation(),e.bitmap.suspended=!1}));await n(i),this.container.requestRender()}_createEmptyTilePixelBlock(){if(!this._emptyTilePixelBlock){const e=this._tileInfoView.tileInfo.size[0],t=this._tileInfoView.tileInfo.size[1];this._emptyTilePixelBlock=new y({width:e,height:t,pixels:[new Uint8Array(e*t)],mask:new Uint8Array(e*t),pixelType:\"u8\"})}return this._emptyTilePixelBlock}async _updateGlobalSymbolizerParams(e){const t={srcResolution:this._srcResolutions[this._previousLOD.level],registryId:this._blockCacheRegistryId,signal:e},i=await this.layer.fetchPixels(this.view.extent,this.view.width,this.view.height,t);if(!i||!i.pixelBlock)return;const s=this.layer.symbolizer.generateWebGLParameters({pixelBlock:g(i.pixelBlock,this.layer.bandIds),isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousLOD.resolution,y:this._previousLOD.resolution},bandIds:this.layer.bandIds});!this._canUseWebGLForProcessing()&&s&&\"stretch\"===s.type&&this.layer.renderer&&\"raster-stretch\"===this.layer.renderer.type&&(s.factor=s.factor.map((e=>255*e)),s.outMin=Math.round(255*s.outMin),s.outMax=Math.round(255*s.outMax)),this._globalSymbolizerParams=s}_updateSymbolizerParams(){this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null,isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousLOD.resolution,y:this._previousLOD.resolution},bandIds:this.layer.bandIds})}_updateBlockCacheRegistry(e=!1){const{url:t,rasterInfo:i,multidimensionalDefinition:s,raster:r}=this.layer,a=null!=i&&i.multidimensionalInfo?r.getSliceIndex(s):null,l=P(t,a);if(l!==this._blockCacheRegistryUrl){if(null!=this._blockCacheRegistryUrl&&w(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryId=I(l,this.layer.raster.rasterInfo),e){const e=this._tileInfoView.getClosestInfoForScale(this.view.scale),t=this._srcResolutions[e.level];f(l,this._blockCacheRegistryId,this.view.extent,this.view.resolution,t,this.layer.raster.ioConfig.sampling)}this._blockCacheRegistryUrl=l}}_canUseMajorityInterpolationOnDataSource(){const{bandCount:e,attributeTable:t,colormap:i,pixelType:s}=this.layer.rasterInfo;return 1===e&&(null!=t||null!=i||\"u8\"===s||\"s8\"===s)}_getLayerInterpolation(){const e=this.layer.renderer.type;return\"raster-colormap\"===e||\"unique-value\"===e||\"class-breaks\"===e?\"nearest\":this.layer.interpolation}};e([r()],q.prototype,\"useProgressiveUpdate\",null),q=e([a(\"esri.views.2d.layers.ImageryTileLayerView2D\")],q);var D=q;export default D;\n"],"sourceRoot":""}