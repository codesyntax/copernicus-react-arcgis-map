{"version":3,"sources":["../node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js","../node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js","../node_modules/@arcgis/core/views/2d/engine/Bitmap.js","../node_modules/@arcgis/core/renderers/support/heatmapUtils.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/BaseTileRenderer.js","../node_modules/@arcgis/core/views/2d/engine/BitmapTile.js","../node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/HeatmapSource.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/HeatmapTileRenderer.js"],"names":["n","e","r","key","level","row","col","i","_tileInfoView","this","sortChildren","setStencilReference","state","requiredLevel","getClosestInfoForScale","scale","displayLevel","tileInfo","scaleToZoom","t","registerRenderPass","name","brushes","s","drawPhase","DEBUG","MAP","HIGHLIGHT","target","getStencilTarget","children","has","getTileResolution","setTransform","stencilRef","pixelBlock","extent","originalPixelBlock","width","height","filter","l","getAsRGBA","h","createImageData","data","set","putImageData","renderedRasterPixels","Uint8Array","buffer","x","pixelFormat","internalFormat","dataType","wrapMode","o","_","requestRenderOnSourceChangedEnabled","_textureInvalidated","coordScale","_height","pixelRatio","resolution","rotation","_source","_width","y","transforms","dvs","blendFunction","source","requestRender","bind","_texture","dispose","sourceWidth","sourceHeight","invalidateTexture","HTMLImageElement","naturalHeight","naturalWidth","updateTexture","toScreenNoRotation","u","a","d","c","Math","PI","displayViewMat3","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","context","bindTexture","stage","resize","getRenderedRasterPixels","setData","document","createElement","render","getContext","ready","clearRect","createLinearGradient","colorStops","ratio","color","addColorStop","max","fillStyle","fillRect","getImageData","blurRadius","fieldOffset","field","Float64Array","f","round","Number","NEGATIVE_INFINITY","m","readAttribute","g","Set","getCursor","next","getObjectId","add","readLegacyPointGeometry","M","min","b","matrix","canvas","Uint8ClampedArray","Uint32Array","length","floor","exp","sqrt","tiles","Map","clear","layer","layerView","tileInfoView","isUpdating","createTile","once","notifyChange","id","forEach","delete","disposeTile","isReady","requestUpdate","prototype","bitmap","destroy","beforeRender","afterRender","some","getTileBounds","size","map","visible","gradient","intensities","minPixelIntensity","maxPixelIntensity","_intensityInfo","featuresView","attributeView","initialize","_container","getTileCoords","renderer","type","_gradient","toJSON","Promise","resolve","addChild","removeAllChildren","removeChild","get","tileKey","intensityInfo","console","error"],"mappings":"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","file":"static/js/52.01213086.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"./enums.js\";import r from\"./brushes/WGLBrushInfo.js\";import s from\"./brushes/WGLBrushStencil.js\";import t from\"./WGLContainer.js\";const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends t{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(n),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:r}=e;return{...super.createRenderParams(e),requiredLevel:this._tileInfoView.getClosestInfoForScale(r.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(r.scale)}}prepareRenderPasses(t){const n=t.registerRenderPass({name:\"stencil\",brushes:[s],drawPhase:e.DEBUG|e.MAP|e.HIGHLIGHT,target:()=>this.getStencilTarget()}),i=t.registerRenderPass({name:\"tileInfo\",brushes:[r],drawPhase:e.DEBUG,target:()=>this.children,has:\"esri-tiles-debug\"});return[...super.prepareRenderPasses(t),n,i]}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const s=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,s)}}setStencilReference(){let e=1;for(const r of this.children)r.stencilRef=e++}}export default i;export{n as sortByLevel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nclass e{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return this.pixelBlock?this.pixelBlock.width:0}get height(){return this.pixelBlock?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if(!t)return;const i=this.filter({pixelBlock:t}),l=i.pixelBlock.getAsRGBA(),h=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);h.data.set(l),e.putImageData(h,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}export default e;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";import{i as t,a as e,r as i,j as s,m as r}from\"../../../chunks/mat3.js\";import{c as h}from\"../../../chunks/mat3f32.js\";import{f as n}from\"../../../chunks/vec2f32.js\";import\"../../../chunks/builtins.js\";import\"../../webgl/checkWebGLError.js\";import o from\"../../webgl/Texture.js\";import\"../../webgl/FramebufferObject.js\";import{DisplayObject as u}from\"./DisplayObject.js\";import a from\"./ImageryBitmapSource.js\";function d(t){return t&&\"render\"in t}function c(t){return t&&!(\"render\"in t)}function l(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}function x(t,e,i){const s={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return e&&i&&(s.width=e,s.height=i),new o(t,s)}class _ extends u{constructor(t=null,e,i=!0){super(),this.requestRenderOnSourceChangedEnabled=i,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.transforms={dvs:h()},this.blendFunction=e,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){this._source=t,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}setTransform(h){const o=t(this.transforms.dvs),[u,a]=h.toScreenNoRotation([0,0],this.x,this.y),d=this.resolution/this.pixelRatio/h.resolution,c=d*this.width,l=d*this.height,x=Math.PI*this.rotation/180;e(o,o,n(u,a)),e(o,o,n(c/2,l/2)),i(o,o,-x),e(o,o,n(-c/2,-l/2)),s(o,o,n(c,l)),r(this.transforms.dvs,h.displayViewMat3,o)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind({context:t},e){this._texture&&t.bindTexture(this._texture,e)}updateTexture({context:t}){var e;if(!this.stage)return null==(e=this._texture)||e.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=x(t,this.sourceWidth,this.sourceHeight):this._texture=x(t));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),d(i))if(i instanceof a){const t=i.getRenderedRasterPixels();this._texture.setData(t.renderedRasterPixels)}else this._texture.setData(l(i));else c(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}export{_ as Bitmap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"../../core/global.js\";import{clamp as e}from\"../../core/mathUtils.js\";const n=(()=>{if(!(\"document\"in t))return()=>null;const e=document.createElement(\"canvas\"),n=e.getContext(\"2d\"),r=512;return e.height=r,e.width=1,t=>{n.clearRect(0,0,1,e.height);const r=n.createLinearGradient(0,0,0,e.height);for(const{ratio:e,color:n}of t.colorStops)r.addColorStop(Math.max(e,.001),`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]})`);return n.fillStyle=r,n.fillRect(0,0,1,e.height),n.getImageData(0,0,1,e.height).data}})();function r(t,e,n,r){const{blurRadius:o,fieldOffset:a,field:i}=e,u=new Float64Array(n*r),l=f(o),s=Math.round(3*o);let h,d=Number.NEGATIVE_INFINITY;const m=c(i,a);for(const{geometry:f,attributes:c}of t){const t=f.x-s,e=f.y-s,o=Math.max(0,t),a=Math.max(0,e),i=Math.min(r,f.y+s),g=Math.min(n,f.x+s),y=+m(c);for(let r=a;r<i;r++){const a=l[r-e];for(let e=o;e<g;e++){const o=l[e-t];h=u[r*n+e]+=a*o*y,h>d&&(d=h)}}}return{matrix:u.buffer,max:d}}function o(t,e,n,r){const{blurRadius:o,fieldOffset:a,field:i}=e,c=new Float64Array(n*r),l=f(o),s=Math.round(3*o);let h,d=Number.NEGATIVE_INFINITY;const m=u(i,a),g=new Set;for(const f of t){const t=f.getCursor();for(;t.next();){const e=t.getObjectId();if(g.has(e))continue;g.add(e);const o=t.readLegacyPointGeometry(),a=128;if(o.x<-a||o.x>=n+a||o.y<-a||o.y>r+a)continue;const i=+m(t),f=Math.round(o.x)-s,u=Math.round(o.y)-s,y=Math.max(0,f),M=Math.max(0,u),x=Math.min(r,Math.round(o.y)+s),b=Math.min(n,Math.round(o.x)+s);for(let t=M;t<x;t++){const e=l[t-u];for(let r=y;r<b;r++){const o=l[r-f];h=c[t*n+r]+=e*o*i,h>d&&(d=h)}}}}return{matrix:c.buffer,max:d}}function a(t,e,n,r,o,a){t.canvas.width=t.canvas.height=e,t.clearRect(0,0,e,e);const f=t.getImageData(0,0,e,e);n&&r&&f.data.set(new Uint8ClampedArray(i(e,n,r,o,a))),t.putImageData(f,0,0)}function i(t,n,r,o,a){const i=new Uint32Array(t*t),f=\"buffer\"in n?n:new Float64Array(n),c=\"buffer\"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer),u=c.length/(a-o);for(let l=0;l<f.length;l++){const t=f[l],n=Math.floor((t-o)*u);i[l]=c[e(n,0,c.length-1)]}return i.buffer}function f(t){const e=Math.round(3*t),n=2*t*t,r=new Float64Array(2*e+1);for(let o=0;o<=r.length;o++)r[o]=Math.exp(-((o-e)**2)/n)/Math.sqrt(2*Math.PI)*(t/2);return r}function c(t,e){return\"function\"==typeof t?t:t?\"string\"==typeof e?e=>-1*+e[t]:n=>+n[t]+e:()=>1}function u(t,e){return null!=t?\"string\"==typeof e?e=>-1*+e.readAttribute(t):n=>+n.readAttribute(t)+e:t=>1}export{r as calculateHeatmapIntensityInfo,o as calculateHeatmapIntensityInfoReaders,i as createHeatmapImageData,f as createKernel,c as createValueFunction,u as createValueFunctionCursor,a as drawHeatmap,n as generateGradient};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import{HandleOwner as s}from\"../../../../../core/HandleOwner.js\";let i=class extends s{constructor(e){super(e),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(e){const t=this.createTile(e);return t.once(\"isReady\",(()=>this.notifyChange(\"updating\"))),this.tiles.set(e.id,t),t}forceAttributeTextureUpload(){}forEachTile(e){this.tiles.forEach(e)}releaseTile(e){this.tiles.delete(e.key.id),this.disposeTile(e)}isUpdating(){let e=!0;return this.tiles.forEach((t=>{e=e&&t.isReady})),!e}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};e([t()],i.prototype,\"layer\",void 0),e([t()],i.prototype,\"layerView\",void 0),e([t()],i.prototype,\"tileInfoView\",void 0),e([t()],i.prototype,\"updating\",null),i=e([r(\"esri.views.2d.layers.features.tileRenderers.BaseTileRenderer\")],i);var o=i;export default o;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{TiledDisplayObject as t}from\"./webgl/TiledDisplayObject.js\";import{Bitmap as e}from\"./Bitmap.js\";class s extends t{constructor(t,s,r,i=null){super(t,s,r,r),this.bitmap=new e(i,\"standard\",!1),this.bitmap.coordScale=r,this.bitmap.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(t){super.beforeRender(t),this.bitmap.beforeRender(t)}afterRender(t){super.afterRender(t),this.bitmap.afterRender(t)}set stencilRef(t){this.bitmap.stencilRef=t}get stencilRef(){return this.bitmap.stencilRef}setTransform(t,e){super.setTransform(t,e),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}export{s as BitmapTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{WGLDrawPhase as r}from\"./webgl/enums.js\";import{brushes as s}from\"./brushes.js\";import t from\"./webgl/TileContainer.js\";import{BitmapTile as i}from\"./BitmapTile.js\";class n extends t{get requiresDedicatedFBO(){return this.children.some((e=>\"additive\"===e.bitmap.blendFunction))}createTile(r){const s=this._tileInfoView.getTileBounds(e(),r);return new i(r,s,this._tileInfoView.tileInfo.size)}destroyTile(){}prepareRenderPasses(e){const t=e.registerRenderPass({name:\"bitmap (tile)\",brushes:[s.bitmap],target:()=>this.children.map((e=>e.bitmap)),drawPhase:r.MAP});return[...super.prepareRenderPasses(e),t]}doRender(e){this.visible&&e.drawPhase===r.MAP&&super.doRender(e)}}export{n as BitmapTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{drawHeatmap as t}from\"../../../../../../renderers/support/heatmapUtils.js\";class i{constructor(){this.gradient=null,this.height=512,this.width=512}render(i){t(i,512,this.intensities,this.gradient,this.minPixelIntensity,this.maxPixelIntensity)}}export{i as HeatmapSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import{generateGradient as i}from\"../../../../../renderers/support/heatmapUtils.js\";import{BitmapTileContainer as r}from\"../../../engine/BitmapTileContainer.js\";import s from\"./BaseTileRenderer.js\";import{HeatmapSource as n}from\"./support/HeatmapSource.js\";let o=class extends s{constructor(e){super(e),this._intensityInfo={minPixelIntensity:0,maxPixelIntensity:0},this.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}},this._container=new r(e.tileInfoView)}createTile(e){const t=this._container.createTile(e);return this.tileInfoView.getTileCoords(t.bitmap,e),t.bitmap.resolution=this.tileInfoView.getTileResolution(e),t}onConfigUpdate(){const e=this.layer.renderer;if(\"heatmap\"===e.type){const{minPixelIntensity:t,maxPixelIntensity:r}=e;this._intensityInfo.minPixelIntensity=t,this._intensityInfo.maxPixelIntensity=r,this._gradient=i(e.toJSON()),this.tiles.forEach((e=>{const i=e.bitmap.source;i&&(i.minPixelIntensity=t,i.maxPixelIntensity=r,i.gradient=this._gradient,e.bitmap.invalidateTexture())}))}}hitTest(){return Promise.resolve([])}install(e){e.addChild(this._container)}uninstall(e){this._container.removeAllChildren(),e.removeChild(this._container)}disposeTile(e){this._container.removeChild(e),e.destroy()}supportsRenderer(e){return e&&\"heatmap\"===e.type}onTileData(e){const t=this.tiles.get(e.tileKey);if(!t)return;const i=e.intensityInfo,{minPixelIntensity:r,maxPixelIntensity:s}=this._intensityInfo,o=t.bitmap.source||new n;o.intensities=i&&i.matrix||null,o.minPixelIntensity=r,o.maxPixelIntensity=s,o.gradient=this._gradient,t.bitmap.source=o,this._container.addChild(t),this.requestUpdate()}onTileError(e){console.error(e)}lockGPUUploads(){}unlockGPUUploads(){}};o=e([t(\"esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer\")],o);var a=o;export default a;\n"],"sourceRoot":""}